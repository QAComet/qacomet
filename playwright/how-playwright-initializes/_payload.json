[{"data":1,"prerenderedAt":6303},["Reactive",2],{"blog-post-playwright/how-playwright-initializes":3},{"_path":4,"_dir":5,"_draft":6,"_partial":6,"_locale":7,"title":8,"description":9,"breadcrumbs":10,"image":17,"shortDescription":18,"created":19,"link":4,"body":25,"_type":6298,"_id":6299,"_source":6300,"_file":6301,"_extension":6302},"/playwright/how-playwright-initializes","playwright",false,"","How importing from Playwright works","In this post we dive into how Playwright initializes itself when you import anything from the library. If you look under the hood there is some complex machinery generating the API making it difficult for someone unfamiliar to get started with Playwright's internals.",[11,14],{"name":12,"path":13},"Playwright","/playwright/",{"name":15,"path":16},"How Playwright Initializes","/playwright/how-playwright-initializes/","img","Importing from playwright is a complex process with many interacting components. Let's look under the hood to discover how playwright-core is structured.",{"string":20,"number":21,"month":22,"day":23,"year":24},"March 13, 2024",1710309600000,"Mar",13,2024,{"type":26,"children":27,"toc":6283},"root",[28,38,46,51,258,263,268,288,359,379,430,514,544,550,636,641,647,666,1657,1691,1723,1743,1804,1809,1870,1883,2071,2106,2112,2189,2384,2389,2489,2546,2552,2580,2645,2686,2719,3387,3470,3477,3489,3787,3866,3872,3993,3999,4040,4242,4290,4332,4351,4637,4686,4877,4897,5338,5422,5496,5574,5638,5644,5657,5775,5810,5835,5848,6024,6036,6042,6047,6259,6277],{"type":29,"tag":30,"props":31,"children":32},"element","p",{},[33],{"type":29,"tag":17,"props":34,"children":37},{"alt":35,"src":36},"Diagram of playwright-core initialization process","/img/playwright/playwright-core_initialization_diagram.jpg",[],{"type":29,"tag":39,"props":40,"children":42},"h2",{"id":41},"peering-into-playwrights-import-process",[43],{"type":44,"value":45},"text","Peering into Playwright's import process",{"type":29,"tag":30,"props":47,"children":48},{},[49],{"type":44,"value":50},"Whenever you import playwright, there's a lot of code being executed before you can actually execute anything with its APIs. In the following short snippet",{"type":29,"tag":52,"props":53,"children":57},"pre",{"className":54,"code":55,"language":56,"meta":7,"style":7},"language-ts shiki shiki-themes github-dark","import { chromium } from '@playwright/test'\n\nasync function main () => {\n  const browser = await chromium.launch()\n  const page = await browser.newPage()\n  await page.goto(\"https://qacomet.com\")\n}\n","ts",[58],{"type":29,"tag":59,"props":60,"children":61},"code",{"__ignoreMap":7},[62,91,101,136,176,211,249],{"type":29,"tag":63,"props":64,"children":67},"span",{"class":65,"line":66},"line",1,[68,74,80,85],{"type":29,"tag":63,"props":69,"children":71},{"style":70},"--shiki-default:#F97583",[72],{"type":44,"value":73},"import",{"type":29,"tag":63,"props":75,"children":77},{"style":76},"--shiki-default:#E1E4E8",[78],{"type":44,"value":79}," { chromium } ",{"type":29,"tag":63,"props":81,"children":82},{"style":70},[83],{"type":44,"value":84},"from",{"type":29,"tag":63,"props":86,"children":88},{"style":87},"--shiki-default:#9ECBFF",[89],{"type":44,"value":90}," '@playwright/test'\n",{"type":29,"tag":63,"props":92,"children":94},{"class":65,"line":93},2,[95],{"type":29,"tag":63,"props":96,"children":98},{"emptyLinePlaceholder":97},true,[99],{"type":44,"value":100},"\n",{"type":29,"tag":63,"props":102,"children":104},{"class":65,"line":103},3,[105,110,115,121,126,131],{"type":29,"tag":63,"props":106,"children":107},{"style":70},[108],{"type":44,"value":109},"async",{"type":29,"tag":63,"props":111,"children":112},{"style":70},[113],{"type":44,"value":114}," function",{"type":29,"tag":63,"props":116,"children":118},{"style":117},"--shiki-default:#B392F0",[119],{"type":44,"value":120}," main",{"type":29,"tag":63,"props":122,"children":123},{"style":76},[124],{"type":44,"value":125}," () ",{"type":29,"tag":63,"props":127,"children":128},{"style":70},[129],{"type":44,"value":130},"=>",{"type":29,"tag":63,"props":132,"children":133},{"style":76},[134],{"type":44,"value":135}," {\n",{"type":29,"tag":63,"props":137,"children":139},{"class":65,"line":138},4,[140,145,151,156,161,166,171],{"type":29,"tag":63,"props":141,"children":142},{"style":117},[143],{"type":44,"value":144},"  const",{"type":29,"tag":63,"props":146,"children":148},{"style":147},"--shiki-default:#FFAB70",[149],{"type":44,"value":150}," browser",{"type":29,"tag":63,"props":152,"children":153},{"style":70},[154],{"type":44,"value":155}," =",{"type":29,"tag":63,"props":157,"children":158},{"style":70},[159],{"type":44,"value":160}," await",{"type":29,"tag":63,"props":162,"children":163},{"style":76},[164],{"type":44,"value":165}," chromium.",{"type":29,"tag":63,"props":167,"children":168},{"style":117},[169],{"type":44,"value":170},"launch",{"type":29,"tag":63,"props":172,"children":173},{"style":76},[174],{"type":44,"value":175},"()\n",{"type":29,"tag":63,"props":177,"children":179},{"class":65,"line":178},5,[180,184,189,193,197,202,207],{"type":29,"tag":63,"props":181,"children":182},{"style":117},[183],{"type":44,"value":144},{"type":29,"tag":63,"props":185,"children":186},{"style":147},[187],{"type":44,"value":188}," page",{"type":29,"tag":63,"props":190,"children":191},{"style":70},[192],{"type":44,"value":155},{"type":29,"tag":63,"props":194,"children":195},{"style":70},[196],{"type":44,"value":160},{"type":29,"tag":63,"props":198,"children":199},{"style":76},[200],{"type":44,"value":201}," browser.",{"type":29,"tag":63,"props":203,"children":204},{"style":117},[205],{"type":44,"value":206},"newPage",{"type":29,"tag":63,"props":208,"children":209},{"style":76},[210],{"type":44,"value":175},{"type":29,"tag":63,"props":212,"children":214},{"class":65,"line":213},6,[215,220,224,229,234,239,244],{"type":29,"tag":63,"props":216,"children":217},{"style":117},[218],{"type":44,"value":219},"  await",{"type":29,"tag":63,"props":221,"children":222},{"style":117},[223],{"type":44,"value":188},{"type":29,"tag":63,"props":225,"children":226},{"style":76},[227],{"type":44,"value":228},".",{"type":29,"tag":63,"props":230,"children":231},{"style":117},[232],{"type":44,"value":233},"goto",{"type":29,"tag":63,"props":235,"children":236},{"style":76},[237],{"type":44,"value":238},"(",{"type":29,"tag":63,"props":240,"children":241},{"style":87},[242],{"type":44,"value":243},"\"https://qacomet.com\"",{"type":29,"tag":63,"props":245,"children":246},{"style":76},[247],{"type":44,"value":248},")\n",{"type":29,"tag":63,"props":250,"children":252},{"class":65,"line":251},7,[253],{"type":29,"tag":63,"props":254,"children":255},{"style":76},[256],{"type":44,"value":257},"}\n",{"type":29,"tag":30,"props":259,"children":260},{},[261],{"type":44,"value":262},"Playwright is initializing a server controlling the browser instance, building a connection between its underlying client and server library, and using a factory method to create a client-facing API for manipulating the browser. This long seemingly roundabout process is actually Playwright's secret sauce for much of its functionality. Because of this architectural decision, it is now possible to create client API's for Playwright in multiple languages, all which use the same underlying software architecture. This gives a consistent developer experience across projects spanning multiple languages, such as Javascript, Python, Java, and .NET. In addition, it's now easier to build future community supported clients in other languages, such as in Ruby, because of the replicability of Playwright's core interfaces.",{"type":29,"tag":30,"props":264,"children":265},{},[266],{"type":44,"value":267},"In order to see how the general project is structured, and how its design patterns can be replicated across clients, we trace through Playwright's initialization process in its core Typescript project, on which every other client library depends. By doing this, we will view its internals giving a clear picture of its internal architecture.",{"type":29,"tag":269,"props":270,"children":272},"h3",{"id":271},"merging-playwright-and-playwright-core",[273,275,280,282],{"type":44,"value":274},"Merging ",{"type":29,"tag":59,"props":276,"children":278},{"className":277},[],[279],{"type":44,"value":5},{"type":44,"value":281}," and ",{"type":29,"tag":59,"props":283,"children":285},{"className":284},[],[286],{"type":44,"value":287},"playwright-core",{"type":29,"tag":30,"props":289,"children":290},{},[291,293,299,301,307,308,314,316,322,324,329,331,337,339,344,346,351,353,358],{"type":44,"value":292},"Internally, when you import from ",{"type":29,"tag":59,"props":294,"children":296},{"className":295},[],[297],{"type":44,"value":298},"@playwright/test",{"type":44,"value":300},", there is an underlying call to import from two merged packages, ",{"type":29,"tag":59,"props":302,"children":304},{"className":303},[],[305],{"type":44,"value":306},"packages/playwright-core",{"type":44,"value":281},{"type":29,"tag":59,"props":309,"children":311},{"className":310},[],[312],{"type":44,"value":313},"packages/playwright",{"type":44,"value":315},". This merge happens in ",{"type":29,"tag":59,"props":317,"children":319},{"className":318},[],[320],{"type":44,"value":321},"packages/playwright/test",{"type":44,"value":323},", since ",{"type":29,"tag":59,"props":325,"children":327},{"className":326},[],[328],{"type":44,"value":298},{"type":44,"value":330}," is just an outward facinging export of ",{"type":29,"tag":59,"props":332,"children":334},{"className":333},[],[335],{"type":44,"value":336},"require('playwright/test')",{"type":44,"value":338},", an alias for ",{"type":29,"tag":59,"props":340,"children":342},{"className":341},[],[343],{"type":44,"value":321},{"type":44,"value":345},". This is where the test execution API's from ",{"type":29,"tag":59,"props":347,"children":349},{"className":348},[],[350],{"type":44,"value":313},{"type":44,"value":352}," are combined with the browser automation API's from ",{"type":29,"tag":59,"props":354,"children":356},{"className":355},[],[357],{"type":44,"value":306},{"type":44,"value":228},{"type":29,"tag":30,"props":360,"children":361},{},[362,364,369,371,377],{"type":44,"value":363},"We will focus on the import from ",{"type":29,"tag":59,"props":365,"children":367},{"className":366},[],[368],{"type":44,"value":287},{"type":44,"value":370},", since it provides the core browser automation and is the code every other client library wraps. Looking at its ",{"type":29,"tag":59,"props":372,"children":374},{"className":373},[],[375],{"type":44,"value":376},"index.js",{"type":44,"value":378}," file",{"type":29,"tag":52,"props":380,"children":385},{"className":381,"code":382,"filename":383,"language":384,"meta":7,"style":7},"language-js shiki shiki-themes github-dark","module.exports = require(\"./lib/inprocess\");\n","packages/playwright-core/index.js","js",[386],{"type":29,"tag":59,"props":387,"children":388},{"__ignoreMap":7},[389],{"type":29,"tag":63,"props":390,"children":391},{"class":65,"line":66},[392,398,402,407,411,416,420,425],{"type":29,"tag":63,"props":393,"children":395},{"style":394},"--shiki-default:#79B8FF",[396],{"type":44,"value":397},"module",{"type":29,"tag":63,"props":399,"children":400},{"style":76},[401],{"type":44,"value":228},{"type":29,"tag":63,"props":403,"children":404},{"style":394},[405],{"type":44,"value":406},"exports",{"type":29,"tag":63,"props":408,"children":409},{"style":70},[410],{"type":44,"value":155},{"type":29,"tag":63,"props":412,"children":413},{"style":117},[414],{"type":44,"value":415}," require",{"type":29,"tag":63,"props":417,"children":418},{"style":76},[419],{"type":44,"value":238},{"type":29,"tag":63,"props":421,"children":422},{"style":87},[423],{"type":44,"value":424},"\"./lib/inprocess\"",{"type":29,"tag":63,"props":426,"children":427},{"style":76},[428],{"type":44,"value":429},");\n",{"type":29,"tag":30,"props":431,"children":432},{},[433,435,441,443,449,451,457,459,465,467,473,475,481,483,489,491,496,498,504,506,512],{"type":44,"value":434},"gives an export from its ",{"type":29,"tag":59,"props":436,"children":438},{"className":437},[],[439],{"type":44,"value":440},"lib/inprocess.ts",{"type":44,"value":442}," file (note the ",{"type":29,"tag":59,"props":444,"children":446},{"className":445},[],[447],{"type":44,"value":448},"lib",{"type":44,"value":450}," directory is compiled to the ",{"type":29,"tag":59,"props":452,"children":454},{"className":453},[],[455],{"type":44,"value":456},"src",{"type":44,"value":458}," directory after playwright runs its build script, and is what's found in ",{"type":29,"tag":59,"props":460,"children":462},{"className":461},[],[463],{"type":44,"value":464},"node_modules/playwright-core",{"type":44,"value":466},"). The ",{"type":29,"tag":59,"props":468,"children":470},{"className":469},[],[471],{"type":44,"value":472},"inprocess.ts",{"type":44,"value":474}," file just imports from the adjacent ",{"type":29,"tag":59,"props":476,"children":478},{"className":477},[],[479],{"type":44,"value":480},"inProcessFactory.ts",{"type":44,"value":482}," and executes the function from there, called ",{"type":29,"tag":59,"props":484,"children":486},{"className":485},[],[487],{"type":44,"value":488},"createInProcessPlaywright",{"type":44,"value":490},". We include the source below in its own section but note ",{"type":29,"tag":59,"props":492,"children":494},{"className":493},[],[495],{"type":44,"value":488},{"type":44,"value":497}," dynamically intiailizes the interface between the client library, defined in ",{"type":29,"tag":59,"props":499,"children":501},{"className":500},[],[502],{"type":44,"value":503},"src/client",{"type":44,"value":505},", and the server library, defined in ",{"type":29,"tag":59,"props":507,"children":509},{"className":508},[],[510],{"type":44,"value":511},"src/server",{"type":44,"value":513},". The server library is responsible for dispatching browser automation actions over a browser automation protocol, such as the Chrome Devtools Protocol, abbreviated as CDP, while the client library gives a public API for playwright users to interact with the server library.",{"type":29,"tag":30,"props":515,"children":516},{},[517,519,528,530,535,537,542],{"type":44,"value":518},"This separation of logic between client and server is what gives implementations of the client library in multiple languages. For example, if you look in the ",{"type":29,"tag":520,"props":521,"children":525},"a",{"href":522,"rel":523},"https://github.com/microsoft/playwright-python",[524],"nofollow",[526],{"type":44,"value":527},"playwright-python",{"type":44,"value":529}," source code, you will find the same design patterns and classes defined in ",{"type":29,"tag":59,"props":531,"children":533},{"className":532},[],[534],{"type":44,"value":287},{"type":44,"value":536},"'s ",{"type":29,"tag":59,"props":538,"children":540},{"className":539},[],[541],{"type":44,"value":503},{"type":44,"value":543}," library.",{"type":29,"tag":269,"props":545,"children":547},{"id":546},"rapid-overview-of-the-client-and-server-libraries",[548],{"type":44,"value":549},"Rapid overview of the client and server libraries",{"type":29,"tag":30,"props":551,"children":552},{},[553,555,560,562,567,568,573,575,581,583,589,591,596,598,604,606,611,613,619,621,627,628,634],{"type":44,"value":554},"In ",{"type":29,"tag":59,"props":556,"children":558},{"className":557},[],[559],{"type":44,"value":287},{"type":44,"value":561}," the main functionality can be found in the ",{"type":29,"tag":59,"props":563,"children":565},{"className":564},[],[566],{"type":44,"value":503},{"type":44,"value":281},{"type":29,"tag":59,"props":569,"children":571},{"className":570},[],[572],{"type":44,"value":511},{"type":44,"value":574}," folders. Within the ",{"type":29,"tag":59,"props":576,"children":578},{"className":577},[],[579],{"type":44,"value":580},"client",{"type":44,"value":582}," folder contains classes which most are subclasses of the ",{"type":29,"tag":59,"props":584,"children":586},{"className":585},[],[587],{"type":44,"value":588},"ChannelOwner",{"type":44,"value":590}," class. This ",{"type":29,"tag":59,"props":592,"children":594},{"className":593},[],[595],{"type":44,"value":588},{"type":44,"value":597}," class is an internal client-side representation of a corresponding class in the ",{"type":29,"tag":59,"props":599,"children":601},{"className":600},[],[602],{"type":44,"value":603},"src/server/dispatchers",{"type":44,"value":605}," folder, which handles communication from the server library to the browser being automated. So in for a ",{"type":29,"tag":59,"props":607,"children":609},{"className":608},[],[610],{"type":44,"value":588},{"type":44,"value":612}," subclass called ",{"type":29,"tag":59,"props":614,"children":616},{"className":615},[],[617],{"type":44,"value":618},"Page",{"type":44,"value":620},", there is a corresponding ",{"type":29,"tag":59,"props":622,"children":624},{"className":623},[],[625],{"type":44,"value":626},"Dispatcher",{"type":44,"value":612},{"type":29,"tag":59,"props":629,"children":631},{"className":630},[],[632],{"type":44,"value":633},"PageDispatcher",{"type":44,"value":635},". This is a repeated pattern for many of the client-facing APIs you use while writing browser automation scripts with Playwright.",{"type":29,"tag":30,"props":637,"children":638},{},[639],{"type":44,"value":640},"Understanding the inner workings of these abstractions is essential for grokking the architecture of Playwright, which we touch on soon. But first, let's go back to tracing the import process from Playwright and see how that works.",{"type":29,"tag":39,"props":642,"children":644},{"id":643},"playwrights-core-api-factory-createinprocessplaywright",[645],{"type":44,"value":646},"Playwright's core API factory, createInProcessPlaywright",{"type":29,"tag":30,"props":648,"children":649},{},[650,652,657,659,664],{"type":44,"value":651},"This file, ",{"type":29,"tag":59,"props":653,"children":655},{"className":654},[],[656],{"type":44,"value":480},{"type":44,"value":658},", contains only one function called ",{"type":29,"tag":59,"props":660,"children":662},{"className":661},[],[663],{"type":44,"value":488},{"type":44,"value":665},". We include it here as a reference:",{"type":29,"tag":52,"props":667,"children":670},{"className":54,"code":668,"filename":669,"language":56,"meta":7,"style":7},"export function createInProcessPlaywright(): PlaywrightAPI {\n  const playwright = createPlaywright({\n    sdkLanguage:\n      (process.env.PW_LANG_NAME as Language | undefined) || \"javascript\",\n  });\n\n  const clientConnection = new Connection(undefined, undefined);\n  clientConnection.useRawBuffers();\n  const dispatcherConnection = new DispatcherConnection(true /* local */);\n\n  // Dispatch synchronously at first.\n  dispatcherConnection.onmessage = (message) =>\n    clientConnection.dispatch(message);\n  clientConnection.onmessage = (message) =>\n    dispatcherConnection.dispatch(message);\n\n  const rootScope = new RootDispatcher(dispatcherConnection);\n\n  // Initialize Playwright channel.\n  new PlaywrightDispatcher(rootScope, playwright);\n  const playwrightAPI = clientConnection.getObjectWithKnownName(\n    \"Playwright\"\n  ) as PlaywrightAPI;\n  playwrightAPI.chromium._serverLauncher = new BrowserServerLauncherImpl(\n    \"chromium\"\n  );\n  playwrightAPI.firefox._serverLauncher = new BrowserServerLauncherImpl(\n    \"firefox\"\n  );\n  playwrightAPI.webkit._serverLauncher = new BrowserServerLauncherImpl(\n    \"webkit\"\n  );\n  playwrightAPI._android._serverLauncher = new AndroidServerLauncherImpl();\n\n  // Switch to async dispatch after we got Playwright object.\n  dispatcherConnection.onmessage = (message) =>\n    setImmediate(() => clientConnection.dispatch(message));\n  clientConnection.onmessage = (message) =>\n    setImmediate(() => dispatcherConnection.dispatch(message));\n\n  clientConnection.toImpl = (x: any) =>\n    x\n      ? dispatcherConnection._dispatchers.get(x._guid)!._object\n      : dispatcherConnection._dispatchers.get(\"\");\n  (playwrightAPI as any)._toImpl = clientConnection.toImpl;\n  return playwrightAPI;\n}\n","packages/playwright-core/src/inProcessFactory.ts",[671],{"type":29,"tag":59,"props":672,"children":673},{"__ignoreMap":7},[674,710,736,744,797,805,812,860,879,924,932,941,978,996,1028,1045,1053,1084,1092,1101,1120,1152,1161,1184,1211,1220,1229,1254,1263,1271,1296,1305,1313,1339,1347,1356,1388,1419,1451,1480,1488,1531,1540,1574,1604,1635,1649],{"type":29,"tag":63,"props":675,"children":676},{"class":65,"line":66},[677,682,686,691,696,701,706],{"type":29,"tag":63,"props":678,"children":679},{"style":70},[680],{"type":44,"value":681},"export",{"type":29,"tag":63,"props":683,"children":684},{"style":70},[685],{"type":44,"value":114},{"type":29,"tag":63,"props":687,"children":688},{"style":117},[689],{"type":44,"value":690}," createInProcessPlaywright",{"type":29,"tag":63,"props":692,"children":693},{"style":76},[694],{"type":44,"value":695},"()",{"type":29,"tag":63,"props":697,"children":698},{"style":70},[699],{"type":44,"value":700},":",{"type":29,"tag":63,"props":702,"children":703},{"style":117},[704],{"type":44,"value":705}," PlaywrightAPI",{"type":29,"tag":63,"props":707,"children":708},{"style":76},[709],{"type":44,"value":135},{"type":29,"tag":63,"props":711,"children":712},{"class":65,"line":93},[713,717,722,726,731],{"type":29,"tag":63,"props":714,"children":715},{"style":70},[716],{"type":44,"value":144},{"type":29,"tag":63,"props":718,"children":719},{"style":394},[720],{"type":44,"value":721}," playwright",{"type":29,"tag":63,"props":723,"children":724},{"style":70},[725],{"type":44,"value":155},{"type":29,"tag":63,"props":727,"children":728},{"style":117},[729],{"type":44,"value":730}," createPlaywright",{"type":29,"tag":63,"props":732,"children":733},{"style":76},[734],{"type":44,"value":735},"({\n",{"type":29,"tag":63,"props":737,"children":738},{"class":65,"line":103},[739],{"type":29,"tag":63,"props":740,"children":741},{"style":76},[742],{"type":44,"value":743},"    sdkLanguage:\n",{"type":29,"tag":63,"props":745,"children":746},{"class":65,"line":138},[747,752,757,762,767,772,777,782,787,792],{"type":29,"tag":63,"props":748,"children":749},{"style":76},[750],{"type":44,"value":751},"      (process.env.",{"type":29,"tag":63,"props":753,"children":754},{"style":394},[755],{"type":44,"value":756},"PW_LANG_NAME",{"type":29,"tag":63,"props":758,"children":759},{"style":70},[760],{"type":44,"value":761}," as",{"type":29,"tag":63,"props":763,"children":764},{"style":117},[765],{"type":44,"value":766}," Language",{"type":29,"tag":63,"props":768,"children":769},{"style":70},[770],{"type":44,"value":771}," |",{"type":29,"tag":63,"props":773,"children":774},{"style":394},[775],{"type":44,"value":776}," undefined",{"type":29,"tag":63,"props":778,"children":779},{"style":76},[780],{"type":44,"value":781},") ",{"type":29,"tag":63,"props":783,"children":784},{"style":70},[785],{"type":44,"value":786},"||",{"type":29,"tag":63,"props":788,"children":789},{"style":87},[790],{"type":44,"value":791}," \"javascript\"",{"type":29,"tag":63,"props":793,"children":794},{"style":76},[795],{"type":44,"value":796},",\n",{"type":29,"tag":63,"props":798,"children":799},{"class":65,"line":178},[800],{"type":29,"tag":63,"props":801,"children":802},{"style":76},[803],{"type":44,"value":804},"  });\n",{"type":29,"tag":63,"props":806,"children":807},{"class":65,"line":213},[808],{"type":29,"tag":63,"props":809,"children":810},{"emptyLinePlaceholder":97},[811],{"type":44,"value":100},{"type":29,"tag":63,"props":813,"children":814},{"class":65,"line":251},[815,819,824,828,833,838,842,847,852,856],{"type":29,"tag":63,"props":816,"children":817},{"style":70},[818],{"type":44,"value":144},{"type":29,"tag":63,"props":820,"children":821},{"style":394},[822],{"type":44,"value":823}," clientConnection",{"type":29,"tag":63,"props":825,"children":826},{"style":70},[827],{"type":44,"value":155},{"type":29,"tag":63,"props":829,"children":830},{"style":70},[831],{"type":44,"value":832}," new",{"type":29,"tag":63,"props":834,"children":835},{"style":117},[836],{"type":44,"value":837}," Connection",{"type":29,"tag":63,"props":839,"children":840},{"style":76},[841],{"type":44,"value":238},{"type":29,"tag":63,"props":843,"children":844},{"style":394},[845],{"type":44,"value":846},"undefined",{"type":29,"tag":63,"props":848,"children":849},{"style":76},[850],{"type":44,"value":851},", ",{"type":29,"tag":63,"props":853,"children":854},{"style":394},[855],{"type":44,"value":846},{"type":29,"tag":63,"props":857,"children":858},{"style":76},[859],{"type":44,"value":429},{"type":29,"tag":63,"props":861,"children":863},{"class":65,"line":862},8,[864,869,874],{"type":29,"tag":63,"props":865,"children":866},{"style":76},[867],{"type":44,"value":868},"  clientConnection.",{"type":29,"tag":63,"props":870,"children":871},{"style":117},[872],{"type":44,"value":873},"useRawBuffers",{"type":29,"tag":63,"props":875,"children":876},{"style":76},[877],{"type":44,"value":878},"();\n",{"type":29,"tag":63,"props":880,"children":882},{"class":65,"line":881},9,[883,887,892,896,900,905,909,914,920],{"type":29,"tag":63,"props":884,"children":885},{"style":70},[886],{"type":44,"value":144},{"type":29,"tag":63,"props":888,"children":889},{"style":394},[890],{"type":44,"value":891}," dispatcherConnection",{"type":29,"tag":63,"props":893,"children":894},{"style":70},[895],{"type":44,"value":155},{"type":29,"tag":63,"props":897,"children":898},{"style":70},[899],{"type":44,"value":832},{"type":29,"tag":63,"props":901,"children":902},{"style":117},[903],{"type":44,"value":904}," DispatcherConnection",{"type":29,"tag":63,"props":906,"children":907},{"style":76},[908],{"type":44,"value":238},{"type":29,"tag":63,"props":910,"children":911},{"style":394},[912],{"type":44,"value":913},"true",{"type":29,"tag":63,"props":915,"children":917},{"style":916},"--shiki-default:#6A737D",[918],{"type":44,"value":919}," /* local */",{"type":29,"tag":63,"props":921,"children":922},{"style":76},[923],{"type":44,"value":429},{"type":29,"tag":63,"props":925,"children":927},{"class":65,"line":926},10,[928],{"type":29,"tag":63,"props":929,"children":930},{"emptyLinePlaceholder":97},[931],{"type":44,"value":100},{"type":29,"tag":63,"props":933,"children":935},{"class":65,"line":934},11,[936],{"type":29,"tag":63,"props":937,"children":938},{"style":916},[939],{"type":44,"value":940},"  // Dispatch synchronously at first.\n",{"type":29,"tag":63,"props":942,"children":944},{"class":65,"line":943},12,[945,950,955,959,964,969,973],{"type":29,"tag":63,"props":946,"children":947},{"style":76},[948],{"type":44,"value":949},"  dispatcherConnection.",{"type":29,"tag":63,"props":951,"children":952},{"style":117},[953],{"type":44,"value":954},"onmessage",{"type":29,"tag":63,"props":956,"children":957},{"style":70},[958],{"type":44,"value":155},{"type":29,"tag":63,"props":960,"children":961},{"style":76},[962],{"type":44,"value":963}," (",{"type":29,"tag":63,"props":965,"children":966},{"style":147},[967],{"type":44,"value":968},"message",{"type":29,"tag":63,"props":970,"children":971},{"style":76},[972],{"type":44,"value":781},{"type":29,"tag":63,"props":974,"children":975},{"style":70},[976],{"type":44,"value":977},"=>\n",{"type":29,"tag":63,"props":979,"children":980},{"class":65,"line":23},[981,986,991],{"type":29,"tag":63,"props":982,"children":983},{"style":76},[984],{"type":44,"value":985},"    clientConnection.",{"type":29,"tag":63,"props":987,"children":988},{"style":117},[989],{"type":44,"value":990},"dispatch",{"type":29,"tag":63,"props":992,"children":993},{"style":76},[994],{"type":44,"value":995},"(message);\n",{"type":29,"tag":63,"props":997,"children":999},{"class":65,"line":998},14,[1000,1004,1008,1012,1016,1020,1024],{"type":29,"tag":63,"props":1001,"children":1002},{"style":76},[1003],{"type":44,"value":868},{"type":29,"tag":63,"props":1005,"children":1006},{"style":117},[1007],{"type":44,"value":954},{"type":29,"tag":63,"props":1009,"children":1010},{"style":70},[1011],{"type":44,"value":155},{"type":29,"tag":63,"props":1013,"children":1014},{"style":76},[1015],{"type":44,"value":963},{"type":29,"tag":63,"props":1017,"children":1018},{"style":147},[1019],{"type":44,"value":968},{"type":29,"tag":63,"props":1021,"children":1022},{"style":76},[1023],{"type":44,"value":781},{"type":29,"tag":63,"props":1025,"children":1026},{"style":70},[1027],{"type":44,"value":977},{"type":29,"tag":63,"props":1029,"children":1031},{"class":65,"line":1030},15,[1032,1037,1041],{"type":29,"tag":63,"props":1033,"children":1034},{"style":76},[1035],{"type":44,"value":1036},"    dispatcherConnection.",{"type":29,"tag":63,"props":1038,"children":1039},{"style":117},[1040],{"type":44,"value":990},{"type":29,"tag":63,"props":1042,"children":1043},{"style":76},[1044],{"type":44,"value":995},{"type":29,"tag":63,"props":1046,"children":1048},{"class":65,"line":1047},16,[1049],{"type":29,"tag":63,"props":1050,"children":1051},{"emptyLinePlaceholder":97},[1052],{"type":44,"value":100},{"type":29,"tag":63,"props":1054,"children":1056},{"class":65,"line":1055},17,[1057,1061,1066,1070,1074,1079],{"type":29,"tag":63,"props":1058,"children":1059},{"style":70},[1060],{"type":44,"value":144},{"type":29,"tag":63,"props":1062,"children":1063},{"style":394},[1064],{"type":44,"value":1065}," rootScope",{"type":29,"tag":63,"props":1067,"children":1068},{"style":70},[1069],{"type":44,"value":155},{"type":29,"tag":63,"props":1071,"children":1072},{"style":70},[1073],{"type":44,"value":832},{"type":29,"tag":63,"props":1075,"children":1076},{"style":117},[1077],{"type":44,"value":1078}," RootDispatcher",{"type":29,"tag":63,"props":1080,"children":1081},{"style":76},[1082],{"type":44,"value":1083},"(dispatcherConnection);\n",{"type":29,"tag":63,"props":1085,"children":1087},{"class":65,"line":1086},18,[1088],{"type":29,"tag":63,"props":1089,"children":1090},{"emptyLinePlaceholder":97},[1091],{"type":44,"value":100},{"type":29,"tag":63,"props":1093,"children":1095},{"class":65,"line":1094},19,[1096],{"type":29,"tag":63,"props":1097,"children":1098},{"style":916},[1099],{"type":44,"value":1100},"  // Initialize Playwright channel.\n",{"type":29,"tag":63,"props":1102,"children":1104},{"class":65,"line":1103},20,[1105,1110,1115],{"type":29,"tag":63,"props":1106,"children":1107},{"style":70},[1108],{"type":44,"value":1109},"  new",{"type":29,"tag":63,"props":1111,"children":1112},{"style":117},[1113],{"type":44,"value":1114}," PlaywrightDispatcher",{"type":29,"tag":63,"props":1116,"children":1117},{"style":76},[1118],{"type":44,"value":1119},"(rootScope, playwright);\n",{"type":29,"tag":63,"props":1121,"children":1123},{"class":65,"line":1122},21,[1124,1128,1133,1137,1142,1147],{"type":29,"tag":63,"props":1125,"children":1126},{"style":70},[1127],{"type":44,"value":144},{"type":29,"tag":63,"props":1129,"children":1130},{"style":394},[1131],{"type":44,"value":1132}," playwrightAPI",{"type":29,"tag":63,"props":1134,"children":1135},{"style":70},[1136],{"type":44,"value":155},{"type":29,"tag":63,"props":1138,"children":1139},{"style":76},[1140],{"type":44,"value":1141}," clientConnection.",{"type":29,"tag":63,"props":1143,"children":1144},{"style":117},[1145],{"type":44,"value":1146},"getObjectWithKnownName",{"type":29,"tag":63,"props":1148,"children":1149},{"style":76},[1150],{"type":44,"value":1151},"(\n",{"type":29,"tag":63,"props":1153,"children":1155},{"class":65,"line":1154},22,[1156],{"type":29,"tag":63,"props":1157,"children":1158},{"style":87},[1159],{"type":44,"value":1160},"    \"Playwright\"\n",{"type":29,"tag":63,"props":1162,"children":1164},{"class":65,"line":1163},23,[1165,1170,1175,1179],{"type":29,"tag":63,"props":1166,"children":1167},{"style":76},[1168],{"type":44,"value":1169},"  ) ",{"type":29,"tag":63,"props":1171,"children":1172},{"style":70},[1173],{"type":44,"value":1174},"as",{"type":29,"tag":63,"props":1176,"children":1177},{"style":117},[1178],{"type":44,"value":705},{"type":29,"tag":63,"props":1180,"children":1181},{"style":76},[1182],{"type":44,"value":1183},";\n",{"type":29,"tag":63,"props":1185,"children":1187},{"class":65,"line":1186},24,[1188,1193,1198,1202,1207],{"type":29,"tag":63,"props":1189,"children":1190},{"style":76},[1191],{"type":44,"value":1192},"  playwrightAPI.chromium._serverLauncher ",{"type":29,"tag":63,"props":1194,"children":1195},{"style":70},[1196],{"type":44,"value":1197},"=",{"type":29,"tag":63,"props":1199,"children":1200},{"style":70},[1201],{"type":44,"value":832},{"type":29,"tag":63,"props":1203,"children":1204},{"style":117},[1205],{"type":44,"value":1206}," BrowserServerLauncherImpl",{"type":29,"tag":63,"props":1208,"children":1209},{"style":76},[1210],{"type":44,"value":1151},{"type":29,"tag":63,"props":1212,"children":1214},{"class":65,"line":1213},25,[1215],{"type":29,"tag":63,"props":1216,"children":1217},{"style":87},[1218],{"type":44,"value":1219},"    \"chromium\"\n",{"type":29,"tag":63,"props":1221,"children":1223},{"class":65,"line":1222},26,[1224],{"type":29,"tag":63,"props":1225,"children":1226},{"style":76},[1227],{"type":44,"value":1228},"  );\n",{"type":29,"tag":63,"props":1230,"children":1232},{"class":65,"line":1231},27,[1233,1238,1242,1246,1250],{"type":29,"tag":63,"props":1234,"children":1235},{"style":76},[1236],{"type":44,"value":1237},"  playwrightAPI.firefox._serverLauncher ",{"type":29,"tag":63,"props":1239,"children":1240},{"style":70},[1241],{"type":44,"value":1197},{"type":29,"tag":63,"props":1243,"children":1244},{"style":70},[1245],{"type":44,"value":832},{"type":29,"tag":63,"props":1247,"children":1248},{"style":117},[1249],{"type":44,"value":1206},{"type":29,"tag":63,"props":1251,"children":1252},{"style":76},[1253],{"type":44,"value":1151},{"type":29,"tag":63,"props":1255,"children":1257},{"class":65,"line":1256},28,[1258],{"type":29,"tag":63,"props":1259,"children":1260},{"style":87},[1261],{"type":44,"value":1262},"    \"firefox\"\n",{"type":29,"tag":63,"props":1264,"children":1266},{"class":65,"line":1265},29,[1267],{"type":29,"tag":63,"props":1268,"children":1269},{"style":76},[1270],{"type":44,"value":1228},{"type":29,"tag":63,"props":1272,"children":1274},{"class":65,"line":1273},30,[1275,1280,1284,1288,1292],{"type":29,"tag":63,"props":1276,"children":1277},{"style":76},[1278],{"type":44,"value":1279},"  playwrightAPI.webkit._serverLauncher ",{"type":29,"tag":63,"props":1281,"children":1282},{"style":70},[1283],{"type":44,"value":1197},{"type":29,"tag":63,"props":1285,"children":1286},{"style":70},[1287],{"type":44,"value":832},{"type":29,"tag":63,"props":1289,"children":1290},{"style":117},[1291],{"type":44,"value":1206},{"type":29,"tag":63,"props":1293,"children":1294},{"style":76},[1295],{"type":44,"value":1151},{"type":29,"tag":63,"props":1297,"children":1299},{"class":65,"line":1298},31,[1300],{"type":29,"tag":63,"props":1301,"children":1302},{"style":87},[1303],{"type":44,"value":1304},"    \"webkit\"\n",{"type":29,"tag":63,"props":1306,"children":1308},{"class":65,"line":1307},32,[1309],{"type":29,"tag":63,"props":1310,"children":1311},{"style":76},[1312],{"type":44,"value":1228},{"type":29,"tag":63,"props":1314,"children":1316},{"class":65,"line":1315},33,[1317,1322,1326,1330,1335],{"type":29,"tag":63,"props":1318,"children":1319},{"style":76},[1320],{"type":44,"value":1321},"  playwrightAPI._android._serverLauncher ",{"type":29,"tag":63,"props":1323,"children":1324},{"style":70},[1325],{"type":44,"value":1197},{"type":29,"tag":63,"props":1327,"children":1328},{"style":70},[1329],{"type":44,"value":832},{"type":29,"tag":63,"props":1331,"children":1332},{"style":117},[1333],{"type":44,"value":1334}," AndroidServerLauncherImpl",{"type":29,"tag":63,"props":1336,"children":1337},{"style":76},[1338],{"type":44,"value":878},{"type":29,"tag":63,"props":1340,"children":1342},{"class":65,"line":1341},34,[1343],{"type":29,"tag":63,"props":1344,"children":1345},{"emptyLinePlaceholder":97},[1346],{"type":44,"value":100},{"type":29,"tag":63,"props":1348,"children":1350},{"class":65,"line":1349},35,[1351],{"type":29,"tag":63,"props":1352,"children":1353},{"style":916},[1354],{"type":44,"value":1355},"  // Switch to async dispatch after we got Playwright object.\n",{"type":29,"tag":63,"props":1357,"children":1359},{"class":65,"line":1358},36,[1360,1364,1368,1372,1376,1380,1384],{"type":29,"tag":63,"props":1361,"children":1362},{"style":76},[1363],{"type":44,"value":949},{"type":29,"tag":63,"props":1365,"children":1366},{"style":117},[1367],{"type":44,"value":954},{"type":29,"tag":63,"props":1369,"children":1370},{"style":70},[1371],{"type":44,"value":155},{"type":29,"tag":63,"props":1373,"children":1374},{"style":76},[1375],{"type":44,"value":963},{"type":29,"tag":63,"props":1377,"children":1378},{"style":147},[1379],{"type":44,"value":968},{"type":29,"tag":63,"props":1381,"children":1382},{"style":76},[1383],{"type":44,"value":781},{"type":29,"tag":63,"props":1385,"children":1386},{"style":70},[1387],{"type":44,"value":977},{"type":29,"tag":63,"props":1389,"children":1391},{"class":65,"line":1390},37,[1392,1397,1402,1406,1410,1414],{"type":29,"tag":63,"props":1393,"children":1394},{"style":117},[1395],{"type":44,"value":1396},"    setImmediate",{"type":29,"tag":63,"props":1398,"children":1399},{"style":76},[1400],{"type":44,"value":1401},"(() ",{"type":29,"tag":63,"props":1403,"children":1404},{"style":70},[1405],{"type":44,"value":130},{"type":29,"tag":63,"props":1407,"children":1408},{"style":76},[1409],{"type":44,"value":1141},{"type":29,"tag":63,"props":1411,"children":1412},{"style":117},[1413],{"type":44,"value":990},{"type":29,"tag":63,"props":1415,"children":1416},{"style":76},[1417],{"type":44,"value":1418},"(message));\n",{"type":29,"tag":63,"props":1420,"children":1422},{"class":65,"line":1421},38,[1423,1427,1431,1435,1439,1443,1447],{"type":29,"tag":63,"props":1424,"children":1425},{"style":76},[1426],{"type":44,"value":868},{"type":29,"tag":63,"props":1428,"children":1429},{"style":117},[1430],{"type":44,"value":954},{"type":29,"tag":63,"props":1432,"children":1433},{"style":70},[1434],{"type":44,"value":155},{"type":29,"tag":63,"props":1436,"children":1437},{"style":76},[1438],{"type":44,"value":963},{"type":29,"tag":63,"props":1440,"children":1441},{"style":147},[1442],{"type":44,"value":968},{"type":29,"tag":63,"props":1444,"children":1445},{"style":76},[1446],{"type":44,"value":781},{"type":29,"tag":63,"props":1448,"children":1449},{"style":70},[1450],{"type":44,"value":977},{"type":29,"tag":63,"props":1452,"children":1454},{"class":65,"line":1453},39,[1455,1459,1463,1467,1472,1476],{"type":29,"tag":63,"props":1456,"children":1457},{"style":117},[1458],{"type":44,"value":1396},{"type":29,"tag":63,"props":1460,"children":1461},{"style":76},[1462],{"type":44,"value":1401},{"type":29,"tag":63,"props":1464,"children":1465},{"style":70},[1466],{"type":44,"value":130},{"type":29,"tag":63,"props":1468,"children":1469},{"style":76},[1470],{"type":44,"value":1471}," dispatcherConnection.",{"type":29,"tag":63,"props":1473,"children":1474},{"style":117},[1475],{"type":44,"value":990},{"type":29,"tag":63,"props":1477,"children":1478},{"style":76},[1479],{"type":44,"value":1418},{"type":29,"tag":63,"props":1481,"children":1483},{"class":65,"line":1482},40,[1484],{"type":29,"tag":63,"props":1485,"children":1486},{"emptyLinePlaceholder":97},[1487],{"type":44,"value":100},{"type":29,"tag":63,"props":1489,"children":1491},{"class":65,"line":1490},41,[1492,1496,1501,1505,1509,1514,1518,1523,1527],{"type":29,"tag":63,"props":1493,"children":1494},{"style":76},[1495],{"type":44,"value":868},{"type":29,"tag":63,"props":1497,"children":1498},{"style":117},[1499],{"type":44,"value":1500},"toImpl",{"type":29,"tag":63,"props":1502,"children":1503},{"style":70},[1504],{"type":44,"value":155},{"type":29,"tag":63,"props":1506,"children":1507},{"style":76},[1508],{"type":44,"value":963},{"type":29,"tag":63,"props":1510,"children":1511},{"style":147},[1512],{"type":44,"value":1513},"x",{"type":29,"tag":63,"props":1515,"children":1516},{"style":70},[1517],{"type":44,"value":700},{"type":29,"tag":63,"props":1519,"children":1520},{"style":394},[1521],{"type":44,"value":1522}," any",{"type":29,"tag":63,"props":1524,"children":1525},{"style":76},[1526],{"type":44,"value":781},{"type":29,"tag":63,"props":1528,"children":1529},{"style":70},[1530],{"type":44,"value":977},{"type":29,"tag":63,"props":1532,"children":1534},{"class":65,"line":1533},42,[1535],{"type":29,"tag":63,"props":1536,"children":1537},{"style":76},[1538],{"type":44,"value":1539},"    x\n",{"type":29,"tag":63,"props":1541,"children":1543},{"class":65,"line":1542},43,[1544,1549,1554,1559,1564,1569],{"type":29,"tag":63,"props":1545,"children":1546},{"style":70},[1547],{"type":44,"value":1548},"      ?",{"type":29,"tag":63,"props":1550,"children":1551},{"style":76},[1552],{"type":44,"value":1553}," dispatcherConnection._dispatchers.",{"type":29,"tag":63,"props":1555,"children":1556},{"style":117},[1557],{"type":44,"value":1558},"get",{"type":29,"tag":63,"props":1560,"children":1561},{"style":76},[1562],{"type":44,"value":1563},"(x._guid)",{"type":29,"tag":63,"props":1565,"children":1566},{"style":70},[1567],{"type":44,"value":1568},"!",{"type":29,"tag":63,"props":1570,"children":1571},{"style":76},[1572],{"type":44,"value":1573},"._object\n",{"type":29,"tag":63,"props":1575,"children":1577},{"class":65,"line":1576},44,[1578,1583,1587,1591,1595,1600],{"type":29,"tag":63,"props":1579,"children":1580},{"style":70},[1581],{"type":44,"value":1582},"      :",{"type":29,"tag":63,"props":1584,"children":1585},{"style":76},[1586],{"type":44,"value":1553},{"type":29,"tag":63,"props":1588,"children":1589},{"style":117},[1590],{"type":44,"value":1558},{"type":29,"tag":63,"props":1592,"children":1593},{"style":76},[1594],{"type":44,"value":238},{"type":29,"tag":63,"props":1596,"children":1597},{"style":87},[1598],{"type":44,"value":1599},"\"\"",{"type":29,"tag":63,"props":1601,"children":1602},{"style":76},[1603],{"type":44,"value":429},{"type":29,"tag":63,"props":1605,"children":1607},{"class":65,"line":1606},45,[1608,1613,1617,1621,1626,1630],{"type":29,"tag":63,"props":1609,"children":1610},{"style":76},[1611],{"type":44,"value":1612},"  (playwrightAPI ",{"type":29,"tag":63,"props":1614,"children":1615},{"style":70},[1616],{"type":44,"value":1174},{"type":29,"tag":63,"props":1618,"children":1619},{"style":394},[1620],{"type":44,"value":1522},{"type":29,"tag":63,"props":1622,"children":1623},{"style":76},[1624],{"type":44,"value":1625},")._toImpl ",{"type":29,"tag":63,"props":1627,"children":1628},{"style":70},[1629],{"type":44,"value":1197},{"type":29,"tag":63,"props":1631,"children":1632},{"style":76},[1633],{"type":44,"value":1634}," clientConnection.toImpl;\n",{"type":29,"tag":63,"props":1636,"children":1638},{"class":65,"line":1637},46,[1639,1644],{"type":29,"tag":63,"props":1640,"children":1641},{"style":70},[1642],{"type":44,"value":1643},"  return",{"type":29,"tag":63,"props":1645,"children":1646},{"style":76},[1647],{"type":44,"value":1648}," playwrightAPI;\n",{"type":29,"tag":63,"props":1650,"children":1652},{"class":65,"line":1651},47,[1653],{"type":29,"tag":63,"props":1654,"children":1655},{"style":76},[1656],{"type":44,"value":257},{"type":29,"tag":30,"props":1658,"children":1659},{},[1660,1662,1668,1670,1676,1678,1684,1686],{"type":44,"value":1661},"If you scan through the script and look at the return value, you'll see Playwright is returning the ",{"type":29,"tag":59,"props":1663,"children":1665},{"className":1664},[],[1666],{"type":44,"value":1667},"PlaywrightAPI",{"type":44,"value":1669}," instance ",{"type":29,"tag":59,"props":1671,"children":1673},{"className":1672},[],[1674],{"type":44,"value":1675},"playwrightAPI",{"type":44,"value":1677},", which is defined somewhere within the client library ",{"type":29,"tag":59,"props":1679,"children":1681},{"className":1680},[],[1682],{"type":44,"value":1683},"playwright-core/src/client/",{"type":44,"value":1685}," (which we find from our type hints). So when we write a script using ",{"type":29,"tag":59,"props":1687,"children":1689},{"className":1688},[],[1690],{"type":44,"value":287},{"type":29,"tag":52,"props":1692,"children":1695},{"className":54,"code":1693,"filename":1694,"language":56,"meta":7,"style":7},"import { chromium } from \"playwright-core\";\n","my-automation-script.ts",[1696],{"type":29,"tag":59,"props":1697,"children":1698},{"__ignoreMap":7},[1699],{"type":29,"tag":63,"props":1700,"children":1701},{"class":65,"line":66},[1702,1706,1710,1714,1719],{"type":29,"tag":63,"props":1703,"children":1704},{"style":70},[1705],{"type":44,"value":73},{"type":29,"tag":63,"props":1707,"children":1708},{"style":76},[1709],{"type":44,"value":79},{"type":29,"tag":63,"props":1711,"children":1712},{"style":70},[1713],{"type":44,"value":84},{"type":29,"tag":63,"props":1715,"children":1716},{"style":87},[1717],{"type":44,"value":1718}," \"playwright-core\"",{"type":29,"tag":63,"props":1720,"children":1721},{"style":76},[1722],{"type":44,"value":1183},{"type":29,"tag":30,"props":1724,"children":1725},{},[1726,1728,1733,1735,1741],{"type":44,"value":1727},"really we are making an import of the ",{"type":29,"tag":59,"props":1729,"children":1731},{"className":1730},[],[1732],{"type":44,"value":1675},{"type":44,"value":1734}," object and accessing its ",{"type":29,"tag":59,"props":1736,"children":1738},{"className":1737},[],[1739],{"type":44,"value":1740},"chromium",{"type":44,"value":1742}," property, so our script is secretly",{"type":29,"tag":52,"props":1744,"children":1746},{"className":54,"code":1745,"filename":1694,"language":56,"meta":7,"style":7},"import playwrightAPI from \"playwright-core\";\nconst { chromium } = playwrightAPI;\n",[1747],{"type":29,"tag":59,"props":1748,"children":1749},{"__ignoreMap":7},[1750,1774],{"type":29,"tag":63,"props":1751,"children":1752},{"class":65,"line":66},[1753,1757,1762,1766,1770],{"type":29,"tag":63,"props":1754,"children":1755},{"style":70},[1756],{"type":44,"value":73},{"type":29,"tag":63,"props":1758,"children":1759},{"style":76},[1760],{"type":44,"value":1761}," playwrightAPI ",{"type":29,"tag":63,"props":1763,"children":1764},{"style":70},[1765],{"type":44,"value":84},{"type":29,"tag":63,"props":1767,"children":1768},{"style":87},[1769],{"type":44,"value":1718},{"type":29,"tag":63,"props":1771,"children":1772},{"style":76},[1773],{"type":44,"value":1183},{"type":29,"tag":63,"props":1775,"children":1776},{"class":65,"line":93},[1777,1782,1787,1791,1796,1800],{"type":29,"tag":63,"props":1778,"children":1779},{"style":70},[1780],{"type":44,"value":1781},"const",{"type":29,"tag":63,"props":1783,"children":1784},{"style":76},[1785],{"type":44,"value":1786}," { ",{"type":29,"tag":63,"props":1788,"children":1789},{"style":394},[1790],{"type":44,"value":1740},{"type":29,"tag":63,"props":1792,"children":1793},{"style":76},[1794],{"type":44,"value":1795}," } ",{"type":29,"tag":63,"props":1797,"children":1798},{"style":70},[1799],{"type":44,"value":1197},{"type":29,"tag":63,"props":1801,"children":1802},{"style":76},[1803],{"type":44,"value":1648},{"type":29,"tag":30,"props":1805,"children":1806},{},[1807],{"type":44,"value":1808},"Tracing where this object is instantiated, we find the call",{"type":29,"tag":52,"props":1810,"children":1812},{"className":54,"code":1811,"filename":669,"language":56,"meta":7,"style":7},"const playwrightAPI = clientConnection.getObjectWithKnownName(\n  \"Playwright\"\n) as PlaywrightAPI;\n",[1813],{"type":29,"tag":59,"props":1814,"children":1815},{"__ignoreMap":7},[1816,1843,1851],{"type":29,"tag":63,"props":1817,"children":1818},{"class":65,"line":66},[1819,1823,1827,1831,1835,1839],{"type":29,"tag":63,"props":1820,"children":1821},{"style":70},[1822],{"type":44,"value":1781},{"type":29,"tag":63,"props":1824,"children":1825},{"style":394},[1826],{"type":44,"value":1132},{"type":29,"tag":63,"props":1828,"children":1829},{"style":70},[1830],{"type":44,"value":155},{"type":29,"tag":63,"props":1832,"children":1833},{"style":76},[1834],{"type":44,"value":1141},{"type":29,"tag":63,"props":1836,"children":1837},{"style":117},[1838],{"type":44,"value":1146},{"type":29,"tag":63,"props":1840,"children":1841},{"style":76},[1842],{"type":44,"value":1151},{"type":29,"tag":63,"props":1844,"children":1845},{"class":65,"line":93},[1846],{"type":29,"tag":63,"props":1847,"children":1848},{"style":87},[1849],{"type":44,"value":1850},"  \"Playwright\"\n",{"type":29,"tag":63,"props":1852,"children":1853},{"class":65,"line":103},[1854,1858,1862,1866],{"type":29,"tag":63,"props":1855,"children":1856},{"style":76},[1857],{"type":44,"value":781},{"type":29,"tag":63,"props":1859,"children":1860},{"style":70},[1861],{"type":44,"value":1174},{"type":29,"tag":63,"props":1863,"children":1864},{"style":117},[1865],{"type":44,"value":705},{"type":29,"tag":63,"props":1867,"children":1868},{"style":76},[1869],{"type":44,"value":1183},{"type":29,"tag":30,"props":1871,"children":1872},{},[1873,1875,1881],{"type":44,"value":1874},"which is not very descriptive. If you try looking in the ",{"type":29,"tag":59,"props":1876,"children":1878},{"className":1877},[],[1879],{"type":44,"value":1880},"Connection",{"type":44,"value":1882}," class definition, you won't get very far either, you'll just see",{"type":29,"tag":52,"props":1884,"children":1887},{"className":54,"code":1885,"filename":1886,"language":56,"meta":7,"style":7},"export class Connection extends EventEmitter {\n  readonly _objects = new Map\u003Cstring, ChannelOwner>();\n  // ...\n  getObjectWithKnownName(guid: string): any {\n    return this._objects.get(guid)!;\n  }\n}\n","packages/playwright-core/src/client/connection.ts",[1888],{"type":29,"tag":59,"props":1889,"children":1890},{"__ignoreMap":7},[1891,1921,1970,1978,2021,2056,2064],{"type":29,"tag":63,"props":1892,"children":1893},{"class":65,"line":66},[1894,1898,1903,1907,1912,1917],{"type":29,"tag":63,"props":1895,"children":1896},{"style":70},[1897],{"type":44,"value":681},{"type":29,"tag":63,"props":1899,"children":1900},{"style":70},[1901],{"type":44,"value":1902}," class",{"type":29,"tag":63,"props":1904,"children":1905},{"style":117},[1906],{"type":44,"value":837},{"type":29,"tag":63,"props":1908,"children":1909},{"style":70},[1910],{"type":44,"value":1911}," extends",{"type":29,"tag":63,"props":1913,"children":1914},{"style":117},[1915],{"type":44,"value":1916}," EventEmitter",{"type":29,"tag":63,"props":1918,"children":1919},{"style":76},[1920],{"type":44,"value":135},{"type":29,"tag":63,"props":1922,"children":1923},{"class":65,"line":93},[1924,1929,1934,1938,1942,1947,1952,1957,1961,1965],{"type":29,"tag":63,"props":1925,"children":1926},{"style":70},[1927],{"type":44,"value":1928},"  readonly",{"type":29,"tag":63,"props":1930,"children":1931},{"style":147},[1932],{"type":44,"value":1933}," _objects",{"type":29,"tag":63,"props":1935,"children":1936},{"style":70},[1937],{"type":44,"value":155},{"type":29,"tag":63,"props":1939,"children":1940},{"style":70},[1941],{"type":44,"value":832},{"type":29,"tag":63,"props":1943,"children":1944},{"style":117},[1945],{"type":44,"value":1946}," Map",{"type":29,"tag":63,"props":1948,"children":1949},{"style":76},[1950],{"type":44,"value":1951},"\u003C",{"type":29,"tag":63,"props":1953,"children":1954},{"style":394},[1955],{"type":44,"value":1956},"string",{"type":29,"tag":63,"props":1958,"children":1959},{"style":76},[1960],{"type":44,"value":851},{"type":29,"tag":63,"props":1962,"children":1963},{"style":117},[1964],{"type":44,"value":588},{"type":29,"tag":63,"props":1966,"children":1967},{"style":76},[1968],{"type":44,"value":1969},">();\n",{"type":29,"tag":63,"props":1971,"children":1972},{"class":65,"line":103},[1973],{"type":29,"tag":63,"props":1974,"children":1975},{"style":916},[1976],{"type":44,"value":1977},"  // ...\n",{"type":29,"tag":63,"props":1979,"children":1980},{"class":65,"line":138},[1981,1986,1990,1995,1999,2004,2009,2013,2017],{"type":29,"tag":63,"props":1982,"children":1983},{"style":117},[1984],{"type":44,"value":1985},"  getObjectWithKnownName",{"type":29,"tag":63,"props":1987,"children":1988},{"style":76},[1989],{"type":44,"value":238},{"type":29,"tag":63,"props":1991,"children":1992},{"style":147},[1993],{"type":44,"value":1994},"guid",{"type":29,"tag":63,"props":1996,"children":1997},{"style":70},[1998],{"type":44,"value":700},{"type":29,"tag":63,"props":2000,"children":2001},{"style":394},[2002],{"type":44,"value":2003}," string",{"type":29,"tag":63,"props":2005,"children":2006},{"style":76},[2007],{"type":44,"value":2008},")",{"type":29,"tag":63,"props":2010,"children":2011},{"style":70},[2012],{"type":44,"value":700},{"type":29,"tag":63,"props":2014,"children":2015},{"style":394},[2016],{"type":44,"value":1522},{"type":29,"tag":63,"props":2018,"children":2019},{"style":76},[2020],{"type":44,"value":135},{"type":29,"tag":63,"props":2022,"children":2023},{"class":65,"line":178},[2024,2029,2034,2039,2043,2048,2052],{"type":29,"tag":63,"props":2025,"children":2026},{"style":70},[2027],{"type":44,"value":2028},"    return",{"type":29,"tag":63,"props":2030,"children":2031},{"style":394},[2032],{"type":44,"value":2033}," this",{"type":29,"tag":63,"props":2035,"children":2036},{"style":76},[2037],{"type":44,"value":2038},"._objects.",{"type":29,"tag":63,"props":2040,"children":2041},{"style":117},[2042],{"type":44,"value":1558},{"type":29,"tag":63,"props":2044,"children":2045},{"style":76},[2046],{"type":44,"value":2047},"(guid)",{"type":29,"tag":63,"props":2049,"children":2050},{"style":70},[2051],{"type":44,"value":1568},{"type":29,"tag":63,"props":2053,"children":2054},{"style":76},[2055],{"type":44,"value":1183},{"type":29,"tag":63,"props":2057,"children":2058},{"class":65,"line":213},[2059],{"type":29,"tag":63,"props":2060,"children":2061},{"style":76},[2062],{"type":44,"value":2063},"  }\n",{"type":29,"tag":63,"props":2065,"children":2066},{"class":65,"line":251},[2067],{"type":29,"tag":63,"props":2068,"children":2069},{"style":76},[2070],{"type":44,"value":257},{"type":29,"tag":30,"props":2072,"children":2073},{},[2074,2076,2081,2083,2089,2091,2096,2098,2104],{"type":44,"value":2075},"which is even more opaque. From this all we know is the ",{"type":29,"tag":59,"props":2077,"children":2079},{"className":2078},[],[2080],{"type":44,"value":1880},{"type":44,"value":2082}," class keeps an ",{"type":29,"tag":59,"props":2084,"children":2086},{"className":2085},[],[2087],{"type":44,"value":2088},"_objects",{"type":44,"value":2090}," map which at some point contains an instance of ",{"type":29,"tag":59,"props":2092,"children":2094},{"className":2093},[],[2095],{"type":44,"value":1667},{"type":44,"value":2097},", so tracing the calls directly is not the most helpful choice for understanding Playwright's initialization. Instead, going through the logic within ",{"type":29,"tag":59,"props":2099,"children":2101},{"className":2100},[],[2102],{"type":44,"value":2103},"inProcessFactory",{"type":44,"value":2105}," will give us a clear picture of how this library is wrapped together.",{"type":29,"tag":39,"props":2107,"children":2109},{"id":2108},"cross-communication-between-client-and-server",[2110],{"type":44,"value":2111},"Cross communication between client and server",{"type":29,"tag":30,"props":2113,"children":2114},{},[2115,2117,2122,2124,2130,2132,2137,2139,2144,2145,2150,2152,2157,2159,2165,2167,2172,2174,2180,2181,2187],{"type":44,"value":2116},"If you look through the script's imports anything with ",{"type":29,"tag":59,"props":2118,"children":2120},{"className":2119},[],[2121],{"type":44,"value":626},{"type":44,"value":2123}," in its name, and ",{"type":29,"tag":59,"props":2125,"children":2127},{"className":2126},[],[2128],{"type":44,"value":2129},"createPlaywright",{"type":44,"value":2131},", comes from the ",{"type":29,"tag":59,"props":2133,"children":2135},{"className":2134},[],[2136],{"type":44,"value":511},{"type":44,"value":2138}," directory. Similarly, the imports for ",{"type":29,"tag":59,"props":2140,"children":2142},{"className":2141},[],[2143],{"type":44,"value":1880},{"type":44,"value":281},{"type":29,"tag":59,"props":2146,"children":2148},{"className":2147},[],[2149],{"type":44,"value":1667},{"type":44,"value":2151}," come from the ",{"type":29,"tag":59,"props":2153,"children":2155},{"className":2154},[],[2156],{"type":44,"value":503},{"type":44,"value":2158}," directory. Looking through the first lines of ",{"type":29,"tag":59,"props":2160,"children":2162},{"className":2161},[],[2163],{"type":44,"value":2164},"inprocessFactory",{"type":44,"value":2166},", there is an instantiation of the server ",{"type":29,"tag":59,"props":2168,"children":2170},{"className":2169},[],[2171],{"type":44,"value":12},{"type":44,"value":2173}," class and instantiation of objects for the ",{"type":29,"tag":59,"props":2175,"children":2177},{"className":2176},[],[2178],{"type":44,"value":2179},"ClientConnection",{"type":44,"value":281},{"type":29,"tag":59,"props":2182,"children":2184},{"className":2183},[],[2185],{"type":44,"value":2186},"DispatcherConnection",{"type":44,"value":2188}," classes",{"type":29,"tag":52,"props":2190,"children":2192},{"className":54,"code":2191,"filename":669,"language":56,"meta":7,"style":7},"const playwright = createPlaywright({\n  sdkLanguage:\n    (process.env.PW_LANG_NAME as Language | undefined) || \"javascript\",\n});\n\nconst clientConnection = new Connection(undefined, undefined);\nclientConnection.useRawBuffers();\nconst dispatcherConnection = new DispatcherConnection(true /* local */);\n",[2193],{"type":29,"tag":59,"props":2194,"children":2195},{"__ignoreMap":7},[2196,2219,2227,2271,2279,2286,2329,2345],{"type":29,"tag":63,"props":2197,"children":2198},{"class":65,"line":66},[2199,2203,2207,2211,2215],{"type":29,"tag":63,"props":2200,"children":2201},{"style":70},[2202],{"type":44,"value":1781},{"type":29,"tag":63,"props":2204,"children":2205},{"style":394},[2206],{"type":44,"value":721},{"type":29,"tag":63,"props":2208,"children":2209},{"style":70},[2210],{"type":44,"value":155},{"type":29,"tag":63,"props":2212,"children":2213},{"style":117},[2214],{"type":44,"value":730},{"type":29,"tag":63,"props":2216,"children":2217},{"style":76},[2218],{"type":44,"value":735},{"type":29,"tag":63,"props":2220,"children":2221},{"class":65,"line":93},[2222],{"type":29,"tag":63,"props":2223,"children":2224},{"style":76},[2225],{"type":44,"value":2226},"  sdkLanguage:\n",{"type":29,"tag":63,"props":2228,"children":2229},{"class":65,"line":103},[2230,2235,2239,2243,2247,2251,2255,2259,2263,2267],{"type":29,"tag":63,"props":2231,"children":2232},{"style":76},[2233],{"type":44,"value":2234},"    (process.env.",{"type":29,"tag":63,"props":2236,"children":2237},{"style":394},[2238],{"type":44,"value":756},{"type":29,"tag":63,"props":2240,"children":2241},{"style":70},[2242],{"type":44,"value":761},{"type":29,"tag":63,"props":2244,"children":2245},{"style":117},[2246],{"type":44,"value":766},{"type":29,"tag":63,"props":2248,"children":2249},{"style":70},[2250],{"type":44,"value":771},{"type":29,"tag":63,"props":2252,"children":2253},{"style":394},[2254],{"type":44,"value":776},{"type":29,"tag":63,"props":2256,"children":2257},{"style":76},[2258],{"type":44,"value":781},{"type":29,"tag":63,"props":2260,"children":2261},{"style":70},[2262],{"type":44,"value":786},{"type":29,"tag":63,"props":2264,"children":2265},{"style":87},[2266],{"type":44,"value":791},{"type":29,"tag":63,"props":2268,"children":2269},{"style":76},[2270],{"type":44,"value":796},{"type":29,"tag":63,"props":2272,"children":2273},{"class":65,"line":138},[2274],{"type":29,"tag":63,"props":2275,"children":2276},{"style":76},[2277],{"type":44,"value":2278},"});\n",{"type":29,"tag":63,"props":2280,"children":2281},{"class":65,"line":178},[2282],{"type":29,"tag":63,"props":2283,"children":2284},{"emptyLinePlaceholder":97},[2285],{"type":44,"value":100},{"type":29,"tag":63,"props":2287,"children":2288},{"class":65,"line":213},[2289,2293,2297,2301,2305,2309,2313,2317,2321,2325],{"type":29,"tag":63,"props":2290,"children":2291},{"style":70},[2292],{"type":44,"value":1781},{"type":29,"tag":63,"props":2294,"children":2295},{"style":394},[2296],{"type":44,"value":823},{"type":29,"tag":63,"props":2298,"children":2299},{"style":70},[2300],{"type":44,"value":155},{"type":29,"tag":63,"props":2302,"children":2303},{"style":70},[2304],{"type":44,"value":832},{"type":29,"tag":63,"props":2306,"children":2307},{"style":117},[2308],{"type":44,"value":837},{"type":29,"tag":63,"props":2310,"children":2311},{"style":76},[2312],{"type":44,"value":238},{"type":29,"tag":63,"props":2314,"children":2315},{"style":394},[2316],{"type":44,"value":846},{"type":29,"tag":63,"props":2318,"children":2319},{"style":76},[2320],{"type":44,"value":851},{"type":29,"tag":63,"props":2322,"children":2323},{"style":394},[2324],{"type":44,"value":846},{"type":29,"tag":63,"props":2326,"children":2327},{"style":76},[2328],{"type":44,"value":429},{"type":29,"tag":63,"props":2330,"children":2331},{"class":65,"line":251},[2332,2337,2341],{"type":29,"tag":63,"props":2333,"children":2334},{"style":76},[2335],{"type":44,"value":2336},"clientConnection.",{"type":29,"tag":63,"props":2338,"children":2339},{"style":117},[2340],{"type":44,"value":873},{"type":29,"tag":63,"props":2342,"children":2343},{"style":76},[2344],{"type":44,"value":878},{"type":29,"tag":63,"props":2346,"children":2347},{"class":65,"line":862},[2348,2352,2356,2360,2364,2368,2372,2376,2380],{"type":29,"tag":63,"props":2349,"children":2350},{"style":70},[2351],{"type":44,"value":1781},{"type":29,"tag":63,"props":2353,"children":2354},{"style":394},[2355],{"type":44,"value":891},{"type":29,"tag":63,"props":2357,"children":2358},{"style":70},[2359],{"type":44,"value":155},{"type":29,"tag":63,"props":2361,"children":2362},{"style":70},[2363],{"type":44,"value":832},{"type":29,"tag":63,"props":2365,"children":2366},{"style":117},[2367],{"type":44,"value":904},{"type":29,"tag":63,"props":2369,"children":2370},{"style":76},[2371],{"type":44,"value":238},{"type":29,"tag":63,"props":2373,"children":2374},{"style":394},[2375],{"type":44,"value":913},{"type":29,"tag":63,"props":2377,"children":2378},{"style":916},[2379],{"type":44,"value":919},{"type":29,"tag":63,"props":2381,"children":2382},{"style":76},[2383],{"type":44,"value":429},{"type":29,"tag":30,"props":2385,"children":2386},{},[2387],{"type":44,"value":2388},"The next lines of code are the bridge between the internal client and server libraries",{"type":29,"tag":52,"props":2390,"children":2392},{"className":54,"code":2391,"filename":669,"language":56,"meta":7,"style":7},"dispatcherConnection.onmessage = (message) =>\n  clientConnection.dispatch(message);\nclientConnection.onmessage = (message) =>\n  dispatcherConnection.dispatch(message);\n",[2393],{"type":29,"tag":59,"props":2394,"children":2395},{"__ignoreMap":7},[2396,2428,2443,2474],{"type":29,"tag":63,"props":2397,"children":2398},{"class":65,"line":66},[2399,2404,2408,2412,2416,2420,2424],{"type":29,"tag":63,"props":2400,"children":2401},{"style":76},[2402],{"type":44,"value":2403},"dispatcherConnection.",{"type":29,"tag":63,"props":2405,"children":2406},{"style":117},[2407],{"type":44,"value":954},{"type":29,"tag":63,"props":2409,"children":2410},{"style":70},[2411],{"type":44,"value":155},{"type":29,"tag":63,"props":2413,"children":2414},{"style":76},[2415],{"type":44,"value":963},{"type":29,"tag":63,"props":2417,"children":2418},{"style":147},[2419],{"type":44,"value":968},{"type":29,"tag":63,"props":2421,"children":2422},{"style":76},[2423],{"type":44,"value":781},{"type":29,"tag":63,"props":2425,"children":2426},{"style":70},[2427],{"type":44,"value":977},{"type":29,"tag":63,"props":2429,"children":2430},{"class":65,"line":93},[2431,2435,2439],{"type":29,"tag":63,"props":2432,"children":2433},{"style":76},[2434],{"type":44,"value":868},{"type":29,"tag":63,"props":2436,"children":2437},{"style":117},[2438],{"type":44,"value":990},{"type":29,"tag":63,"props":2440,"children":2441},{"style":76},[2442],{"type":44,"value":995},{"type":29,"tag":63,"props":2444,"children":2445},{"class":65,"line":103},[2446,2450,2454,2458,2462,2466,2470],{"type":29,"tag":63,"props":2447,"children":2448},{"style":76},[2449],{"type":44,"value":2336},{"type":29,"tag":63,"props":2451,"children":2452},{"style":117},[2453],{"type":44,"value":954},{"type":29,"tag":63,"props":2455,"children":2456},{"style":70},[2457],{"type":44,"value":155},{"type":29,"tag":63,"props":2459,"children":2460},{"style":76},[2461],{"type":44,"value":963},{"type":29,"tag":63,"props":2463,"children":2464},{"style":147},[2465],{"type":44,"value":968},{"type":29,"tag":63,"props":2467,"children":2468},{"style":76},[2469],{"type":44,"value":781},{"type":29,"tag":63,"props":2471,"children":2472},{"style":70},[2473],{"type":44,"value":977},{"type":29,"tag":63,"props":2475,"children":2476},{"class":65,"line":138},[2477,2481,2485],{"type":29,"tag":63,"props":2478,"children":2479},{"style":76},[2480],{"type":44,"value":949},{"type":29,"tag":63,"props":2482,"children":2483},{"style":117},[2484],{"type":44,"value":990},{"type":29,"tag":63,"props":2486,"children":2487},{"style":76},[2488],{"type":44,"value":995},{"type":29,"tag":30,"props":2490,"children":2491},{},[2492,2494,2499,2501,2506,2508,2513,2515,2521,2523,2529,2531,2536,2538,2544],{"type":44,"value":2493},"given by setting the ",{"type":29,"tag":59,"props":2495,"children":2497},{"className":2496},[],[2498],{"type":44,"value":954},{"type":44,"value":2500}," properties for each of these objects. Notice each ",{"type":29,"tag":59,"props":2502,"children":2504},{"className":2503},[],[2505],{"type":44,"value":954},{"type":44,"value":2507}," calls the other's ",{"type":29,"tag":59,"props":2509,"children":2511},{"className":2510},[],[2512],{"type":44,"value":990},{"type":44,"value":2514}," method; i.e., ",{"type":29,"tag":59,"props":2516,"children":2518},{"className":2517},[],[2519],{"type":44,"value":2520},"dispatcherConnection",{"type":44,"value":2522}," calls the ",{"type":29,"tag":59,"props":2524,"children":2526},{"className":2525},[],[2527],{"type":44,"value":2528},"clientConnection.dispatch",{"type":44,"value":2530}," through ",{"type":29,"tag":59,"props":2532,"children":2534},{"className":2533},[],[2535],{"type":44,"value":954},{"type":44,"value":2537}," and vice versa. This gives us the hint somehow ",{"type":29,"tag":59,"props":2539,"children":2541},{"className":2540},[],[2542],{"type":44,"value":2543},"dispatcherConnection.onmessage",{"type":44,"value":2545}," will be called somewhere in the codebase.",{"type":29,"tag":269,"props":2547,"children":2549},{"id":2548},"rootdispatcher-and-server-side-playwright",[2550],{"type":44,"value":2551},"RootDispatcher and server-side Playwright",{"type":29,"tag":30,"props":2553,"children":2554},{},[2555,2557,2562,2564,2570,2572,2578],{"type":44,"value":2556},"Continuing down ",{"type":29,"tag":59,"props":2558,"children":2560},{"className":2559},[],[2561],{"type":44,"value":488},{"type":44,"value":2563},", we see there's the construction of a ",{"type":29,"tag":59,"props":2565,"children":2567},{"className":2566},[],[2568],{"type":44,"value":2569},"RootDispatcher",{"type":44,"value":2571}," instance, and a ",{"type":29,"tag":59,"props":2573,"children":2575},{"className":2574},[],[2576],{"type":44,"value":2577},"PlaywrightDispatcher",{"type":44,"value":2579}," instance.",{"type":29,"tag":52,"props":2581,"children":2583},{"className":54,"code":2582,"filename":669,"language":56,"meta":7,"style":7},"const rootScope = new RootDispatcher(dispatcherConnection);\n\n// Initialize Playwright channel.\nnew PlaywrightDispatcher(rootScope, playwright);\n",[2584],{"type":29,"tag":59,"props":2585,"children":2586},{"__ignoreMap":7},[2587,2614,2621,2629],{"type":29,"tag":63,"props":2588,"children":2589},{"class":65,"line":66},[2590,2594,2598,2602,2606,2610],{"type":29,"tag":63,"props":2591,"children":2592},{"style":70},[2593],{"type":44,"value":1781},{"type":29,"tag":63,"props":2595,"children":2596},{"style":394},[2597],{"type":44,"value":1065},{"type":29,"tag":63,"props":2599,"children":2600},{"style":70},[2601],{"type":44,"value":155},{"type":29,"tag":63,"props":2603,"children":2604},{"style":70},[2605],{"type":44,"value":832},{"type":29,"tag":63,"props":2607,"children":2608},{"style":117},[2609],{"type":44,"value":1078},{"type":29,"tag":63,"props":2611,"children":2612},{"style":76},[2613],{"type":44,"value":1083},{"type":29,"tag":63,"props":2615,"children":2616},{"class":65,"line":93},[2617],{"type":29,"tag":63,"props":2618,"children":2619},{"emptyLinePlaceholder":97},[2620],{"type":44,"value":100},{"type":29,"tag":63,"props":2622,"children":2623},{"class":65,"line":103},[2624],{"type":29,"tag":63,"props":2625,"children":2626},{"style":916},[2627],{"type":44,"value":2628},"// Initialize Playwright channel.\n",{"type":29,"tag":63,"props":2630,"children":2631},{"class":65,"line":138},[2632,2637,2641],{"type":29,"tag":63,"props":2633,"children":2634},{"style":70},[2635],{"type":44,"value":2636},"new",{"type":29,"tag":63,"props":2638,"children":2639},{"style":117},[2640],{"type":44,"value":1114},{"type":29,"tag":63,"props":2642,"children":2643},{"style":76},[2644],{"type":44,"value":1119},{"type":29,"tag":30,"props":2646,"children":2647},{},[2648,2650,2656,2658,2663,2665,2670,2672,2677,2679,2684],{"type":44,"value":2649},"Note the ",{"type":29,"tag":59,"props":2651,"children":2653},{"className":2652},[],[2654],{"type":44,"value":2655},"rootScope",{"type":44,"value":2657}," object is referenced throughout the dispatcher classes, and acts as a wrapper around the ",{"type":29,"tag":59,"props":2659,"children":2661},{"className":2660},[],[2662],{"type":44,"value":2520},{"type":44,"value":2664}," object instantiated above, so that each of the child ",{"type":29,"tag":59,"props":2666,"children":2668},{"className":2667},[],[2669],{"type":44,"value":626},{"type":44,"value":2671}," classes will have access to the ",{"type":29,"tag":59,"props":2673,"children":2675},{"className":2674},[],[2676],{"type":44,"value":2520},{"type":44,"value":2678}," through the ",{"type":29,"tag":59,"props":2680,"children":2682},{"className":2681},[],[2683],{"type":44,"value":2655},{"type":44,"value":2685}," object.",{"type":29,"tag":30,"props":2687,"children":2688},{},[2689,2691,2696,2698,2703,2705,2710,2712,2718],{"type":44,"value":2690},"In the second instantiation, of ",{"type":29,"tag":59,"props":2692,"children":2694},{"className":2693},[],[2695],{"type":44,"value":2577},{"type":44,"value":2697},", the constructor has a lot of underlying functionality. The upshot of following these calls in ",{"type":29,"tag":59,"props":2699,"children":2701},{"className":2700},[],[2702],{"type":44,"value":2577},{"type":44,"value":2704},"'s constructor is we will find the code responsible for calling ",{"type":29,"tag":59,"props":2706,"children":2708},{"className":2707},[],[2709],{"type":44,"value":2543},{"type":44,"value":2711},", initializing the client side API corresponding to the server-side dispatchers. Here's a simplified version of what's happening in the constructor for ",{"type":29,"tag":59,"props":2713,"children":2715},{"className":2714},[],[2716],{"type":44,"value":2717},"Rootscope",{"type":44,"value":700},{"type":29,"tag":52,"props":2720,"children":2723},{"className":54,"code":2721,"filename":2722,"language":56,"meta":7,"style":7},"class RootDispatcher extends Dispatcher {\n  constructor(connection: DispatcherConnection) {\n    super(connection, { guid: \"\" }, \"Root\", {});\n  }\n}\n\nclass Dispatcher extends EventEmitter {\n  _connection: DispatcherConnection;\n  _parent: DispatcherConnection | undefined;\n\n  constructor(\n    parent: ParentScopeType | DispatcherConnection,\n    object: Type,\n    type: string,\n    initializer: channels.InitializerTraits\u003CType>\n  ) {\n    super();\n\n    this._connection =\n      parent instanceof DispatcherConnection ? parent : parent._connection;\n    this._parent = parent instanceof DispatcherConnection ? undefined : parent;\n\n    this._guid = object.guid;\n    this._type = type;\n    this._object = object;\n\n    this._connection.registerDispatcher(this);\n\n    if (this._parent)\n      this._connection.sendCreate(\n        this._parent,\n        type,\n        guid,\n        initializer,\n        this._parent._object\n      );\n  }\n}\n","playwright-core/src/server/dispatchers/dispatcher.ts",[2724],{"type":29,"tag":59,"props":2725,"children":2726},{"__ignoreMap":7},[2727,2752,2782,2814,2821,2828,2835,2858,2878,2906,2913,2924,2953,2974,2994,3034,3042,3053,3060,3078,3114,3160,3167,3188,3209,3230,3237,3267,3274,3295,3316,3329,3337,3345,3353,3365,3373,3380],{"type":29,"tag":63,"props":2728,"children":2729},{"class":65,"line":66},[2730,2735,2739,2743,2748],{"type":29,"tag":63,"props":2731,"children":2732},{"style":70},[2733],{"type":44,"value":2734},"class",{"type":29,"tag":63,"props":2736,"children":2737},{"style":117},[2738],{"type":44,"value":1078},{"type":29,"tag":63,"props":2740,"children":2741},{"style":70},[2742],{"type":44,"value":1911},{"type":29,"tag":63,"props":2744,"children":2745},{"style":117},[2746],{"type":44,"value":2747}," Dispatcher",{"type":29,"tag":63,"props":2749,"children":2750},{"style":76},[2751],{"type":44,"value":135},{"type":29,"tag":63,"props":2753,"children":2754},{"class":65,"line":93},[2755,2760,2764,2769,2773,2777],{"type":29,"tag":63,"props":2756,"children":2757},{"style":70},[2758],{"type":44,"value":2759},"  constructor",{"type":29,"tag":63,"props":2761,"children":2762},{"style":76},[2763],{"type":44,"value":238},{"type":29,"tag":63,"props":2765,"children":2766},{"style":147},[2767],{"type":44,"value":2768},"connection",{"type":29,"tag":63,"props":2770,"children":2771},{"style":70},[2772],{"type":44,"value":700},{"type":29,"tag":63,"props":2774,"children":2775},{"style":117},[2776],{"type":44,"value":904},{"type":29,"tag":63,"props":2778,"children":2779},{"style":76},[2780],{"type":44,"value":2781},") {\n",{"type":29,"tag":63,"props":2783,"children":2784},{"class":65,"line":103},[2785,2790,2795,2799,2804,2809],{"type":29,"tag":63,"props":2786,"children":2787},{"style":394},[2788],{"type":44,"value":2789},"    super",{"type":29,"tag":63,"props":2791,"children":2792},{"style":76},[2793],{"type":44,"value":2794},"(connection, { guid: ",{"type":29,"tag":63,"props":2796,"children":2797},{"style":87},[2798],{"type":44,"value":1599},{"type":29,"tag":63,"props":2800,"children":2801},{"style":76},[2802],{"type":44,"value":2803}," }, ",{"type":29,"tag":63,"props":2805,"children":2806},{"style":87},[2807],{"type":44,"value":2808},"\"Root\"",{"type":29,"tag":63,"props":2810,"children":2811},{"style":76},[2812],{"type":44,"value":2813},", {});\n",{"type":29,"tag":63,"props":2815,"children":2816},{"class":65,"line":138},[2817],{"type":29,"tag":63,"props":2818,"children":2819},{"style":76},[2820],{"type":44,"value":2063},{"type":29,"tag":63,"props":2822,"children":2823},{"class":65,"line":178},[2824],{"type":29,"tag":63,"props":2825,"children":2826},{"style":76},[2827],{"type":44,"value":257},{"type":29,"tag":63,"props":2829,"children":2830},{"class":65,"line":213},[2831],{"type":29,"tag":63,"props":2832,"children":2833},{"emptyLinePlaceholder":97},[2834],{"type":44,"value":100},{"type":29,"tag":63,"props":2836,"children":2837},{"class":65,"line":251},[2838,2842,2846,2850,2854],{"type":29,"tag":63,"props":2839,"children":2840},{"style":70},[2841],{"type":44,"value":2734},{"type":29,"tag":63,"props":2843,"children":2844},{"style":117},[2845],{"type":44,"value":2747},{"type":29,"tag":63,"props":2847,"children":2848},{"style":70},[2849],{"type":44,"value":1911},{"type":29,"tag":63,"props":2851,"children":2852},{"style":117},[2853],{"type":44,"value":1916},{"type":29,"tag":63,"props":2855,"children":2856},{"style":76},[2857],{"type":44,"value":135},{"type":29,"tag":63,"props":2859,"children":2860},{"class":65,"line":862},[2861,2866,2870,2874],{"type":29,"tag":63,"props":2862,"children":2863},{"style":147},[2864],{"type":44,"value":2865},"  _connection",{"type":29,"tag":63,"props":2867,"children":2868},{"style":70},[2869],{"type":44,"value":700},{"type":29,"tag":63,"props":2871,"children":2872},{"style":117},[2873],{"type":44,"value":904},{"type":29,"tag":63,"props":2875,"children":2876},{"style":76},[2877],{"type":44,"value":1183},{"type":29,"tag":63,"props":2879,"children":2880},{"class":65,"line":881},[2881,2886,2890,2894,2898,2902],{"type":29,"tag":63,"props":2882,"children":2883},{"style":147},[2884],{"type":44,"value":2885},"  _parent",{"type":29,"tag":63,"props":2887,"children":2888},{"style":70},[2889],{"type":44,"value":700},{"type":29,"tag":63,"props":2891,"children":2892},{"style":117},[2893],{"type":44,"value":904},{"type":29,"tag":63,"props":2895,"children":2896},{"style":70},[2897],{"type":44,"value":771},{"type":29,"tag":63,"props":2899,"children":2900},{"style":394},[2901],{"type":44,"value":776},{"type":29,"tag":63,"props":2903,"children":2904},{"style":76},[2905],{"type":44,"value":1183},{"type":29,"tag":63,"props":2907,"children":2908},{"class":65,"line":926},[2909],{"type":29,"tag":63,"props":2910,"children":2911},{"emptyLinePlaceholder":97},[2912],{"type":44,"value":100},{"type":29,"tag":63,"props":2914,"children":2915},{"class":65,"line":934},[2916,2920],{"type":29,"tag":63,"props":2917,"children":2918},{"style":70},[2919],{"type":44,"value":2759},{"type":29,"tag":63,"props":2921,"children":2922},{"style":76},[2923],{"type":44,"value":1151},{"type":29,"tag":63,"props":2925,"children":2926},{"class":65,"line":943},[2927,2932,2936,2941,2945,2949],{"type":29,"tag":63,"props":2928,"children":2929},{"style":147},[2930],{"type":44,"value":2931},"    parent",{"type":29,"tag":63,"props":2933,"children":2934},{"style":70},[2935],{"type":44,"value":700},{"type":29,"tag":63,"props":2937,"children":2938},{"style":117},[2939],{"type":44,"value":2940}," ParentScopeType",{"type":29,"tag":63,"props":2942,"children":2943},{"style":70},[2944],{"type":44,"value":771},{"type":29,"tag":63,"props":2946,"children":2947},{"style":117},[2948],{"type":44,"value":904},{"type":29,"tag":63,"props":2950,"children":2951},{"style":76},[2952],{"type":44,"value":796},{"type":29,"tag":63,"props":2954,"children":2955},{"class":65,"line":23},[2956,2961,2965,2970],{"type":29,"tag":63,"props":2957,"children":2958},{"style":147},[2959],{"type":44,"value":2960},"    object",{"type":29,"tag":63,"props":2962,"children":2963},{"style":70},[2964],{"type":44,"value":700},{"type":29,"tag":63,"props":2966,"children":2967},{"style":117},[2968],{"type":44,"value":2969}," Type",{"type":29,"tag":63,"props":2971,"children":2972},{"style":76},[2973],{"type":44,"value":796},{"type":29,"tag":63,"props":2975,"children":2976},{"class":65,"line":998},[2977,2982,2986,2990],{"type":29,"tag":63,"props":2978,"children":2979},{"style":147},[2980],{"type":44,"value":2981},"    type",{"type":29,"tag":63,"props":2983,"children":2984},{"style":70},[2985],{"type":44,"value":700},{"type":29,"tag":63,"props":2987,"children":2988},{"style":394},[2989],{"type":44,"value":2003},{"type":29,"tag":63,"props":2991,"children":2992},{"style":76},[2993],{"type":44,"value":796},{"type":29,"tag":63,"props":2995,"children":2996},{"class":65,"line":1030},[2997,3002,3006,3011,3015,3020,3024,3029],{"type":29,"tag":63,"props":2998,"children":2999},{"style":147},[3000],{"type":44,"value":3001},"    initializer",{"type":29,"tag":63,"props":3003,"children":3004},{"style":70},[3005],{"type":44,"value":700},{"type":29,"tag":63,"props":3007,"children":3008},{"style":117},[3009],{"type":44,"value":3010}," channels",{"type":29,"tag":63,"props":3012,"children":3013},{"style":76},[3014],{"type":44,"value":228},{"type":29,"tag":63,"props":3016,"children":3017},{"style":117},[3018],{"type":44,"value":3019},"InitializerTraits",{"type":29,"tag":63,"props":3021,"children":3022},{"style":76},[3023],{"type":44,"value":1951},{"type":29,"tag":63,"props":3025,"children":3026},{"style":117},[3027],{"type":44,"value":3028},"Type",{"type":29,"tag":63,"props":3030,"children":3031},{"style":76},[3032],{"type":44,"value":3033},">\n",{"type":29,"tag":63,"props":3035,"children":3036},{"class":65,"line":1047},[3037],{"type":29,"tag":63,"props":3038,"children":3039},{"style":76},[3040],{"type":44,"value":3041},"  ) {\n",{"type":29,"tag":63,"props":3043,"children":3044},{"class":65,"line":1055},[3045,3049],{"type":29,"tag":63,"props":3046,"children":3047},{"style":394},[3048],{"type":44,"value":2789},{"type":29,"tag":63,"props":3050,"children":3051},{"style":76},[3052],{"type":44,"value":878},{"type":29,"tag":63,"props":3054,"children":3055},{"class":65,"line":1086},[3056],{"type":29,"tag":63,"props":3057,"children":3058},{"emptyLinePlaceholder":97},[3059],{"type":44,"value":100},{"type":29,"tag":63,"props":3061,"children":3062},{"class":65,"line":1094},[3063,3068,3073],{"type":29,"tag":63,"props":3064,"children":3065},{"style":394},[3066],{"type":44,"value":3067},"    this",{"type":29,"tag":63,"props":3069,"children":3070},{"style":76},[3071],{"type":44,"value":3072},"._connection ",{"type":29,"tag":63,"props":3074,"children":3075},{"style":70},[3076],{"type":44,"value":3077},"=\n",{"type":29,"tag":63,"props":3079,"children":3080},{"class":65,"line":1103},[3081,3086,3091,3095,3100,3105,3109],{"type":29,"tag":63,"props":3082,"children":3083},{"style":76},[3084],{"type":44,"value":3085},"      parent ",{"type":29,"tag":63,"props":3087,"children":3088},{"style":70},[3089],{"type":44,"value":3090},"instanceof",{"type":29,"tag":63,"props":3092,"children":3093},{"style":117},[3094],{"type":44,"value":904},{"type":29,"tag":63,"props":3096,"children":3097},{"style":70},[3098],{"type":44,"value":3099}," ?",{"type":29,"tag":63,"props":3101,"children":3102},{"style":76},[3103],{"type":44,"value":3104}," parent ",{"type":29,"tag":63,"props":3106,"children":3107},{"style":70},[3108],{"type":44,"value":700},{"type":29,"tag":63,"props":3110,"children":3111},{"style":76},[3112],{"type":44,"value":3113}," parent._connection;\n",{"type":29,"tag":63,"props":3115,"children":3116},{"class":65,"line":1122},[3117,3121,3126,3130,3134,3138,3142,3146,3150,3155],{"type":29,"tag":63,"props":3118,"children":3119},{"style":394},[3120],{"type":44,"value":3067},{"type":29,"tag":63,"props":3122,"children":3123},{"style":76},[3124],{"type":44,"value":3125},"._parent ",{"type":29,"tag":63,"props":3127,"children":3128},{"style":70},[3129],{"type":44,"value":1197},{"type":29,"tag":63,"props":3131,"children":3132},{"style":76},[3133],{"type":44,"value":3104},{"type":29,"tag":63,"props":3135,"children":3136},{"style":70},[3137],{"type":44,"value":3090},{"type":29,"tag":63,"props":3139,"children":3140},{"style":117},[3141],{"type":44,"value":904},{"type":29,"tag":63,"props":3143,"children":3144},{"style":70},[3145],{"type":44,"value":3099},{"type":29,"tag":63,"props":3147,"children":3148},{"style":394},[3149],{"type":44,"value":776},{"type":29,"tag":63,"props":3151,"children":3152},{"style":70},[3153],{"type":44,"value":3154}," :",{"type":29,"tag":63,"props":3156,"children":3157},{"style":76},[3158],{"type":44,"value":3159}," parent;\n",{"type":29,"tag":63,"props":3161,"children":3162},{"class":65,"line":1154},[3163],{"type":29,"tag":63,"props":3164,"children":3165},{"emptyLinePlaceholder":97},[3166],{"type":44,"value":100},{"type":29,"tag":63,"props":3168,"children":3169},{"class":65,"line":1163},[3170,3174,3179,3183],{"type":29,"tag":63,"props":3171,"children":3172},{"style":394},[3173],{"type":44,"value":3067},{"type":29,"tag":63,"props":3175,"children":3176},{"style":76},[3177],{"type":44,"value":3178},"._guid ",{"type":29,"tag":63,"props":3180,"children":3181},{"style":70},[3182],{"type":44,"value":1197},{"type":29,"tag":63,"props":3184,"children":3185},{"style":76},[3186],{"type":44,"value":3187}," object.guid;\n",{"type":29,"tag":63,"props":3189,"children":3190},{"class":65,"line":1186},[3191,3195,3200,3204],{"type":29,"tag":63,"props":3192,"children":3193},{"style":394},[3194],{"type":44,"value":3067},{"type":29,"tag":63,"props":3196,"children":3197},{"style":76},[3198],{"type":44,"value":3199},"._type ",{"type":29,"tag":63,"props":3201,"children":3202},{"style":70},[3203],{"type":44,"value":1197},{"type":29,"tag":63,"props":3205,"children":3206},{"style":76},[3207],{"type":44,"value":3208}," type;\n",{"type":29,"tag":63,"props":3210,"children":3211},{"class":65,"line":1213},[3212,3216,3221,3225],{"type":29,"tag":63,"props":3213,"children":3214},{"style":394},[3215],{"type":44,"value":3067},{"type":29,"tag":63,"props":3217,"children":3218},{"style":76},[3219],{"type":44,"value":3220},"._object ",{"type":29,"tag":63,"props":3222,"children":3223},{"style":70},[3224],{"type":44,"value":1197},{"type":29,"tag":63,"props":3226,"children":3227},{"style":76},[3228],{"type":44,"value":3229}," object;\n",{"type":29,"tag":63,"props":3231,"children":3232},{"class":65,"line":1222},[3233],{"type":29,"tag":63,"props":3234,"children":3235},{"emptyLinePlaceholder":97},[3236],{"type":44,"value":100},{"type":29,"tag":63,"props":3238,"children":3239},{"class":65,"line":1231},[3240,3244,3249,3254,3258,3263],{"type":29,"tag":63,"props":3241,"children":3242},{"style":394},[3243],{"type":44,"value":3067},{"type":29,"tag":63,"props":3245,"children":3246},{"style":76},[3247],{"type":44,"value":3248},"._connection.",{"type":29,"tag":63,"props":3250,"children":3251},{"style":117},[3252],{"type":44,"value":3253},"registerDispatcher",{"type":29,"tag":63,"props":3255,"children":3256},{"style":76},[3257],{"type":44,"value":238},{"type":29,"tag":63,"props":3259,"children":3260},{"style":394},[3261],{"type":44,"value":3262},"this",{"type":29,"tag":63,"props":3264,"children":3265},{"style":76},[3266],{"type":44,"value":429},{"type":29,"tag":63,"props":3268,"children":3269},{"class":65,"line":1256},[3270],{"type":29,"tag":63,"props":3271,"children":3272},{"emptyLinePlaceholder":97},[3273],{"type":44,"value":100},{"type":29,"tag":63,"props":3275,"children":3276},{"class":65,"line":1265},[3277,3282,3286,3290],{"type":29,"tag":63,"props":3278,"children":3279},{"style":70},[3280],{"type":44,"value":3281},"    if",{"type":29,"tag":63,"props":3283,"children":3284},{"style":76},[3285],{"type":44,"value":963},{"type":29,"tag":63,"props":3287,"children":3288},{"style":394},[3289],{"type":44,"value":3262},{"type":29,"tag":63,"props":3291,"children":3292},{"style":76},[3293],{"type":44,"value":3294},"._parent)\n",{"type":29,"tag":63,"props":3296,"children":3297},{"class":65,"line":1273},[3298,3303,3307,3312],{"type":29,"tag":63,"props":3299,"children":3300},{"style":394},[3301],{"type":44,"value":3302},"      this",{"type":29,"tag":63,"props":3304,"children":3305},{"style":76},[3306],{"type":44,"value":3248},{"type":29,"tag":63,"props":3308,"children":3309},{"style":117},[3310],{"type":44,"value":3311},"sendCreate",{"type":29,"tag":63,"props":3313,"children":3314},{"style":76},[3315],{"type":44,"value":1151},{"type":29,"tag":63,"props":3317,"children":3318},{"class":65,"line":1298},[3319,3324],{"type":29,"tag":63,"props":3320,"children":3321},{"style":394},[3322],{"type":44,"value":3323},"        this",{"type":29,"tag":63,"props":3325,"children":3326},{"style":76},[3327],{"type":44,"value":3328},"._parent,\n",{"type":29,"tag":63,"props":3330,"children":3331},{"class":65,"line":1307},[3332],{"type":29,"tag":63,"props":3333,"children":3334},{"style":76},[3335],{"type":44,"value":3336},"        type,\n",{"type":29,"tag":63,"props":3338,"children":3339},{"class":65,"line":1315},[3340],{"type":29,"tag":63,"props":3341,"children":3342},{"style":76},[3343],{"type":44,"value":3344},"        guid,\n",{"type":29,"tag":63,"props":3346,"children":3347},{"class":65,"line":1341},[3348],{"type":29,"tag":63,"props":3349,"children":3350},{"style":76},[3351],{"type":44,"value":3352},"        initializer,\n",{"type":29,"tag":63,"props":3354,"children":3355},{"class":65,"line":1349},[3356,3360],{"type":29,"tag":63,"props":3357,"children":3358},{"style":394},[3359],{"type":44,"value":3323},{"type":29,"tag":63,"props":3361,"children":3362},{"style":76},[3363],{"type":44,"value":3364},"._parent._object\n",{"type":29,"tag":63,"props":3366,"children":3367},{"class":65,"line":1358},[3368],{"type":29,"tag":63,"props":3369,"children":3370},{"style":76},[3371],{"type":44,"value":3372},"      );\n",{"type":29,"tag":63,"props":3374,"children":3375},{"class":65,"line":1390},[3376],{"type":29,"tag":63,"props":3377,"children":3378},{"style":76},[3379],{"type":44,"value":2063},{"type":29,"tag":63,"props":3381,"children":3382},{"class":65,"line":1421},[3383],{"type":29,"tag":63,"props":3384,"children":3385},{"style":76},[3386],{"type":44,"value":257},{"type":29,"tag":30,"props":3388,"children":3389},{},[3390,3392,3397,3399,3404,3406,3411,3413,3419,3421,3426,3428,3433,3435,3440,3442,3447,3449,3454,3456,3461,3463,3468],{"type":44,"value":3391},"In the ",{"type":29,"tag":59,"props":3393,"children":3395},{"className":3394},[],[3396],{"type":44,"value":626},{"type":44,"value":3398}," constructor we see the connection always comes from either the inherited parent ",{"type":29,"tag":59,"props":3400,"children":3402},{"className":3401},[],[3403],{"type":44,"value":626},{"type":44,"value":3405},", or from the ",{"type":29,"tag":59,"props":3407,"children":3409},{"className":3408},[],[3410],{"type":44,"value":2186},{"type":44,"value":3412}," passed into the ",{"type":29,"tag":59,"props":3414,"children":3416},{"className":3415},[],[3417],{"type":44,"value":3418},"parent",{"type":44,"value":3420}," parameter. This, coupled with ",{"type":29,"tag":59,"props":3422,"children":3424},{"className":3423},[],[3425],{"type":44,"value":2655},{"type":44,"value":3427}," having the name ",{"type":29,"tag":59,"props":3429,"children":3431},{"className":3430},[],[3432],{"type":44,"value":26},{"type":44,"value":3434},", gives us the hint that every dispatcher in the server library will have access to the ",{"type":29,"tag":59,"props":3436,"children":3438},{"className":3437},[],[3439],{"type":44,"value":2520},{"type":44,"value":3441},". Furthermore, the ",{"type":29,"tag":59,"props":3443,"children":3445},{"className":3444},[],[3446],{"type":44,"value":2520},{"type":44,"value":3448}," will register every instance of a subclass of ",{"type":29,"tag":59,"props":3450,"children":3452},{"className":3451},[],[3453],{"type":44,"value":626},{"type":44,"value":3455},", hinting that it will communicate with each of the ",{"type":29,"tag":59,"props":3457,"children":3459},{"className":3458},[],[3460],{"type":44,"value":626},{"type":44,"value":3462}," objects. These points will become more clear after looking at the ",{"type":29,"tag":59,"props":3464,"children":3466},{"className":3465},[],[3467],{"type":44,"value":2577},{"type":44,"value":3469},"'s constructor.",{"type":29,"tag":3471,"props":3472,"children":3474},"h4",{"id":3473},"playwrightdispatcher-and-its-constructor",[3475],{"type":44,"value":3476},"PlaywrightDispatcher and its constructor",{"type":29,"tag":30,"props":3478,"children":3479},{},[3480,3482,3487],{"type":44,"value":3481},"Let's look closer at a slightly simplified version of ",{"type":29,"tag":59,"props":3483,"children":3485},{"className":3484},[],[3486],{"type":44,"value":2577},{"type":44,"value":3488},"'s constructor",{"type":29,"tag":52,"props":3490,"children":3493},{"className":54,"code":3491,"filename":3492,"language":56,"meta":7,"style":7},"import type { Playwright } from \"playwright-core/src/server/playwright\";\n\nclass PlaywrightDispatcher extends Dispatcher {\n  constructor(scope: RootDispatcher, playwright: Playwright) {\n    const android = new AndroidDispatcher(scope, playwright.android);\n    // parameter names in the base Dispatcher class are\n    // parent, object, type, initializer\n    super(scope, playwright, \"Playwright\", {\n      chromium: new BrowserTypeDispatcher(scope, playwright.chromium),\n      firefox: new BrowserTypeDispatcher(scope, playwright.firefox),\n      webkit: new BrowserTypeDispatcher(scope, playwright.webkit),\n      android,\n      electron: new ElectronDispatcher(scope, playwright.electron),\n    });\n  }\n}\n","packages/playwright-core/src/server/dispatchers/playwrightDispatcher.ts",[3494],{"type":29,"tag":59,"props":3495,"children":3496},{"__ignoreMap":7},[3497,3527,3534,3557,3602,3633,3641,3649,3671,3693,3714,3735,3743,3765,3773,3780],{"type":29,"tag":63,"props":3498,"children":3499},{"class":65,"line":66},[3500,3504,3509,3514,3518,3523],{"type":29,"tag":63,"props":3501,"children":3502},{"style":70},[3503],{"type":44,"value":73},{"type":29,"tag":63,"props":3505,"children":3506},{"style":70},[3507],{"type":44,"value":3508}," type",{"type":29,"tag":63,"props":3510,"children":3511},{"style":76},[3512],{"type":44,"value":3513}," { Playwright } ",{"type":29,"tag":63,"props":3515,"children":3516},{"style":70},[3517],{"type":44,"value":84},{"type":29,"tag":63,"props":3519,"children":3520},{"style":87},[3521],{"type":44,"value":3522}," \"playwright-core/src/server/playwright\"",{"type":29,"tag":63,"props":3524,"children":3525},{"style":76},[3526],{"type":44,"value":1183},{"type":29,"tag":63,"props":3528,"children":3529},{"class":65,"line":93},[3530],{"type":29,"tag":63,"props":3531,"children":3532},{"emptyLinePlaceholder":97},[3533],{"type":44,"value":100},{"type":29,"tag":63,"props":3535,"children":3536},{"class":65,"line":103},[3537,3541,3545,3549,3553],{"type":29,"tag":63,"props":3538,"children":3539},{"style":70},[3540],{"type":44,"value":2734},{"type":29,"tag":63,"props":3542,"children":3543},{"style":117},[3544],{"type":44,"value":1114},{"type":29,"tag":63,"props":3546,"children":3547},{"style":70},[3548],{"type":44,"value":1911},{"type":29,"tag":63,"props":3550,"children":3551},{"style":117},[3552],{"type":44,"value":2747},{"type":29,"tag":63,"props":3554,"children":3555},{"style":76},[3556],{"type":44,"value":135},{"type":29,"tag":63,"props":3558,"children":3559},{"class":65,"line":138},[3560,3564,3568,3573,3577,3581,3585,3589,3593,3598],{"type":29,"tag":63,"props":3561,"children":3562},{"style":70},[3563],{"type":44,"value":2759},{"type":29,"tag":63,"props":3565,"children":3566},{"style":76},[3567],{"type":44,"value":238},{"type":29,"tag":63,"props":3569,"children":3570},{"style":147},[3571],{"type":44,"value":3572},"scope",{"type":29,"tag":63,"props":3574,"children":3575},{"style":70},[3576],{"type":44,"value":700},{"type":29,"tag":63,"props":3578,"children":3579},{"style":117},[3580],{"type":44,"value":1078},{"type":29,"tag":63,"props":3582,"children":3583},{"style":76},[3584],{"type":44,"value":851},{"type":29,"tag":63,"props":3586,"children":3587},{"style":147},[3588],{"type":44,"value":5},{"type":29,"tag":63,"props":3590,"children":3591},{"style":70},[3592],{"type":44,"value":700},{"type":29,"tag":63,"props":3594,"children":3595},{"style":117},[3596],{"type":44,"value":3597}," Playwright",{"type":29,"tag":63,"props":3599,"children":3600},{"style":76},[3601],{"type":44,"value":2781},{"type":29,"tag":63,"props":3603,"children":3604},{"class":65,"line":178},[3605,3610,3615,3619,3623,3628],{"type":29,"tag":63,"props":3606,"children":3607},{"style":70},[3608],{"type":44,"value":3609},"    const",{"type":29,"tag":63,"props":3611,"children":3612},{"style":394},[3613],{"type":44,"value":3614}," android",{"type":29,"tag":63,"props":3616,"children":3617},{"style":70},[3618],{"type":44,"value":155},{"type":29,"tag":63,"props":3620,"children":3621},{"style":70},[3622],{"type":44,"value":832},{"type":29,"tag":63,"props":3624,"children":3625},{"style":117},[3626],{"type":44,"value":3627}," AndroidDispatcher",{"type":29,"tag":63,"props":3629,"children":3630},{"style":76},[3631],{"type":44,"value":3632},"(scope, playwright.android);\n",{"type":29,"tag":63,"props":3634,"children":3635},{"class":65,"line":213},[3636],{"type":29,"tag":63,"props":3637,"children":3638},{"style":916},[3639],{"type":44,"value":3640},"    // parameter names in the base Dispatcher class are\n",{"type":29,"tag":63,"props":3642,"children":3643},{"class":65,"line":251},[3644],{"type":29,"tag":63,"props":3645,"children":3646},{"style":916},[3647],{"type":44,"value":3648},"    // parent, object, type, initializer\n",{"type":29,"tag":63,"props":3650,"children":3651},{"class":65,"line":862},[3652,3656,3661,3666],{"type":29,"tag":63,"props":3653,"children":3654},{"style":394},[3655],{"type":44,"value":2789},{"type":29,"tag":63,"props":3657,"children":3658},{"style":76},[3659],{"type":44,"value":3660},"(scope, playwright, ",{"type":29,"tag":63,"props":3662,"children":3663},{"style":87},[3664],{"type":44,"value":3665},"\"Playwright\"",{"type":29,"tag":63,"props":3667,"children":3668},{"style":76},[3669],{"type":44,"value":3670},", {\n",{"type":29,"tag":63,"props":3672,"children":3673},{"class":65,"line":881},[3674,3679,3683,3688],{"type":29,"tag":63,"props":3675,"children":3676},{"style":76},[3677],{"type":44,"value":3678},"      chromium: ",{"type":29,"tag":63,"props":3680,"children":3681},{"style":70},[3682],{"type":44,"value":2636},{"type":29,"tag":63,"props":3684,"children":3685},{"style":117},[3686],{"type":44,"value":3687}," BrowserTypeDispatcher",{"type":29,"tag":63,"props":3689,"children":3690},{"style":76},[3691],{"type":44,"value":3692},"(scope, playwright.chromium),\n",{"type":29,"tag":63,"props":3694,"children":3695},{"class":65,"line":926},[3696,3701,3705,3709],{"type":29,"tag":63,"props":3697,"children":3698},{"style":76},[3699],{"type":44,"value":3700},"      firefox: ",{"type":29,"tag":63,"props":3702,"children":3703},{"style":70},[3704],{"type":44,"value":2636},{"type":29,"tag":63,"props":3706,"children":3707},{"style":117},[3708],{"type":44,"value":3687},{"type":29,"tag":63,"props":3710,"children":3711},{"style":76},[3712],{"type":44,"value":3713},"(scope, playwright.firefox),\n",{"type":29,"tag":63,"props":3715,"children":3716},{"class":65,"line":934},[3717,3722,3726,3730],{"type":29,"tag":63,"props":3718,"children":3719},{"style":76},[3720],{"type":44,"value":3721},"      webkit: ",{"type":29,"tag":63,"props":3723,"children":3724},{"style":70},[3725],{"type":44,"value":2636},{"type":29,"tag":63,"props":3727,"children":3728},{"style":117},[3729],{"type":44,"value":3687},{"type":29,"tag":63,"props":3731,"children":3732},{"style":76},[3733],{"type":44,"value":3734},"(scope, playwright.webkit),\n",{"type":29,"tag":63,"props":3736,"children":3737},{"class":65,"line":943},[3738],{"type":29,"tag":63,"props":3739,"children":3740},{"style":76},[3741],{"type":44,"value":3742},"      android,\n",{"type":29,"tag":63,"props":3744,"children":3745},{"class":65,"line":23},[3746,3751,3755,3760],{"type":29,"tag":63,"props":3747,"children":3748},{"style":76},[3749],{"type":44,"value":3750},"      electron: ",{"type":29,"tag":63,"props":3752,"children":3753},{"style":70},[3754],{"type":44,"value":2636},{"type":29,"tag":63,"props":3756,"children":3757},{"style":117},[3758],{"type":44,"value":3759}," ElectronDispatcher",{"type":29,"tag":63,"props":3761,"children":3762},{"style":76},[3763],{"type":44,"value":3764},"(scope, playwright.electron),\n",{"type":29,"tag":63,"props":3766,"children":3767},{"class":65,"line":998},[3768],{"type":29,"tag":63,"props":3769,"children":3770},{"style":76},[3771],{"type":44,"value":3772},"    });\n",{"type":29,"tag":63,"props":3774,"children":3775},{"class":65,"line":1030},[3776],{"type":29,"tag":63,"props":3777,"children":3778},{"style":76},[3779],{"type":44,"value":2063},{"type":29,"tag":63,"props":3781,"children":3782},{"class":65,"line":1047},[3783],{"type":29,"tag":63,"props":3784,"children":3785},{"style":76},[3786],{"type":44,"value":257},{"type":29,"tag":30,"props":3788,"children":3789},{},[3790,3792,3798,3800,3805,3807,3812,3814,3819,3821,3826,3828,3834,3836,3842,3844,3850,3852,3857,3859,3864],{"type":44,"value":3791},"Notice the ",{"type":29,"tag":59,"props":3793,"children":3795},{"className":3794},[],[3796],{"type":44,"value":3797},"super",{"type":44,"value":3799}," call has parameters for each of the driver types (chromium, firefox, etc.), in its initializers object. And each of the values have the scope the ",{"type":29,"tag":59,"props":3801,"children":3803},{"className":3802},[],[3804],{"type":44,"value":2655},{"type":44,"value":3806}," from ",{"type":29,"tag":59,"props":3808,"children":3810},{"className":3809},[],[3811],{"type":44,"value":488},{"type":44,"value":3813},". Every call to the server will run through the ",{"type":29,"tag":59,"props":3815,"children":3817},{"className":3816},[],[3818],{"type":44,"value":2520},{"type":44,"value":3820}," in the ",{"type":29,"tag":59,"props":3822,"children":3824},{"className":3823},[],[3825],{"type":44,"value":2655},{"type":44,"value":3827},", which then can be traced through calls in each of the dispatcher classes. For example, ",{"type":29,"tag":59,"props":3829,"children":3831},{"className":3830},[],[3832],{"type":44,"value":3833},"BrowserTypeDispatcher",{"type":44,"value":3835}," will launch a ",{"type":29,"tag":59,"props":3837,"children":3839},{"className":3838},[],[3840],{"type":44,"value":3841},"BrowserDispatcher",{"type":44,"value":3843},", which is responsible for creating a ",{"type":29,"tag":59,"props":3845,"children":3847},{"className":3846},[],[3848],{"type":44,"value":3849},"BrowserContextDispatcher",{"type":44,"value":3851},", which can create a ",{"type":29,"tag":59,"props":3853,"children":3855},{"className":3854},[],[3856],{"type":44,"value":633},{"type":44,"value":3858},", and so on. The whole hierarchy of dispatchers directly interacting with the automated browser is contained within these few dispatcher initializations. So now we can trace all calls back to the original ",{"type":29,"tag":59,"props":3860,"children":3862},{"className":3861},[],[3863],{"type":44,"value":2520},{"type":44,"value":3865}," defined in the factory method with confidence!",{"type":29,"tag":269,"props":3867,"children":3869},{"id":3868},"tying-back-to-the-onmessage-communication",[3870],{"type":44,"value":3871},"Tying back to the onmessage communication",{"type":29,"tag":30,"props":3873,"children":3874},{},[3875,3877,3882,3884,3889,3891,3896,3897,3903,3905,3910,3912,3917,3919,3925,3927,3932,3934,3940,3942,3947,3949,3955,3956,3961,3962,3968,3970,3976,3978,3983,3985,3991],{"type":44,"value":3876},"The other important bit to look at is where ",{"type":29,"tag":59,"props":3878,"children":3880},{"className":3879},[],[3881],{"type":44,"value":954},{"type":44,"value":3883}," is called within the ",{"type":29,"tag":59,"props":3885,"children":3887},{"className":3886},[],[3888],{"type":44,"value":2520},{"type":44,"value":3890},". The two main wrappers around this method are ",{"type":29,"tag":59,"props":3892,"children":3894},{"className":3893},[],[3895],{"type":44,"value":990},{"type":44,"value":281},{"type":29,"tag":59,"props":3898,"children":3900},{"className":3899},[],[3901],{"type":44,"value":3902},"_sendMessageToClient",{"type":44,"value":3904}," in ",{"type":29,"tag":59,"props":3906,"children":3908},{"className":3907},[],[3909],{"type":44,"value":2186},{"type":44,"value":3911},". The ",{"type":29,"tag":59,"props":3913,"children":3915},{"className":3914},[],[3916],{"type":44,"value":990},{"type":44,"value":3918}," function is called on the client side, from the ",{"type":29,"tag":59,"props":3920,"children":3922},{"className":3921},[],[3923],{"type":44,"value":3924},"clientConnection.onmessage",{"type":44,"value":3926}," function, so you can interpret this as the main interface the client interacts with the server, where the dispatcher finds the corresponding dispatcher, calls the action, and responds back to the listener connected via ",{"type":29,"tag":59,"props":3928,"children":3930},{"className":3929},[],[3931],{"type":44,"value":954},{"type":44,"value":3933},", which here is the ",{"type":29,"tag":59,"props":3935,"children":3937},{"className":3936},[],[3938],{"type":44,"value":3939},"clientConnection",{"type":44,"value":3941},". The other wrapper, ",{"type":29,"tag":59,"props":3943,"children":3945},{"className":3944},[],[3946],{"type":44,"value":3902},{"type":44,"value":3948},", is called from the ",{"type":29,"tag":59,"props":3950,"children":3952},{"className":3951},[],[3953],{"type":44,"value":3954},"sendEvent",{"type":44,"value":851},{"type":29,"tag":59,"props":3957,"children":3959},{"className":3958},[],[3960],{"type":44,"value":3311},{"type":44,"value":851},{"type":29,"tag":59,"props":3963,"children":3965},{"className":3964},[],[3966],{"type":44,"value":3967},"sendAdopt",{"type":44,"value":3969},", and ",{"type":29,"tag":59,"props":3971,"children":3973},{"className":3972},[],[3974],{"type":44,"value":3975},"sendDestroy",{"type":44,"value":3977}," methods defined within the dispatcher. Calls to these functions are spread throughout the ",{"type":29,"tag":59,"props":3979,"children":3981},{"className":3980},[],[3982],{"type":44,"value":626},{"type":44,"value":3984}," subclasses, which call these functions from their internal ",{"type":29,"tag":59,"props":3986,"children":3988},{"className":3987},[],[3989],{"type":44,"value":3990},"_connection",{"type":44,"value":3992}," variable.",{"type":29,"tag":269,"props":3994,"children":3996},{"id":3995},"synchronizing-objects-between-the-dispatchers-and-client-side-channelowners",[3997],{"type":44,"value":3998},"Synchronizing objects between the Dispatchers and client-side ChannelOwners",{"type":29,"tag":30,"props":4000,"children":4001},{},[4002,4004,4009,4011,4016,4018,4023,4025,4030,4032,4038],{"type":44,"value":4003},"The ",{"type":29,"tag":59,"props":4005,"children":4007},{"className":4006},[],[4008],{"type":44,"value":3311},{"type":44,"value":4010}," function is special because it is only called from within the ",{"type":29,"tag":59,"props":4012,"children":4014},{"className":4013},[],[4015],{"type":44,"value":626},{"type":44,"value":4017}," constructor, hence the constructor of each of its subclasses. This method tells the client connection to create a corresponding client-side class which handles messaging to this dispatcher. Moreover, looking into the ",{"type":29,"tag":59,"props":4019,"children":4021},{"className":4020},[],[4022],{"type":44,"value":3311},{"type":44,"value":4024}," implementation, internally it calls ",{"type":29,"tag":59,"props":4026,"children":4028},{"className":4027},[],[4029],{"type":44,"value":3902},{"type":44,"value":4031}," with the ",{"type":29,"tag":59,"props":4033,"children":4035},{"className":4034},[],[4036],{"type":44,"value":4037},"__create__",{"type":44,"value":4039}," parameter:",{"type":29,"tag":52,"props":4041,"children":4044},{"className":54,"code":4042,"filename":4043,"language":56,"meta":7,"style":7},"sendCreate(parent: DispatcherScope, type: string, guid: string, initializer: any, sdkObject?: SdkObject) {\n  const validator = findValidator(type, '', 'Initializer');\n  initializer = validator(initializer, '', { tChannelImpl: this._tChannelImplToWire.bind(this), binary: this._isLocal ? 'buffer' : 'toBase64' });\n  this._sendMessageToClient(parent._guid, type, '__create__', { type, initializer, guid }, sdkObject);\n}\n","packages/playwright-core/src/server/dispatchers/dispatcher.ts",[4045],{"type":29,"tag":59,"props":4046,"children":4047},{"__ignoreMap":7},[4048,4070,4114,4204,4235],{"type":29,"tag":63,"props":4049,"children":4050},{"class":65,"line":66},[4051,4055,4060,4065],{"type":29,"tag":63,"props":4052,"children":4053},{"style":117},[4054],{"type":44,"value":3311},{"type":29,"tag":63,"props":4056,"children":4057},{"style":76},[4058],{"type":44,"value":4059},"(parent: DispatcherScope, type: string, guid: string, initializer: any, sdkObject",{"type":29,"tag":63,"props":4061,"children":4062},{"style":70},[4063],{"type":44,"value":4064},"?:",{"type":29,"tag":63,"props":4066,"children":4067},{"style":76},[4068],{"type":44,"value":4069}," SdkObject) {\n",{"type":29,"tag":63,"props":4071,"children":4072},{"class":65,"line":93},[4073,4077,4082,4086,4091,4096,4101,4105,4110],{"type":29,"tag":63,"props":4074,"children":4075},{"style":70},[4076],{"type":44,"value":144},{"type":29,"tag":63,"props":4078,"children":4079},{"style":394},[4080],{"type":44,"value":4081}," validator",{"type":29,"tag":63,"props":4083,"children":4084},{"style":70},[4085],{"type":44,"value":155},{"type":29,"tag":63,"props":4087,"children":4088},{"style":117},[4089],{"type":44,"value":4090}," findValidator",{"type":29,"tag":63,"props":4092,"children":4093},{"style":76},[4094],{"type":44,"value":4095},"(type, ",{"type":29,"tag":63,"props":4097,"children":4098},{"style":87},[4099],{"type":44,"value":4100},"''",{"type":29,"tag":63,"props":4102,"children":4103},{"style":76},[4104],{"type":44,"value":851},{"type":29,"tag":63,"props":4106,"children":4107},{"style":87},[4108],{"type":44,"value":4109},"'Initializer'",{"type":29,"tag":63,"props":4111,"children":4112},{"style":76},[4113],{"type":44,"value":429},{"type":29,"tag":63,"props":4115,"children":4116},{"class":65,"line":103},[4117,4122,4126,4130,4135,4139,4144,4148,4153,4158,4162,4166,4171,4175,4180,4185,4190,4194,4199],{"type":29,"tag":63,"props":4118,"children":4119},{"style":76},[4120],{"type":44,"value":4121},"  initializer ",{"type":29,"tag":63,"props":4123,"children":4124},{"style":70},[4125],{"type":44,"value":1197},{"type":29,"tag":63,"props":4127,"children":4128},{"style":117},[4129],{"type":44,"value":4081},{"type":29,"tag":63,"props":4131,"children":4132},{"style":76},[4133],{"type":44,"value":4134},"(initializer, ",{"type":29,"tag":63,"props":4136,"children":4137},{"style":87},[4138],{"type":44,"value":4100},{"type":29,"tag":63,"props":4140,"children":4141},{"style":76},[4142],{"type":44,"value":4143},", { tChannelImpl: ",{"type":29,"tag":63,"props":4145,"children":4146},{"style":394},[4147],{"type":44,"value":3262},{"type":29,"tag":63,"props":4149,"children":4150},{"style":76},[4151],{"type":44,"value":4152},"._tChannelImplToWire.",{"type":29,"tag":63,"props":4154,"children":4155},{"style":117},[4156],{"type":44,"value":4157},"bind",{"type":29,"tag":63,"props":4159,"children":4160},{"style":76},[4161],{"type":44,"value":238},{"type":29,"tag":63,"props":4163,"children":4164},{"style":394},[4165],{"type":44,"value":3262},{"type":29,"tag":63,"props":4167,"children":4168},{"style":76},[4169],{"type":44,"value":4170},"), binary: ",{"type":29,"tag":63,"props":4172,"children":4173},{"style":394},[4174],{"type":44,"value":3262},{"type":29,"tag":63,"props":4176,"children":4177},{"style":76},[4178],{"type":44,"value":4179},"._isLocal ",{"type":29,"tag":63,"props":4181,"children":4182},{"style":70},[4183],{"type":44,"value":4184},"?",{"type":29,"tag":63,"props":4186,"children":4187},{"style":87},[4188],{"type":44,"value":4189}," 'buffer'",{"type":29,"tag":63,"props":4191,"children":4192},{"style":70},[4193],{"type":44,"value":3154},{"type":29,"tag":63,"props":4195,"children":4196},{"style":87},[4197],{"type":44,"value":4198}," 'toBase64'",{"type":29,"tag":63,"props":4200,"children":4201},{"style":76},[4202],{"type":44,"value":4203}," });\n",{"type":29,"tag":63,"props":4205,"children":4206},{"class":65,"line":138},[4207,4212,4216,4220,4225,4230],{"type":29,"tag":63,"props":4208,"children":4209},{"style":394},[4210],{"type":44,"value":4211},"  this",{"type":29,"tag":63,"props":4213,"children":4214},{"style":76},[4215],{"type":44,"value":228},{"type":29,"tag":63,"props":4217,"children":4218},{"style":117},[4219],{"type":44,"value":3902},{"type":29,"tag":63,"props":4221,"children":4222},{"style":76},[4223],{"type":44,"value":4224},"(parent._guid, type, ",{"type":29,"tag":63,"props":4226,"children":4227},{"style":87},[4228],{"type":44,"value":4229},"'__create__'",{"type":29,"tag":63,"props":4231,"children":4232},{"style":76},[4233],{"type":44,"value":4234},", { type, initializer, guid }, sdkObject);\n",{"type":29,"tag":63,"props":4236,"children":4237},{"class":65,"line":178},[4238],{"type":29,"tag":63,"props":4239,"children":4240},{"style":76},[4241],{"type":44,"value":257},{"type":29,"tag":30,"props":4243,"children":4244},{},[4245,4247,4252,4254,4259,4261,4267,4269,4274,4276,4281,4283,4288],{"type":44,"value":4246},"so if we search through the ",{"type":29,"tag":59,"props":4248,"children":4250},{"className":4249},[],[4251],{"type":44,"value":1880},{"type":44,"value":4253}," class on the client side, sure enough in its ",{"type":29,"tag":59,"props":4255,"children":4257},{"className":4256},[],[4258],{"type":44,"value":990},{"type":44,"value":4260}," function it has a call to ",{"type":29,"tag":59,"props":4262,"children":4264},{"className":4263},[],[4265],{"type":44,"value":4266},"_createRemoteObject",{"type":44,"value":4268}," for the associated method ",{"type":29,"tag":59,"props":4270,"children":4272},{"className":4271},[],[4273],{"type":44,"value":4037},{"type":44,"value":4275},". This ",{"type":29,"tag":59,"props":4277,"children":4279},{"className":4278},[],[4280],{"type":44,"value":4266},{"type":44,"value":4282}," is what initializes the client-side ",{"type":29,"tag":59,"props":4284,"children":4286},{"className":4285},[],[4287],{"type":44,"value":12},{"type":44,"value":4289}," instance, and is the reason why we call",{"type":29,"tag":52,"props":4291,"children":4293},{"className":54,"code":4292,"language":56,"meta":7,"style":7},"const playwrightAPI = clientConnection.getObjectWithKnownName(\"Playwright\");\n",[4294],{"type":29,"tag":59,"props":4295,"children":4296},{"__ignoreMap":7},[4297],{"type":29,"tag":63,"props":4298,"children":4299},{"class":65,"line":66},[4300,4304,4308,4312,4316,4320,4324,4328],{"type":29,"tag":63,"props":4301,"children":4302},{"style":70},[4303],{"type":44,"value":1781},{"type":29,"tag":63,"props":4305,"children":4306},{"style":394},[4307],{"type":44,"value":1132},{"type":29,"tag":63,"props":4309,"children":4310},{"style":70},[4311],{"type":44,"value":155},{"type":29,"tag":63,"props":4313,"children":4314},{"style":76},[4315],{"type":44,"value":1141},{"type":29,"tag":63,"props":4317,"children":4318},{"style":117},[4319],{"type":44,"value":1146},{"type":29,"tag":63,"props":4321,"children":4322},{"style":76},[4323],{"type":44,"value":238},{"type":29,"tag":63,"props":4325,"children":4326},{"style":87},[4327],{"type":44,"value":3665},{"type":29,"tag":63,"props":4329,"children":4330},{"style":76},[4331],{"type":44,"value":429},{"type":29,"tag":30,"props":4333,"children":4334},{},[4335,4337,4342,4344,4349],{"type":44,"value":4336},"to access the playwright API. But let's dive a little deeper as to what's happening with the message from the ",{"type":29,"tag":59,"props":4338,"children":4340},{"className":4339},[],[4341],{"type":44,"value":2520},{"type":44,"value":4343}," over to the ",{"type":29,"tag":59,"props":4345,"children":4347},{"className":4346},[],[4348],{"type":44,"value":3939},{"type":44,"value":4350},". For the Playwright create message, the message looks something like",{"type":29,"tag":52,"props":4352,"children":4354},{"className":54,"code":4353,"language":56,"meta":7,"style":7},"{\n  guid: '',\n  method: '__create__',\n  params: {\n    type: 'Playwright',\n    initializer: {\n      chromium: { guid: 'browser-type@024d5a494527ece580841844a9a933a6' },\n      firefox: { guid: 'browser-type@fae8f48651c02682ad3b276f0a046d63' },\n      webkit: { guid: 'browser-type@ed1c30ab794ec863fe5b9b208c3635e1' },\n      android: { guid: 'android@832582c466c24c6933d3a5587059e1be' },\n      electron: { guid: 'electron@3829a7608477101154e15c1e25bca9ca' },\n    },\n    guid: 'Playwright'\n  }\n}\n",[4355],{"type":29,"tag":59,"props":4356,"children":4357},{"__ignoreMap":7},[4358,4366,4387,4407,4420,4440,4451,4482,4511,4540,4569,4598,4606,4623,4630],{"type":29,"tag":63,"props":4359,"children":4360},{"class":65,"line":66},[4361],{"type":29,"tag":63,"props":4362,"children":4363},{"style":76},[4364],{"type":44,"value":4365},"{\n",{"type":29,"tag":63,"props":4367,"children":4368},{"class":65,"line":93},[4369,4374,4379,4383],{"type":29,"tag":63,"props":4370,"children":4371},{"style":117},[4372],{"type":44,"value":4373},"  guid",{"type":29,"tag":63,"props":4375,"children":4376},{"style":76},[4377],{"type":44,"value":4378},": ",{"type":29,"tag":63,"props":4380,"children":4381},{"style":87},[4382],{"type":44,"value":4100},{"type":29,"tag":63,"props":4384,"children":4385},{"style":76},[4386],{"type":44,"value":796},{"type":29,"tag":63,"props":4388,"children":4389},{"class":65,"line":103},[4390,4395,4399,4403],{"type":29,"tag":63,"props":4391,"children":4392},{"style":117},[4393],{"type":44,"value":4394},"  method",{"type":29,"tag":63,"props":4396,"children":4397},{"style":76},[4398],{"type":44,"value":4378},{"type":29,"tag":63,"props":4400,"children":4401},{"style":87},[4402],{"type":44,"value":4229},{"type":29,"tag":63,"props":4404,"children":4405},{"style":76},[4406],{"type":44,"value":796},{"type":29,"tag":63,"props":4408,"children":4409},{"class":65,"line":138},[4410,4415],{"type":29,"tag":63,"props":4411,"children":4412},{"style":117},[4413],{"type":44,"value":4414},"  params",{"type":29,"tag":63,"props":4416,"children":4417},{"style":76},[4418],{"type":44,"value":4419},": {\n",{"type":29,"tag":63,"props":4421,"children":4422},{"class":65,"line":178},[4423,4427,4431,4436],{"type":29,"tag":63,"props":4424,"children":4425},{"style":117},[4426],{"type":44,"value":2981},{"type":29,"tag":63,"props":4428,"children":4429},{"style":76},[4430],{"type":44,"value":4378},{"type":29,"tag":63,"props":4432,"children":4433},{"style":87},[4434],{"type":44,"value":4435},"'Playwright'",{"type":29,"tag":63,"props":4437,"children":4438},{"style":76},[4439],{"type":44,"value":796},{"type":29,"tag":63,"props":4441,"children":4442},{"class":65,"line":213},[4443,4447],{"type":29,"tag":63,"props":4444,"children":4445},{"style":117},[4446],{"type":44,"value":3001},{"type":29,"tag":63,"props":4448,"children":4449},{"style":76},[4450],{"type":44,"value":4419},{"type":29,"tag":63,"props":4452,"children":4453},{"class":65,"line":251},[4454,4459,4464,4468,4472,4477],{"type":29,"tag":63,"props":4455,"children":4456},{"style":117},[4457],{"type":44,"value":4458},"      chromium",{"type":29,"tag":63,"props":4460,"children":4461},{"style":76},[4462],{"type":44,"value":4463},": { ",{"type":29,"tag":63,"props":4465,"children":4466},{"style":117},[4467],{"type":44,"value":1994},{"type":29,"tag":63,"props":4469,"children":4470},{"style":76},[4471],{"type":44,"value":4378},{"type":29,"tag":63,"props":4473,"children":4474},{"style":87},[4475],{"type":44,"value":4476},"'browser-type@024d5a494527ece580841844a9a933a6'",{"type":29,"tag":63,"props":4478,"children":4479},{"style":76},[4480],{"type":44,"value":4481}," },\n",{"type":29,"tag":63,"props":4483,"children":4484},{"class":65,"line":862},[4485,4490,4494,4498,4502,4507],{"type":29,"tag":63,"props":4486,"children":4487},{"style":117},[4488],{"type":44,"value":4489},"      firefox",{"type":29,"tag":63,"props":4491,"children":4492},{"style":76},[4493],{"type":44,"value":4463},{"type":29,"tag":63,"props":4495,"children":4496},{"style":117},[4497],{"type":44,"value":1994},{"type":29,"tag":63,"props":4499,"children":4500},{"style":76},[4501],{"type":44,"value":4378},{"type":29,"tag":63,"props":4503,"children":4504},{"style":87},[4505],{"type":44,"value":4506},"'browser-type@fae8f48651c02682ad3b276f0a046d63'",{"type":29,"tag":63,"props":4508,"children":4509},{"style":76},[4510],{"type":44,"value":4481},{"type":29,"tag":63,"props":4512,"children":4513},{"class":65,"line":881},[4514,4519,4523,4527,4531,4536],{"type":29,"tag":63,"props":4515,"children":4516},{"style":117},[4517],{"type":44,"value":4518},"      webkit",{"type":29,"tag":63,"props":4520,"children":4521},{"style":76},[4522],{"type":44,"value":4463},{"type":29,"tag":63,"props":4524,"children":4525},{"style":117},[4526],{"type":44,"value":1994},{"type":29,"tag":63,"props":4528,"children":4529},{"style":76},[4530],{"type":44,"value":4378},{"type":29,"tag":63,"props":4532,"children":4533},{"style":87},[4534],{"type":44,"value":4535},"'browser-type@ed1c30ab794ec863fe5b9b208c3635e1'",{"type":29,"tag":63,"props":4537,"children":4538},{"style":76},[4539],{"type":44,"value":4481},{"type":29,"tag":63,"props":4541,"children":4542},{"class":65,"line":926},[4543,4548,4552,4556,4560,4565],{"type":29,"tag":63,"props":4544,"children":4545},{"style":117},[4546],{"type":44,"value":4547},"      android",{"type":29,"tag":63,"props":4549,"children":4550},{"style":76},[4551],{"type":44,"value":4463},{"type":29,"tag":63,"props":4553,"children":4554},{"style":117},[4555],{"type":44,"value":1994},{"type":29,"tag":63,"props":4557,"children":4558},{"style":76},[4559],{"type":44,"value":4378},{"type":29,"tag":63,"props":4561,"children":4562},{"style":87},[4563],{"type":44,"value":4564},"'android@832582c466c24c6933d3a5587059e1be'",{"type":29,"tag":63,"props":4566,"children":4567},{"style":76},[4568],{"type":44,"value":4481},{"type":29,"tag":63,"props":4570,"children":4571},{"class":65,"line":934},[4572,4577,4581,4585,4589,4594],{"type":29,"tag":63,"props":4573,"children":4574},{"style":117},[4575],{"type":44,"value":4576},"      electron",{"type":29,"tag":63,"props":4578,"children":4579},{"style":76},[4580],{"type":44,"value":4463},{"type":29,"tag":63,"props":4582,"children":4583},{"style":117},[4584],{"type":44,"value":1994},{"type":29,"tag":63,"props":4586,"children":4587},{"style":76},[4588],{"type":44,"value":4378},{"type":29,"tag":63,"props":4590,"children":4591},{"style":87},[4592],{"type":44,"value":4593},"'electron@3829a7608477101154e15c1e25bca9ca'",{"type":29,"tag":63,"props":4595,"children":4596},{"style":76},[4597],{"type":44,"value":4481},{"type":29,"tag":63,"props":4599,"children":4600},{"class":65,"line":943},[4601],{"type":29,"tag":63,"props":4602,"children":4603},{"style":76},[4604],{"type":44,"value":4605},"    },\n",{"type":29,"tag":63,"props":4607,"children":4608},{"class":65,"line":23},[4609,4614,4618],{"type":29,"tag":63,"props":4610,"children":4611},{"style":117},[4612],{"type":44,"value":4613},"    guid",{"type":29,"tag":63,"props":4615,"children":4616},{"style":76},[4617],{"type":44,"value":4378},{"type":29,"tag":63,"props":4619,"children":4620},{"style":87},[4621],{"type":44,"value":4622},"'Playwright'\n",{"type":29,"tag":63,"props":4624,"children":4625},{"class":65,"line":998},[4626],{"type":29,"tag":63,"props":4627,"children":4628},{"style":76},[4629],{"type":44,"value":2063},{"type":29,"tag":63,"props":4631,"children":4632},{"class":65,"line":1030},[4633],{"type":29,"tag":63,"props":4634,"children":4635},{"style":76},[4636],{"type":44,"value":257},{"type":29,"tag":30,"props":4638,"children":4639},{},[4640,4642,4647,4649,4654,4656,4661,4663,4669,4671,4676,4678,4684],{"type":44,"value":4641},"note before this there are messages for each of the device types, and the ",{"type":29,"tag":59,"props":4643,"children":4645},{"className":4644},[],[4646],{"type":44,"value":3939},{"type":44,"value":4648}," constructs corresponding objects which provide a public API for these dispatchers within the server. These API's are provided by subclasses of the ",{"type":29,"tag":59,"props":4650,"children":4652},{"className":4651},[],[4653],{"type":44,"value":588},{"type":44,"value":4655}," class, which is a concept for a later section. For now, let's trace what happens in the ",{"type":29,"tag":59,"props":4657,"children":4659},{"className":4658},[],[4660],{"type":44,"value":3939},{"type":44,"value":4662}," for the ",{"type":29,"tag":59,"props":4664,"children":4666},{"className":4665},[],[4667],{"type":44,"value":4668},"type: 'Playwright'",{"type":44,"value":4670}," message. As mentioned before, the message is put through the ",{"type":29,"tag":59,"props":4672,"children":4674},{"className":4673},[],[4675],{"type":44,"value":2528},{"type":44,"value":4677}," function which then calls the ",{"type":29,"tag":59,"props":4679,"children":4681},{"className":4680},[],[4682],{"type":44,"value":4683},"clientConnection._createRemoteObject",{"type":44,"value":4685}," function with the following parameters",{"type":29,"tag":52,"props":4687,"children":4689},{"className":54,"code":4688,"filename":1886,"language":56,"meta":7,"style":7},"this._createRemoteObject(\n  \"\", // parentGuid - corresponds to Root, the root ChannelOwner\n  \"Playwright\", // type\n  \"Playwright\", // guid\n  {\n    // initializer\n    chromium: { guid: \"browser-type@024d5a494527ece580841844a9a933a6\" },\n    firefox: { guid: \"browser-type@fae8f48651c02682ad3b276f0a046d63\" },\n    webkit: { guid: \"browser-type@ed1c30ab794ec863fe5b9b208c3635e1\" },\n    android: { guid: \"android@832582c466c24c6933d3a5587059e1be\" },\n    electron: { guid: \"electron@3829a7608477101154e15c1e25bca9ca\" },\n  }\n);\n",[4690],{"type":29,"tag":59,"props":4691,"children":4692},{"__ignoreMap":7},[4693,4712,4729,4746,4762,4770,4778,4795,4812,4829,4846,4863,4870],{"type":29,"tag":63,"props":4694,"children":4695},{"class":65,"line":66},[4696,4700,4704,4708],{"type":29,"tag":63,"props":4697,"children":4698},{"style":394},[4699],{"type":44,"value":3262},{"type":29,"tag":63,"props":4701,"children":4702},{"style":76},[4703],{"type":44,"value":228},{"type":29,"tag":63,"props":4705,"children":4706},{"style":117},[4707],{"type":44,"value":4266},{"type":29,"tag":63,"props":4709,"children":4710},{"style":76},[4711],{"type":44,"value":1151},{"type":29,"tag":63,"props":4713,"children":4714},{"class":65,"line":93},[4715,4720,4724],{"type":29,"tag":63,"props":4716,"children":4717},{"style":87},[4718],{"type":44,"value":4719},"  \"\"",{"type":29,"tag":63,"props":4721,"children":4722},{"style":76},[4723],{"type":44,"value":851},{"type":29,"tag":63,"props":4725,"children":4726},{"style":916},[4727],{"type":44,"value":4728},"// parentGuid - corresponds to Root, the root ChannelOwner\n",{"type":29,"tag":63,"props":4730,"children":4731},{"class":65,"line":103},[4732,4737,4741],{"type":29,"tag":63,"props":4733,"children":4734},{"style":87},[4735],{"type":44,"value":4736},"  \"Playwright\"",{"type":29,"tag":63,"props":4738,"children":4739},{"style":76},[4740],{"type":44,"value":851},{"type":29,"tag":63,"props":4742,"children":4743},{"style":916},[4744],{"type":44,"value":4745},"// type\n",{"type":29,"tag":63,"props":4747,"children":4748},{"class":65,"line":138},[4749,4753,4757],{"type":29,"tag":63,"props":4750,"children":4751},{"style":87},[4752],{"type":44,"value":4736},{"type":29,"tag":63,"props":4754,"children":4755},{"style":76},[4756],{"type":44,"value":851},{"type":29,"tag":63,"props":4758,"children":4759},{"style":916},[4760],{"type":44,"value":4761},"// guid\n",{"type":29,"tag":63,"props":4763,"children":4764},{"class":65,"line":178},[4765],{"type":29,"tag":63,"props":4766,"children":4767},{"style":76},[4768],{"type":44,"value":4769},"  {\n",{"type":29,"tag":63,"props":4771,"children":4772},{"class":65,"line":213},[4773],{"type":29,"tag":63,"props":4774,"children":4775},{"style":916},[4776],{"type":44,"value":4777},"    // initializer\n",{"type":29,"tag":63,"props":4779,"children":4780},{"class":65,"line":251},[4781,4786,4791],{"type":29,"tag":63,"props":4782,"children":4783},{"style":76},[4784],{"type":44,"value":4785},"    chromium: { guid: ",{"type":29,"tag":63,"props":4787,"children":4788},{"style":87},[4789],{"type":44,"value":4790},"\"browser-type@024d5a494527ece580841844a9a933a6\"",{"type":29,"tag":63,"props":4792,"children":4793},{"style":76},[4794],{"type":44,"value":4481},{"type":29,"tag":63,"props":4796,"children":4797},{"class":65,"line":862},[4798,4803,4808],{"type":29,"tag":63,"props":4799,"children":4800},{"style":76},[4801],{"type":44,"value":4802},"    firefox: { guid: ",{"type":29,"tag":63,"props":4804,"children":4805},{"style":87},[4806],{"type":44,"value":4807},"\"browser-type@fae8f48651c02682ad3b276f0a046d63\"",{"type":29,"tag":63,"props":4809,"children":4810},{"style":76},[4811],{"type":44,"value":4481},{"type":29,"tag":63,"props":4813,"children":4814},{"class":65,"line":881},[4815,4820,4825],{"type":29,"tag":63,"props":4816,"children":4817},{"style":76},[4818],{"type":44,"value":4819},"    webkit: { guid: ",{"type":29,"tag":63,"props":4821,"children":4822},{"style":87},[4823],{"type":44,"value":4824},"\"browser-type@ed1c30ab794ec863fe5b9b208c3635e1\"",{"type":29,"tag":63,"props":4826,"children":4827},{"style":76},[4828],{"type":44,"value":4481},{"type":29,"tag":63,"props":4830,"children":4831},{"class":65,"line":926},[4832,4837,4842],{"type":29,"tag":63,"props":4833,"children":4834},{"style":76},[4835],{"type":44,"value":4836},"    android: { guid: ",{"type":29,"tag":63,"props":4838,"children":4839},{"style":87},[4840],{"type":44,"value":4841},"\"android@832582c466c24c6933d3a5587059e1be\"",{"type":29,"tag":63,"props":4843,"children":4844},{"style":76},[4845],{"type":44,"value":4481},{"type":29,"tag":63,"props":4847,"children":4848},{"class":65,"line":934},[4849,4854,4859],{"type":29,"tag":63,"props":4850,"children":4851},{"style":76},[4852],{"type":44,"value":4853},"    electron: { guid: ",{"type":29,"tag":63,"props":4855,"children":4856},{"style":87},[4857],{"type":44,"value":4858},"\"electron@3829a7608477101154e15c1e25bca9ca\"",{"type":29,"tag":63,"props":4860,"children":4861},{"style":76},[4862],{"type":44,"value":4481},{"type":29,"tag":63,"props":4864,"children":4865},{"class":65,"line":943},[4866],{"type":29,"tag":63,"props":4867,"children":4868},{"style":76},[4869],{"type":44,"value":2063},{"type":29,"tag":63,"props":4871,"children":4872},{"class":65,"line":23},[4873],{"type":29,"tag":63,"props":4874,"children":4875},{"style":76},[4876],{"type":44,"value":429},{"type":29,"tag":30,"props":4878,"children":4879},{},[4880,4882,4887,4889,4895],{"type":44,"value":4881},"in the ",{"type":29,"tag":59,"props":4883,"children":4885},{"className":4884},[],[4886],{"type":44,"value":4683},{"type":44,"value":4888}," function, there is a transformation of the data and then a large ",{"type":29,"tag":59,"props":4890,"children":4892},{"className":4891},[],[4893],{"type":44,"value":4894},"switch-case",{"type":44,"value":4896}," function instantiating the corresponding client class.",{"type":29,"tag":52,"props":4898,"children":4900},{"className":54,"code":4899,"filename":1886,"language":56,"meta":7,"style":7},"_createRemoteObject(parentGuid: string, type: string, guid: string, initializer: any) {\n  const parent = this._objects.get(parentGuid); // here the parentGuid is ''\n  if (!parent)\n    throw new Error(`Cannot find parent object ${parentGuid} to create ${guid}`);\n  let result: ChannelOwner\u003Cany>;\n  const validator = findValidator(type, '', 'Initializer');\n  initializer = validator(\n    initializer,\n    '',\n    {\n      tChannelImpl: this._tChannelImplFromWire.bind(this),\n      binary: this._rawBuffers ? 'buffer' : 'fromBase64'\n    }\n  );\n  switch (type) {\n    // ...\n    case 'Playwright':\n      result = new Playwright(parent, type, guid, initializer);\n      break;\n    // ...\n  }\n  return result;\n}\n",[4901],{"type":29,"tag":59,"props":4902,"children":4903},{"__ignoreMap":7},[4904,4916,4954,4975,5024,5060,5099,5118,5126,5138,5146,5180,5214,5222,5229,5242,5250,5268,5293,5305,5312,5319,5331],{"type":29,"tag":63,"props":4905,"children":4906},{"class":65,"line":66},[4907,4911],{"type":29,"tag":63,"props":4908,"children":4909},{"style":117},[4910],{"type":44,"value":4266},{"type":29,"tag":63,"props":4912,"children":4913},{"style":76},[4914],{"type":44,"value":4915},"(parentGuid: string, type: string, guid: string, initializer: any) {\n",{"type":29,"tag":63,"props":4917,"children":4918},{"class":65,"line":93},[4919,4923,4928,4932,4936,4940,4944,4949],{"type":29,"tag":63,"props":4920,"children":4921},{"style":70},[4922],{"type":44,"value":144},{"type":29,"tag":63,"props":4924,"children":4925},{"style":394},[4926],{"type":44,"value":4927}," parent",{"type":29,"tag":63,"props":4929,"children":4930},{"style":70},[4931],{"type":44,"value":155},{"type":29,"tag":63,"props":4933,"children":4934},{"style":394},[4935],{"type":44,"value":2033},{"type":29,"tag":63,"props":4937,"children":4938},{"style":76},[4939],{"type":44,"value":2038},{"type":29,"tag":63,"props":4941,"children":4942},{"style":117},[4943],{"type":44,"value":1558},{"type":29,"tag":63,"props":4945,"children":4946},{"style":76},[4947],{"type":44,"value":4948},"(parentGuid); ",{"type":29,"tag":63,"props":4950,"children":4951},{"style":916},[4952],{"type":44,"value":4953},"// here the parentGuid is ''\n",{"type":29,"tag":63,"props":4955,"children":4956},{"class":65,"line":103},[4957,4962,4966,4970],{"type":29,"tag":63,"props":4958,"children":4959},{"style":70},[4960],{"type":44,"value":4961},"  if",{"type":29,"tag":63,"props":4963,"children":4964},{"style":76},[4965],{"type":44,"value":963},{"type":29,"tag":63,"props":4967,"children":4968},{"style":70},[4969],{"type":44,"value":1568},{"type":29,"tag":63,"props":4971,"children":4972},{"style":76},[4973],{"type":44,"value":4974},"parent)\n",{"type":29,"tag":63,"props":4976,"children":4977},{"class":65,"line":138},[4978,4983,4987,4992,4996,5001,5006,5011,5015,5020],{"type":29,"tag":63,"props":4979,"children":4980},{"style":70},[4981],{"type":44,"value":4982},"    throw",{"type":29,"tag":63,"props":4984,"children":4985},{"style":70},[4986],{"type":44,"value":832},{"type":29,"tag":63,"props":4988,"children":4989},{"style":117},[4990],{"type":44,"value":4991}," Error",{"type":29,"tag":63,"props":4993,"children":4994},{"style":76},[4995],{"type":44,"value":238},{"type":29,"tag":63,"props":4997,"children":4998},{"style":87},[4999],{"type":44,"value":5000},"`Cannot find parent object ${",{"type":29,"tag":63,"props":5002,"children":5003},{"style":76},[5004],{"type":44,"value":5005},"parentGuid",{"type":29,"tag":63,"props":5007,"children":5008},{"style":87},[5009],{"type":44,"value":5010},"} to create ${",{"type":29,"tag":63,"props":5012,"children":5013},{"style":76},[5014],{"type":44,"value":1994},{"type":29,"tag":63,"props":5016,"children":5017},{"style":87},[5018],{"type":44,"value":5019},"}`",{"type":29,"tag":63,"props":5021,"children":5022},{"style":76},[5023],{"type":44,"value":429},{"type":29,"tag":63,"props":5025,"children":5026},{"class":65,"line":178},[5027,5032,5037,5041,5046,5050,5055],{"type":29,"tag":63,"props":5028,"children":5029},{"style":70},[5030],{"type":44,"value":5031},"  let",{"type":29,"tag":63,"props":5033,"children":5034},{"style":76},[5035],{"type":44,"value":5036}," result",{"type":29,"tag":63,"props":5038,"children":5039},{"style":70},[5040],{"type":44,"value":700},{"type":29,"tag":63,"props":5042,"children":5043},{"style":117},[5044],{"type":44,"value":5045}," ChannelOwner",{"type":29,"tag":63,"props":5047,"children":5048},{"style":76},[5049],{"type":44,"value":1951},{"type":29,"tag":63,"props":5051,"children":5052},{"style":394},[5053],{"type":44,"value":5054},"any",{"type":29,"tag":63,"props":5056,"children":5057},{"style":76},[5058],{"type":44,"value":5059},">;\n",{"type":29,"tag":63,"props":5061,"children":5062},{"class":65,"line":213},[5063,5067,5071,5075,5079,5083,5087,5091,5095],{"type":29,"tag":63,"props":5064,"children":5065},{"style":70},[5066],{"type":44,"value":144},{"type":29,"tag":63,"props":5068,"children":5069},{"style":394},[5070],{"type":44,"value":4081},{"type":29,"tag":63,"props":5072,"children":5073},{"style":70},[5074],{"type":44,"value":155},{"type":29,"tag":63,"props":5076,"children":5077},{"style":117},[5078],{"type":44,"value":4090},{"type":29,"tag":63,"props":5080,"children":5081},{"style":76},[5082],{"type":44,"value":4095},{"type":29,"tag":63,"props":5084,"children":5085},{"style":87},[5086],{"type":44,"value":4100},{"type":29,"tag":63,"props":5088,"children":5089},{"style":76},[5090],{"type":44,"value":851},{"type":29,"tag":63,"props":5092,"children":5093},{"style":87},[5094],{"type":44,"value":4109},{"type":29,"tag":63,"props":5096,"children":5097},{"style":76},[5098],{"type":44,"value":429},{"type":29,"tag":63,"props":5100,"children":5101},{"class":65,"line":251},[5102,5106,5110,5114],{"type":29,"tag":63,"props":5103,"children":5104},{"style":76},[5105],{"type":44,"value":4121},{"type":29,"tag":63,"props":5107,"children":5108},{"style":70},[5109],{"type":44,"value":1197},{"type":29,"tag":63,"props":5111,"children":5112},{"style":117},[5113],{"type":44,"value":4081},{"type":29,"tag":63,"props":5115,"children":5116},{"style":76},[5117],{"type":44,"value":1151},{"type":29,"tag":63,"props":5119,"children":5120},{"class":65,"line":862},[5121],{"type":29,"tag":63,"props":5122,"children":5123},{"style":76},[5124],{"type":44,"value":5125},"    initializer,\n",{"type":29,"tag":63,"props":5127,"children":5128},{"class":65,"line":881},[5129,5134],{"type":29,"tag":63,"props":5130,"children":5131},{"style":87},[5132],{"type":44,"value":5133},"    ''",{"type":29,"tag":63,"props":5135,"children":5136},{"style":76},[5137],{"type":44,"value":796},{"type":29,"tag":63,"props":5139,"children":5140},{"class":65,"line":926},[5141],{"type":29,"tag":63,"props":5142,"children":5143},{"style":76},[5144],{"type":44,"value":5145},"    {\n",{"type":29,"tag":63,"props":5147,"children":5148},{"class":65,"line":934},[5149,5154,5158,5163,5167,5171,5175],{"type":29,"tag":63,"props":5150,"children":5151},{"style":76},[5152],{"type":44,"value":5153},"      tChannelImpl: ",{"type":29,"tag":63,"props":5155,"children":5156},{"style":394},[5157],{"type":44,"value":3262},{"type":29,"tag":63,"props":5159,"children":5160},{"style":76},[5161],{"type":44,"value":5162},"._tChannelImplFromWire.",{"type":29,"tag":63,"props":5164,"children":5165},{"style":117},[5166],{"type":44,"value":4157},{"type":29,"tag":63,"props":5168,"children":5169},{"style":76},[5170],{"type":44,"value":238},{"type":29,"tag":63,"props":5172,"children":5173},{"style":394},[5174],{"type":44,"value":3262},{"type":29,"tag":63,"props":5176,"children":5177},{"style":76},[5178],{"type":44,"value":5179},"),\n",{"type":29,"tag":63,"props":5181,"children":5182},{"class":65,"line":943},[5183,5188,5192,5197,5201,5205,5209],{"type":29,"tag":63,"props":5184,"children":5185},{"style":76},[5186],{"type":44,"value":5187},"      binary: ",{"type":29,"tag":63,"props":5189,"children":5190},{"style":394},[5191],{"type":44,"value":3262},{"type":29,"tag":63,"props":5193,"children":5194},{"style":76},[5195],{"type":44,"value":5196},"._rawBuffers ",{"type":29,"tag":63,"props":5198,"children":5199},{"style":70},[5200],{"type":44,"value":4184},{"type":29,"tag":63,"props":5202,"children":5203},{"style":87},[5204],{"type":44,"value":4189},{"type":29,"tag":63,"props":5206,"children":5207},{"style":70},[5208],{"type":44,"value":3154},{"type":29,"tag":63,"props":5210,"children":5211},{"style":87},[5212],{"type":44,"value":5213}," 'fromBase64'\n",{"type":29,"tag":63,"props":5215,"children":5216},{"class":65,"line":23},[5217],{"type":29,"tag":63,"props":5218,"children":5219},{"style":76},[5220],{"type":44,"value":5221},"    }\n",{"type":29,"tag":63,"props":5223,"children":5224},{"class":65,"line":998},[5225],{"type":29,"tag":63,"props":5226,"children":5227},{"style":76},[5228],{"type":44,"value":1228},{"type":29,"tag":63,"props":5230,"children":5231},{"class":65,"line":1030},[5232,5237],{"type":29,"tag":63,"props":5233,"children":5234},{"style":70},[5235],{"type":44,"value":5236},"  switch",{"type":29,"tag":63,"props":5238,"children":5239},{"style":76},[5240],{"type":44,"value":5241}," (type) {\n",{"type":29,"tag":63,"props":5243,"children":5244},{"class":65,"line":1047},[5245],{"type":29,"tag":63,"props":5246,"children":5247},{"style":916},[5248],{"type":44,"value":5249},"    // ...\n",{"type":29,"tag":63,"props":5251,"children":5252},{"class":65,"line":1055},[5253,5258,5263],{"type":29,"tag":63,"props":5254,"children":5255},{"style":70},[5256],{"type":44,"value":5257},"    case",{"type":29,"tag":63,"props":5259,"children":5260},{"style":87},[5261],{"type":44,"value":5262}," 'Playwright'",{"type":29,"tag":63,"props":5264,"children":5265},{"style":76},[5266],{"type":44,"value":5267},":\n",{"type":29,"tag":63,"props":5269,"children":5270},{"class":65,"line":1086},[5271,5276,5280,5284,5288],{"type":29,"tag":63,"props":5272,"children":5273},{"style":76},[5274],{"type":44,"value":5275},"      result ",{"type":29,"tag":63,"props":5277,"children":5278},{"style":70},[5279],{"type":44,"value":1197},{"type":29,"tag":63,"props":5281,"children":5282},{"style":70},[5283],{"type":44,"value":832},{"type":29,"tag":63,"props":5285,"children":5286},{"style":117},[5287],{"type":44,"value":3597},{"type":29,"tag":63,"props":5289,"children":5290},{"style":76},[5291],{"type":44,"value":5292},"(parent, type, guid, initializer);\n",{"type":29,"tag":63,"props":5294,"children":5295},{"class":65,"line":1094},[5296,5301],{"type":29,"tag":63,"props":5297,"children":5298},{"style":70},[5299],{"type":44,"value":5300},"      break",{"type":29,"tag":63,"props":5302,"children":5303},{"style":76},[5304],{"type":44,"value":1183},{"type":29,"tag":63,"props":5306,"children":5307},{"class":65,"line":1103},[5308],{"type":29,"tag":63,"props":5309,"children":5310},{"style":916},[5311],{"type":44,"value":5249},{"type":29,"tag":63,"props":5313,"children":5314},{"class":65,"line":1122},[5315],{"type":29,"tag":63,"props":5316,"children":5317},{"style":76},[5318],{"type":44,"value":2063},{"type":29,"tag":63,"props":5320,"children":5321},{"class":65,"line":1154},[5322,5326],{"type":29,"tag":63,"props":5323,"children":5324},{"style":70},[5325],{"type":44,"value":1643},{"type":29,"tag":63,"props":5327,"children":5328},{"style":76},[5329],{"type":44,"value":5330}," result;\n",{"type":29,"tag":63,"props":5332,"children":5333},{"class":65,"line":1163},[5334],{"type":29,"tag":63,"props":5335,"children":5336},{"style":76},[5337],{"type":44,"value":257},{"type":29,"tag":30,"props":5339,"children":5340},{},[5341,5343,5349,5350,5356,5358,5363,5365,5370,5372,5377,5379,5384,5386,5391,5393,5399,5401,5406,5408,5413,5415,5421],{"type":44,"value":5342},"The parameter ",{"type":29,"tag":59,"props":5344,"children":5346},{"className":5345},[],[5347],{"type":44,"value":5348},"tChannelImpl: _tChannelImplFromWire",{"type":44,"value":3820},{"type":29,"tag":59,"props":5351,"children":5353},{"className":5352},[],[5354],{"type":44,"value":5355},"validator",{"type":44,"value":5357}," function is responsible for taking the initializer object above, which contains a guid for each browser, and convert it to the corresponding object stored in the ",{"type":29,"tag":59,"props":5359,"children":5361},{"className":5360},[],[5362],{"type":44,"value":2088},{"type":44,"value":5364}," variable in the ",{"type":29,"tag":59,"props":5366,"children":5368},{"className":5367},[],[5369],{"type":44,"value":1880},{"type":44,"value":5371}," class. If you look at the type definition in ",{"type":29,"tag":59,"props":5373,"children":5375},{"className":5374},[],[5376],{"type":44,"value":1880},{"type":44,"value":5378}," the ",{"type":29,"tag":59,"props":5380,"children":5382},{"className":5381},[],[5383],{"type":44,"value":2088},{"type":44,"value":5385}," variable is a map returning one of the ",{"type":29,"tag":59,"props":5387,"children":5389},{"className":5388},[],[5390],{"type":44,"value":588},{"type":44,"value":5392}," subclasses. So in the result above for the ",{"type":29,"tag":59,"props":5394,"children":5396},{"className":5395},[],[5397],{"type":44,"value":5398},"case: 'Playwright'",{"type":44,"value":5400},", it returns a ",{"type":29,"tag":59,"props":5402,"children":5404},{"className":5403},[],[5405],{"type":44,"value":12},{"type":44,"value":5407}," instance, which is a subclass of ",{"type":29,"tag":59,"props":5409,"children":5411},{"className":5410},[],[5412],{"type":44,"value":588},{"type":44,"value":5414},", defined in ",{"type":29,"tag":59,"props":5416,"children":5418},{"className":5417},[],[5419],{"type":44,"value":5420},"client/playwright.ts",{"type":44,"value":228},{"type":29,"tag":52,"props":5423,"children":5425},{"className":54,"code":5424,"filename":1886,"language":56,"meta":7,"style":7},"class Connection extends EventEmitter {\n  _objects: Map\u003CString, ChannelOwner>;\n}\n",[5426],{"type":29,"tag":59,"props":5427,"children":5428},{"__ignoreMap":7},[5429,5452,5489],{"type":29,"tag":63,"props":5430,"children":5431},{"class":65,"line":66},[5432,5436,5440,5444,5448],{"type":29,"tag":63,"props":5433,"children":5434},{"style":70},[5435],{"type":44,"value":2734},{"type":29,"tag":63,"props":5437,"children":5438},{"style":117},[5439],{"type":44,"value":837},{"type":29,"tag":63,"props":5441,"children":5442},{"style":70},[5443],{"type":44,"value":1911},{"type":29,"tag":63,"props":5445,"children":5446},{"style":117},[5447],{"type":44,"value":1916},{"type":29,"tag":63,"props":5449,"children":5450},{"style":76},[5451],{"type":44,"value":135},{"type":29,"tag":63,"props":5453,"children":5454},{"class":65,"line":93},[5455,5460,5464,5468,5472,5477,5481,5485],{"type":29,"tag":63,"props":5456,"children":5457},{"style":147},[5458],{"type":44,"value":5459},"  _objects",{"type":29,"tag":63,"props":5461,"children":5462},{"style":70},[5463],{"type":44,"value":700},{"type":29,"tag":63,"props":5465,"children":5466},{"style":117},[5467],{"type":44,"value":1946},{"type":29,"tag":63,"props":5469,"children":5470},{"style":76},[5471],{"type":44,"value":1951},{"type":29,"tag":63,"props":5473,"children":5474},{"style":117},[5475],{"type":44,"value":5476},"String",{"type":29,"tag":63,"props":5478,"children":5479},{"style":76},[5480],{"type":44,"value":851},{"type":29,"tag":63,"props":5482,"children":5483},{"style":117},[5484],{"type":44,"value":588},{"type":29,"tag":63,"props":5486,"children":5487},{"style":76},[5488],{"type":44,"value":5059},{"type":29,"tag":63,"props":5490,"children":5491},{"class":65,"line":103},[5492],{"type":29,"tag":63,"props":5493,"children":5494},{"style":76},[5495],{"type":44,"value":257},{"type":29,"tag":30,"props":5497,"children":5498},{},[5499,5500,5506,5508,5514,5516,5521,5523,5528,5530,5535,5537,5543,5545,5551,5552,5558,5560,5566,5568,5573],{"type":44,"value":4003},{"type":29,"tag":59,"props":5501,"children":5503},{"className":5502},[],[5504],{"type":44,"value":5505},"_tChannelImplFromWire",{"type":44,"value":5507}," function is responsible for turning the ",{"type":29,"tag":59,"props":5509,"children":5511},{"className":5510},[],[5512],{"type":44,"value":5513},"initializer",{"type":44,"value":5515}," parameter in the constructor for ",{"type":29,"tag":59,"props":5517,"children":5519},{"className":5518},[],[5520],{"type":44,"value":12},{"type":44,"value":5522}," into the ",{"type":29,"tag":59,"props":5524,"children":5526},{"className":5525},[],[5527],{"type":44,"value":588},{"type":44,"value":5529}," subclasses for each of the drivers (chrome, firefox, etc.). Note before the ",{"type":29,"tag":59,"props":5531,"children":5533},{"className":5532},[],[5534],{"type":44,"value":12},{"type":44,"value":5536}," message was sent over to the client, there were messages for each of the ",{"type":29,"tag":59,"props":5538,"children":5540},{"className":5539},[],[5541],{"type":44,"value":5542},"BrowserType",{"type":44,"value":5544}," objects with name ",{"type":29,"tag":59,"props":5546,"children":5548},{"className":5547},[],[5549],{"type":44,"value":5550},"'chrome'",{"type":44,"value":851},{"type":29,"tag":59,"props":5553,"children":5555},{"className":5554},[],[5556],{"type":44,"value":5557},"'firefox'",{"type":44,"value":5559},", etc. If you inspect this object manually, you will find many ",{"type":29,"tag":59,"props":5561,"children":5563},{"className":5562},[],[5564],{"type":44,"value":5565},"EventEmitter",{"type":44,"value":5567}," objects in the ",{"type":29,"tag":59,"props":5569,"children":5571},{"className":5570},[],[5572],{"type":44,"value":5513},{"type":44,"value":2685},{"type":29,"tag":30,"props":5575,"children":5576},{},[5577,5579,5585,5587,5592,5594,5600,5602,5607,5609,5615,5617,5622,5624,5629,5631,5636],{"type":44,"value":5578},"The other main point to note is the ",{"type":29,"tag":59,"props":5580,"children":5582},{"className":5581},[],[5583],{"type":44,"value":5584},"Root",{"type":44,"value":5586}," design pattern is used on the client side as well. The ",{"type":29,"tag":59,"props":5588,"children":5590},{"className":5589},[],[5591],{"type":44,"value":3418},{"type":44,"value":5593}," corresponding to the ",{"type":29,"tag":59,"props":5595,"children":5597},{"className":5596},[],[5598],{"type":44,"value":5599},"guid=''",{"type":44,"value":5601}," is an instance of the ",{"type":29,"tag":59,"props":5603,"children":5605},{"className":5604},[],[5606],{"type":44,"value":5584},{"type":44,"value":5608}," class, defined in ",{"type":29,"tag":59,"props":5610,"children":5612},{"className":5611},[],[5613],{"type":44,"value":5614},"client/connection.ts",{"type":44,"value":5616},". All this class acts as is a wrapper around the ",{"type":29,"tag":59,"props":5618,"children":5620},{"className":5619},[],[5621],{"type":44,"value":3939},{"type":44,"value":5623},", giving every subclass of ",{"type":29,"tag":59,"props":5625,"children":5627},{"className":5626},[],[5628],{"type":44,"value":588},{"type":44,"value":5630}," access to the ",{"type":29,"tag":59,"props":5632,"children":5634},{"className":5633},[],[5635],{"type":44,"value":3939},{"type":44,"value":5637}," to send messages over to the Playwright server.",{"type":29,"tag":39,"props":5639,"children":5641},{"id":5640},"launching-the-browser-instance",[5642],{"type":44,"value":5643},"Launching the browser instance",{"type":29,"tag":30,"props":5645,"children":5646},{},[5647,5649,5655],{"type":44,"value":5648},"The final bit of code to consider is the ",{"type":29,"tag":59,"props":5650,"children":5652},{"className":5651},[],[5653],{"type":44,"value":5654},"_serverLauncher",{"type":44,"value":5656}," variables being set in each of the drivers. This is written as",{"type":29,"tag":52,"props":5658,"children":5660},{"className":54,"code":5659,"filename":669,"language":56,"meta":7,"style":7},"playwrightAPI.chromium._serverLauncher = new BrowserServerLauncherImpl(\n  \"chromium\"\n);\nplaywrightAPI.firefox._serverLauncher = new BrowserServerLauncherImpl(\n  \"firefox\"\n);\nplaywrightAPI.webkit._serverLauncher = new BrowserServerLauncherImpl(\"webkit\");\n",[5661],{"type":29,"tag":59,"props":5662,"children":5663},{"__ignoreMap":7},[5664,5688,5696,5703,5727,5735,5742],{"type":29,"tag":63,"props":5665,"children":5666},{"class":65,"line":66},[5667,5672,5676,5680,5684],{"type":29,"tag":63,"props":5668,"children":5669},{"style":76},[5670],{"type":44,"value":5671},"playwrightAPI.chromium._serverLauncher ",{"type":29,"tag":63,"props":5673,"children":5674},{"style":70},[5675],{"type":44,"value":1197},{"type":29,"tag":63,"props":5677,"children":5678},{"style":70},[5679],{"type":44,"value":832},{"type":29,"tag":63,"props":5681,"children":5682},{"style":117},[5683],{"type":44,"value":1206},{"type":29,"tag":63,"props":5685,"children":5686},{"style":76},[5687],{"type":44,"value":1151},{"type":29,"tag":63,"props":5689,"children":5690},{"class":65,"line":93},[5691],{"type":29,"tag":63,"props":5692,"children":5693},{"style":87},[5694],{"type":44,"value":5695},"  \"chromium\"\n",{"type":29,"tag":63,"props":5697,"children":5698},{"class":65,"line":103},[5699],{"type":29,"tag":63,"props":5700,"children":5701},{"style":76},[5702],{"type":44,"value":429},{"type":29,"tag":63,"props":5704,"children":5705},{"class":65,"line":138},[5706,5711,5715,5719,5723],{"type":29,"tag":63,"props":5707,"children":5708},{"style":76},[5709],{"type":44,"value":5710},"playwrightAPI.firefox._serverLauncher ",{"type":29,"tag":63,"props":5712,"children":5713},{"style":70},[5714],{"type":44,"value":1197},{"type":29,"tag":63,"props":5716,"children":5717},{"style":70},[5718],{"type":44,"value":832},{"type":29,"tag":63,"props":5720,"children":5721},{"style":117},[5722],{"type":44,"value":1206},{"type":29,"tag":63,"props":5724,"children":5725},{"style":76},[5726],{"type":44,"value":1151},{"type":29,"tag":63,"props":5728,"children":5729},{"class":65,"line":178},[5730],{"type":29,"tag":63,"props":5731,"children":5732},{"style":87},[5733],{"type":44,"value":5734},"  \"firefox\"\n",{"type":29,"tag":63,"props":5736,"children":5737},{"class":65,"line":213},[5738],{"type":29,"tag":63,"props":5739,"children":5740},{"style":76},[5741],{"type":44,"value":429},{"type":29,"tag":63,"props":5743,"children":5744},{"class":65,"line":251},[5745,5750,5754,5758,5762,5766,5771],{"type":29,"tag":63,"props":5746,"children":5747},{"style":76},[5748],{"type":44,"value":5749},"playwrightAPI.webkit._serverLauncher ",{"type":29,"tag":63,"props":5751,"children":5752},{"style":70},[5753],{"type":44,"value":1197},{"type":29,"tag":63,"props":5755,"children":5756},{"style":70},[5757],{"type":44,"value":832},{"type":29,"tag":63,"props":5759,"children":5760},{"style":117},[5761],{"type":44,"value":1206},{"type":29,"tag":63,"props":5763,"children":5764},{"style":76},[5765],{"type":44,"value":238},{"type":29,"tag":63,"props":5767,"children":5768},{"style":87},[5769],{"type":44,"value":5770},"\"webkit\"",{"type":29,"tag":63,"props":5772,"children":5773},{"style":76},[5774],{"type":44,"value":429},{"type":29,"tag":30,"props":5776,"children":5777},{},[5778,5779,5785,5787,5792,5794,5800,5802,5808],{"type":44,"value":2649},{"type":29,"tag":59,"props":5780,"children":5782},{"className":5781},[],[5783],{"type":44,"value":5784},"BrowserServerLauncherImpl",{"type":44,"value":5786}," class is defined next to the ",{"type":29,"tag":59,"props":5788,"children":5790},{"className":5789},[],[5791],{"type":44,"value":480},{"type":44,"value":5793}," file in ",{"type":29,"tag":59,"props":5795,"children":5797},{"className":5796},[],[5798],{"type":44,"value":5799},"browserServerLauncherImpl.ts",{"type":44,"value":5801},". The main functionality in this class lies in the ",{"type":29,"tag":59,"props":5803,"children":5805},{"className":5804},[],[5806],{"type":44,"value":5807},"launchServer",{"type":44,"value":5809}," function, and is only called when you use the",{"type":29,"tag":52,"props":5811,"children":5814},{"className":54,"code":5812,"filename":5813,"language":56,"meta":7,"style":7},"playwrightAPI.chromium.launchServer(serverOptions);\n","my-script.ts",[5815],{"type":29,"tag":59,"props":5816,"children":5817},{"__ignoreMap":7},[5818],{"type":29,"tag":63,"props":5819,"children":5820},{"class":65,"line":66},[5821,5826,5830],{"type":29,"tag":63,"props":5822,"children":5823},{"style":76},[5824],{"type":44,"value":5825},"playwrightAPI.chromium.",{"type":29,"tag":63,"props":5827,"children":5828},{"style":117},[5829],{"type":44,"value":5807},{"type":29,"tag":63,"props":5831,"children":5832},{"style":76},[5833],{"type":44,"value":5834},"(serverOptions);\n",{"type":29,"tag":30,"props":5836,"children":5837},{},[5838,5840,5846],{"type":44,"value":5839},"function. This is for launching a server which exposes a websocket for other programs to interact with the playwright API. This is not used if you are just writing a node script which accesses the ",{"type":29,"tag":59,"props":5841,"children":5843},{"className":5842},[],[5844],{"type":44,"value":5845},"'playwright-core'",{"type":44,"value":5847}," library, something like",{"type":29,"tag":52,"props":5849,"children":5851},{"className":54,"code":5850,"filename":5813,"language":56,"meta":7,"style":7},"import playwright from \"playwright-core\";\n\n(async function () {\n  const browser = await playwright.chromium.launch({ headless: false });\n  const page = await browser.newPage();\n  await page.goto(\"https://playwright.dev\");\n  // ... automate page interactions here\n})();\n",[5852],{"type":29,"tag":59,"props":5853,"children":5854},{"__ignoreMap":7},[5855,5879,5886,5906,5948,5979,6008,6016],{"type":29,"tag":63,"props":5856,"children":5857},{"class":65,"line":66},[5858,5862,5867,5871,5875],{"type":29,"tag":63,"props":5859,"children":5860},{"style":70},[5861],{"type":44,"value":73},{"type":29,"tag":63,"props":5863,"children":5864},{"style":76},[5865],{"type":44,"value":5866}," playwright ",{"type":29,"tag":63,"props":5868,"children":5869},{"style":70},[5870],{"type":44,"value":84},{"type":29,"tag":63,"props":5872,"children":5873},{"style":87},[5874],{"type":44,"value":1718},{"type":29,"tag":63,"props":5876,"children":5877},{"style":76},[5878],{"type":44,"value":1183},{"type":29,"tag":63,"props":5880,"children":5881},{"class":65,"line":93},[5882],{"type":29,"tag":63,"props":5883,"children":5884},{"emptyLinePlaceholder":97},[5885],{"type":44,"value":100},{"type":29,"tag":63,"props":5887,"children":5888},{"class":65,"line":103},[5889,5893,5897,5901],{"type":29,"tag":63,"props":5890,"children":5891},{"style":76},[5892],{"type":44,"value":238},{"type":29,"tag":63,"props":5894,"children":5895},{"style":70},[5896],{"type":44,"value":109},{"type":29,"tag":63,"props":5898,"children":5899},{"style":70},[5900],{"type":44,"value":114},{"type":29,"tag":63,"props":5902,"children":5903},{"style":76},[5904],{"type":44,"value":5905}," () {\n",{"type":29,"tag":63,"props":5907,"children":5908},{"class":65,"line":138},[5909,5913,5917,5921,5925,5930,5934,5939,5944],{"type":29,"tag":63,"props":5910,"children":5911},{"style":70},[5912],{"type":44,"value":144},{"type":29,"tag":63,"props":5914,"children":5915},{"style":394},[5916],{"type":44,"value":150},{"type":29,"tag":63,"props":5918,"children":5919},{"style":70},[5920],{"type":44,"value":155},{"type":29,"tag":63,"props":5922,"children":5923},{"style":70},[5924],{"type":44,"value":160},{"type":29,"tag":63,"props":5926,"children":5927},{"style":76},[5928],{"type":44,"value":5929}," playwright.chromium.",{"type":29,"tag":63,"props":5931,"children":5932},{"style":117},[5933],{"type":44,"value":170},{"type":29,"tag":63,"props":5935,"children":5936},{"style":76},[5937],{"type":44,"value":5938},"({ headless: ",{"type":29,"tag":63,"props":5940,"children":5941},{"style":394},[5942],{"type":44,"value":5943},"false",{"type":29,"tag":63,"props":5945,"children":5946},{"style":76},[5947],{"type":44,"value":4203},{"type":29,"tag":63,"props":5949,"children":5950},{"class":65,"line":178},[5951,5955,5959,5963,5967,5971,5975],{"type":29,"tag":63,"props":5952,"children":5953},{"style":70},[5954],{"type":44,"value":144},{"type":29,"tag":63,"props":5956,"children":5957},{"style":394},[5958],{"type":44,"value":188},{"type":29,"tag":63,"props":5960,"children":5961},{"style":70},[5962],{"type":44,"value":155},{"type":29,"tag":63,"props":5964,"children":5965},{"style":70},[5966],{"type":44,"value":160},{"type":29,"tag":63,"props":5968,"children":5969},{"style":76},[5970],{"type":44,"value":201},{"type":29,"tag":63,"props":5972,"children":5973},{"style":117},[5974],{"type":44,"value":206},{"type":29,"tag":63,"props":5976,"children":5977},{"style":76},[5978],{"type":44,"value":878},{"type":29,"tag":63,"props":5980,"children":5981},{"class":65,"line":213},[5982,5986,5991,5995,5999,6004],{"type":29,"tag":63,"props":5983,"children":5984},{"style":70},[5985],{"type":44,"value":219},{"type":29,"tag":63,"props":5987,"children":5988},{"style":76},[5989],{"type":44,"value":5990}," page.",{"type":29,"tag":63,"props":5992,"children":5993},{"style":117},[5994],{"type":44,"value":233},{"type":29,"tag":63,"props":5996,"children":5997},{"style":76},[5998],{"type":44,"value":238},{"type":29,"tag":63,"props":6000,"children":6001},{"style":87},[6002],{"type":44,"value":6003},"\"https://playwright.dev\"",{"type":29,"tag":63,"props":6005,"children":6006},{"style":76},[6007],{"type":44,"value":429},{"type":29,"tag":63,"props":6009,"children":6010},{"class":65,"line":251},[6011],{"type":29,"tag":63,"props":6012,"children":6013},{"style":916},[6014],{"type":44,"value":6015},"  // ... automate page interactions here\n",{"type":29,"tag":63,"props":6017,"children":6018},{"class":65,"line":862},[6019],{"type":29,"tag":63,"props":6020,"children":6021},{"style":76},[6022],{"type":44,"value":6023},"})();\n",{"type":29,"tag":30,"props":6025,"children":6026},{},[6027,6029,6034],{"type":44,"value":6028},"so for now we skip giving an overview of the ",{"type":29,"tag":59,"props":6030,"children":6032},{"className":6031},[],[6033],{"type":44,"value":5784},{"type":44,"value":6035}," code and defer it to a later post.",{"type":29,"tag":39,"props":6037,"children":6039},{"id":6038},"recap",[6040],{"type":44,"value":6041},"Recap",{"type":29,"tag":30,"props":6043,"children":6044},{},[6045],{"type":44,"value":6046},"Whew! That was quite the journey, so let's recap the main points we covered in this post:",{"type":29,"tag":6048,"props":6049,"children":6050},"ul",{},[6051,6075,6093,6117,6128,6154,6177,6189,6234],{"type":29,"tag":6052,"props":6053,"children":6054},"li",{},[6055,6060,6062,6067,6069,6074],{"type":29,"tag":59,"props":6056,"children":6058},{"className":6057},[],[6059],{"type":44,"value":298},{"type":44,"value":6061}," is a wrapper around the test runner package ",{"type":29,"tag":59,"props":6063,"children":6065},{"className":6064},[],[6066],{"type":44,"value":313},{"type":44,"value":6068}," and the browser automation package ",{"type":29,"tag":59,"props":6070,"children":6072},{"className":6071},[],[6073],{"type":44,"value":306},{"type":44,"value":228},{"type":29,"tag":6052,"props":6076,"children":6077},{},[6078,6080,6085,6087,6092],{"type":44,"value":6079},"Importing from ",{"type":29,"tag":59,"props":6081,"children":6083},{"className":6082},[],[6084],{"type":44,"value":287},{"type":44,"value":6086}," is a dynamically generated process under the hood, which is done in ",{"type":29,"tag":59,"props":6088,"children":6090},{"className":6089},[],[6091],{"type":44,"value":669},{"type":44,"value":228},{"type":29,"tag":6052,"props":6094,"children":6095},{},[6096,6097,6102,6104,6109,6110,6115],{"type":44,"value":554},{"type":29,"tag":59,"props":6098,"children":6100},{"className":6099},[],[6101],{"type":44,"value":287},{"type":44,"value":6103}," there are two main libraries, the ",{"type":29,"tag":59,"props":6105,"children":6107},{"className":6106},[],[6108],{"type":44,"value":503},{"type":44,"value":281},{"type":29,"tag":59,"props":6111,"children":6113},{"className":6112},[],[6114],{"type":44,"value":511},{"type":44,"value":6116}," libraries.",{"type":29,"tag":6052,"props":6118,"children":6119},{},[6120,6122,6127],{"type":44,"value":6121},"This separation exists so other programming languages can easily build a client library which communicates with the ",{"type":29,"tag":59,"props":6123,"children":6125},{"className":6124},[],[6126],{"type":44,"value":511},{"type":44,"value":543},{"type":29,"tag":6052,"props":6129,"children":6130},{},[6131,6133,6138,6140,6145,6147,6152],{"type":44,"value":6132},"These communicate over a client ",{"type":29,"tag":59,"props":6134,"children":6136},{"className":6135},[],[6137],{"type":44,"value":1880},{"type":44,"value":6139}," object and a server ",{"type":29,"tag":59,"props":6141,"children":6143},{"className":6142},[],[6144],{"type":44,"value":2186},{"type":44,"value":6146}," class, which communicate with each other via a runtime set ",{"type":29,"tag":59,"props":6148,"children":6150},{"className":6149},[],[6151],{"type":44,"value":954},{"type":44,"value":6153}," parameter.",{"type":29,"tag":6052,"props":6155,"children":6156},{},[6157,6162,6164,6169,6170,6175],{"type":29,"tag":59,"props":6158,"children":6160},{"className":6159},[],[6161],{"type":44,"value":1880},{"type":44,"value":6163}," is responsible for constructing client side API's, the API methods you import from ",{"type":29,"tag":59,"props":6165,"children":6167},{"className":6166},[],[6168],{"type":44,"value":287},{"type":44,"value":3969},{"type":29,"tag":59,"props":6171,"children":6173},{"className":6172},[],[6174],{"type":44,"value":2186},{"type":44,"value":6176}," is responsible for keeping track of the dispatcher objects on the server side.",{"type":29,"tag":6052,"props":6178,"children":6179},{},[6180,6182,6187],{"type":44,"value":6181},"The instances of ",{"type":29,"tag":59,"props":6183,"children":6185},{"className":6184},[],[6186],{"type":44,"value":626},{"type":44,"value":6188}," subclasses are responsible for communicating with the automated browser their specific set of functionality.",{"type":29,"tag":6052,"props":6190,"children":6191},{},[6192,6197,6199,6204,6206,6211,6213,6218,6220,6225,6227,6232],{"type":29,"tag":59,"props":6193,"children":6195},{"className":6194},[],[6196],{"type":44,"value":1880},{"type":44,"value":6198}," is wrapped by ",{"type":29,"tag":59,"props":6200,"children":6202},{"className":6201},[],[6203],{"type":44,"value":588},{"type":44,"value":6205}," subclasses, which all point to the same instance of ",{"type":29,"tag":59,"props":6207,"children":6209},{"className":6208},[],[6210],{"type":44,"value":1880},{"type":44,"value":6212}," and are responsible for the client-side API for a specific component of the browser, e.g. ",{"type":29,"tag":59,"props":6214,"children":6216},{"className":6215},[],[6217],{"type":44,"value":618},{"type":44,"value":6219},". Similarly, ",{"type":29,"tag":59,"props":6221,"children":6223},{"className":6222},[],[6224],{"type":44,"value":2186},{"type":44,"value":6226}," is wrapped by a subclass of ",{"type":29,"tag":59,"props":6228,"children":6230},{"className":6229},[],[6231],{"type":44,"value":626},{"type":44,"value":6233}," which is responsible for a part of the automated browser.",{"type":29,"tag":6052,"props":6235,"children":6236},{},[6237,6239,6244,6245,6250,6252,6258],{"type":44,"value":6238},"Both the ",{"type":29,"tag":59,"props":6240,"children":6242},{"className":6241},[],[6243],{"type":44,"value":1880},{"type":44,"value":281},{"type":29,"tag":59,"props":6246,"children":6248},{"className":6247},[],[6249],{"type":44,"value":2186},{"type":44,"value":6251}," classes keep track of the same object on each side of the client/server side of the divide with a unique ",{"type":29,"tag":59,"props":6253,"children":6255},{"className":6254},[],[6256],{"type":44,"value":6257},"GUID",{"type":44,"value":228},{"type":29,"tag":30,"props":6260,"children":6261},{},[6262,6264,6269,6270,6275],{"type":44,"value":6263},"Once you have parsed the functionality of ",{"type":29,"tag":59,"props":6265,"children":6267},{"className":6266},[],[6268],{"type":44,"value":1880},{"type":44,"value":281},{"type":29,"tag":59,"props":6271,"children":6273},{"className":6272},[],[6274],{"type":44,"value":2186},{"type":44,"value":6276},", and their wrapper APIs, you are at an excellent spot for understanding the whole architecture of Playwright. These core components are essential for providing the client-facing interface used by test-engineers and the facade provided by the server, giving a unified API to automate browser actions.",{"type":29,"tag":6278,"props":6279,"children":6280},"style",{},[6281],{"type":44,"value":6282},"html .default .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}",{"title":7,"searchDepth":93,"depth":93,"links":6284},[6285,6290,6291,6296,6297],{"id":41,"depth":93,"text":45,"children":6286},[6287,6289],{"id":271,"depth":103,"text":6288},"Merging playwright and playwright-core",{"id":546,"depth":103,"text":549},{"id":643,"depth":93,"text":646},{"id":2108,"depth":93,"text":2111,"children":6292},[6293,6294,6295],{"id":2548,"depth":103,"text":2551},{"id":3868,"depth":103,"text":3871},{"id":3995,"depth":103,"text":3998},{"id":5640,"depth":93,"text":5643},{"id":6038,"depth":93,"text":6041},"markdown","content:playwright:how-playwright-initializes.md","content","playwright/how-playwright-initializes.md","md",1713051622651]