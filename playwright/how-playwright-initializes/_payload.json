[{"data":1,"prerenderedAt":7009},["ShallowReactive",2],{"blog-post-playwright/how-playwright-initializes":3},{"_path":4,"_dir":5,"_draft":6,"_partial":6,"_locale":7,"title":8,"description":9,"breadcrumbs":10,"image":17,"shortDescription":18,"created":19,"link":4,"body":25,"_type":7004,"_id":7005,"_source":7006,"_file":7007,"_extension":7008},"/playwright/how-playwright-initializes","playwright",false,"","How importing from Playwright works","In this post we dive into how Playwright initializes itself when you import anything from the library. If you look under the hood there is some complex machinery generating the API making it difficult for someone unfamiliar to get started with Playwright's internals.",[11,14],{"name":12,"path":13},"Playwright","/playwright/",{"name":15,"path":16},"How Playwright Initializes","/playwright/how-playwright-initializes/","img","Importing from playwright is a complex process with many interacting components. Let's look under the hood to discover how playwright-core is structured.",{"string":20,"valueOf":21,"month":22,"day":23,"year":24},"March 13, 2024",1710309600000,"Mar",13,2024,{"type":26,"children":27,"toc":6988},"root",[28,38,46,51,258,263,268,288,359,379,430,530,560,566,697,702,708,727,1718,1752,1784,1804,1865,1870,1931,1943,2131,2166,2172,2221,2274,2469,2474,2574,2631,2637,2669,3353,3372,3378,3406,3471,3533,3545,4208,4298,4305,4317,4545,4624,4630,4649,4763,4804,4810,4851,5053,5101,5143,5163,5449,5504,5537,5571,5762,5781,6222,6306,6312,6332,6450,6485,6541,6554,6729,6741,6747,6752,6964,6982],{"type":29,"tag":30,"props":31,"children":32},"element","p",{},[33],{"type":29,"tag":17,"props":34,"children":37},{"alt":35,"src":36},"Diagram of playwright-core initialization process","/img/playwright/playwright-core_initialization_diagram.jpg",[],{"type":29,"tag":39,"props":40,"children":42},"h2",{"id":41},"peering-into-playwrights-import-process",[43],{"type":44,"value":45},"text","Peering into Playwright's import process",{"type":29,"tag":30,"props":47,"children":48},{},[49],{"type":44,"value":50},"Whenever you import playwright, there's a lot of code being executed before you can actually execute anything with its APIs. In the following short snippet",{"type":29,"tag":52,"props":53,"children":57},"pre",{"className":54,"code":55,"language":56,"meta":7,"style":7},"language-ts shiki shiki-themes github-dark","import { chromium } from '@playwright/test'\n\nasync function main () => {\n  const browser = await chromium.launch()\n  const page = await browser.newPage()\n  await page.goto(\"https://qacomet.com\")\n}\n","ts",[58],{"type":29,"tag":59,"props":60,"children":61},"code",{"__ignoreMap":7},[62,91,101,136,176,211,249],{"type":29,"tag":63,"props":64,"children":67},"span",{"class":65,"line":66},"line",1,[68,74,80,85],{"type":29,"tag":63,"props":69,"children":71},{"style":70},"--shiki-default:#F97583",[72],{"type":44,"value":73},"import",{"type":29,"tag":63,"props":75,"children":77},{"style":76},"--shiki-default:#E1E4E8",[78],{"type":44,"value":79}," { chromium } ",{"type":29,"tag":63,"props":81,"children":82},{"style":70},[83],{"type":44,"value":84},"from",{"type":29,"tag":63,"props":86,"children":88},{"style":87},"--shiki-default:#9ECBFF",[89],{"type":44,"value":90}," '@playwright/test'\n",{"type":29,"tag":63,"props":92,"children":94},{"class":65,"line":93},2,[95],{"type":29,"tag":63,"props":96,"children":98},{"emptyLinePlaceholder":97},true,[99],{"type":44,"value":100},"\n",{"type":29,"tag":63,"props":102,"children":104},{"class":65,"line":103},3,[105,110,115,121,126,131],{"type":29,"tag":63,"props":106,"children":107},{"style":70},[108],{"type":44,"value":109},"async",{"type":29,"tag":63,"props":111,"children":112},{"style":70},[113],{"type":44,"value":114}," function",{"type":29,"tag":63,"props":116,"children":118},{"style":117},"--shiki-default:#B392F0",[119],{"type":44,"value":120}," main",{"type":29,"tag":63,"props":122,"children":123},{"style":76},[124],{"type":44,"value":125}," () ",{"type":29,"tag":63,"props":127,"children":128},{"style":70},[129],{"type":44,"value":130},"=>",{"type":29,"tag":63,"props":132,"children":133},{"style":76},[134],{"type":44,"value":135}," {\n",{"type":29,"tag":63,"props":137,"children":139},{"class":65,"line":138},4,[140,145,151,156,161,166,171],{"type":29,"tag":63,"props":141,"children":142},{"style":117},[143],{"type":44,"value":144},"  const",{"type":29,"tag":63,"props":146,"children":148},{"style":147},"--shiki-default:#FFAB70",[149],{"type":44,"value":150}," browser",{"type":29,"tag":63,"props":152,"children":153},{"style":70},[154],{"type":44,"value":155}," =",{"type":29,"tag":63,"props":157,"children":158},{"style":70},[159],{"type":44,"value":160}," await",{"type":29,"tag":63,"props":162,"children":163},{"style":76},[164],{"type":44,"value":165}," chromium.",{"type":29,"tag":63,"props":167,"children":168},{"style":117},[169],{"type":44,"value":170},"launch",{"type":29,"tag":63,"props":172,"children":173},{"style":76},[174],{"type":44,"value":175},"()\n",{"type":29,"tag":63,"props":177,"children":179},{"class":65,"line":178},5,[180,184,189,193,197,202,207],{"type":29,"tag":63,"props":181,"children":182},{"style":117},[183],{"type":44,"value":144},{"type":29,"tag":63,"props":185,"children":186},{"style":147},[187],{"type":44,"value":188}," page",{"type":29,"tag":63,"props":190,"children":191},{"style":70},[192],{"type":44,"value":155},{"type":29,"tag":63,"props":194,"children":195},{"style":70},[196],{"type":44,"value":160},{"type":29,"tag":63,"props":198,"children":199},{"style":76},[200],{"type":44,"value":201}," browser.",{"type":29,"tag":63,"props":203,"children":204},{"style":117},[205],{"type":44,"value":206},"newPage",{"type":29,"tag":63,"props":208,"children":209},{"style":76},[210],{"type":44,"value":175},{"type":29,"tag":63,"props":212,"children":214},{"class":65,"line":213},6,[215,220,224,229,234,239,244],{"type":29,"tag":63,"props":216,"children":217},{"style":117},[218],{"type":44,"value":219},"  await",{"type":29,"tag":63,"props":221,"children":222},{"style":117},[223],{"type":44,"value":188},{"type":29,"tag":63,"props":225,"children":226},{"style":76},[227],{"type":44,"value":228},".",{"type":29,"tag":63,"props":230,"children":231},{"style":117},[232],{"type":44,"value":233},"goto",{"type":29,"tag":63,"props":235,"children":236},{"style":76},[237],{"type":44,"value":238},"(",{"type":29,"tag":63,"props":240,"children":241},{"style":87},[242],{"type":44,"value":243},"\"https://qacomet.com\"",{"type":29,"tag":63,"props":245,"children":246},{"style":76},[247],{"type":44,"value":248},")\n",{"type":29,"tag":63,"props":250,"children":252},{"class":65,"line":251},7,[253],{"type":29,"tag":63,"props":254,"children":255},{"style":76},[256],{"type":44,"value":257},"}\n",{"type":29,"tag":30,"props":259,"children":260},{},[261],{"type":44,"value":262},"Playwright is initializing a server controlling the browser instance, building a connection between its underlying client and server library, and using a factory method to create a client-facing API for manipulating the browser. This long seemingly roundabout process is actually Playwright's secret sauce for much of its functionality. Because of this architectural decision, it is now possible to create client API's for Playwright in multiple languages, all which use the same underlying software architecture. This gives a consistent developer experience across projects spanning multiple languages, such as Javascript, Python, Java, and .NET. In addition, it's now easier to build future community supported clients in other languages, such as in Ruby, because of the replicability of Playwright's core interfaces.",{"type":29,"tag":30,"props":264,"children":265},{},[266],{"type":44,"value":267},"In order to see how the general project is structured, and how its design patterns can be replicated across clients, we trace through Playwright's initialization process in its core Typescript project, on which every other client library depends. By doing this, we will view its internals giving a clear picture of its internal architecture.",{"type":29,"tag":269,"props":270,"children":272},"h3",{"id":271},"merging-playwright-and-playwright-core",[273,275,280,282],{"type":44,"value":274},"Merging ",{"type":29,"tag":59,"props":276,"children":278},{"className":277},[],[279],{"type":44,"value":5},{"type":44,"value":281}," and ",{"type":29,"tag":59,"props":283,"children":285},{"className":284},[],[286],{"type":44,"value":287},"playwright-core",{"type":29,"tag":30,"props":289,"children":290},{},[291,293,299,301,307,308,314,316,322,324,329,331,337,339,344,346,351,353,358],{"type":44,"value":292},"Internally, when you import from ",{"type":29,"tag":59,"props":294,"children":296},{"className":295},[],[297],{"type":44,"value":298},"@playwright/test",{"type":44,"value":300},", there is an underlying call to import from two merged packages, ",{"type":29,"tag":59,"props":302,"children":304},{"className":303},[],[305],{"type":44,"value":306},"packages/playwright-core",{"type":44,"value":281},{"type":29,"tag":59,"props":309,"children":311},{"className":310},[],[312],{"type":44,"value":313},"packages/playwright",{"type":44,"value":315},". This merge happens in ",{"type":29,"tag":59,"props":317,"children":319},{"className":318},[],[320],{"type":44,"value":321},"packages/playwright/test",{"type":44,"value":323},", since ",{"type":29,"tag":59,"props":325,"children":327},{"className":326},[],[328],{"type":44,"value":298},{"type":44,"value":330}," is just an outward facinging export of ",{"type":29,"tag":59,"props":332,"children":334},{"className":333},[],[335],{"type":44,"value":336},"require('playwright/test')",{"type":44,"value":338},", an alias for ",{"type":29,"tag":59,"props":340,"children":342},{"className":341},[],[343],{"type":44,"value":321},{"type":44,"value":345},". This is where the test execution API's from ",{"type":29,"tag":59,"props":347,"children":349},{"className":348},[],[350],{"type":44,"value":313},{"type":44,"value":352}," are combined with the browser automation API's from ",{"type":29,"tag":59,"props":354,"children":356},{"className":355},[],[357],{"type":44,"value":306},{"type":44,"value":228},{"type":29,"tag":30,"props":360,"children":361},{},[362,364,369,371,377],{"type":44,"value":363},"We will focus on the import from ",{"type":29,"tag":59,"props":365,"children":367},{"className":366},[],[368],{"type":44,"value":287},{"type":44,"value":370},", since it provides the core browser automation and is the code every other client library wraps. Looking at its ",{"type":29,"tag":59,"props":372,"children":374},{"className":373},[],[375],{"type":44,"value":376},"index.js",{"type":44,"value":378}," file",{"type":29,"tag":52,"props":380,"children":385},{"className":381,"code":382,"filename":383,"language":384,"meta":7,"style":7},"language-js shiki shiki-themes github-dark","module.exports = require(\"./lib/inprocess\");\n","packages/playwright-core/index.js","js",[386],{"type":29,"tag":59,"props":387,"children":388},{"__ignoreMap":7},[389],{"type":29,"tag":63,"props":390,"children":391},{"class":65,"line":66},[392,398,402,407,411,416,420,425],{"type":29,"tag":63,"props":393,"children":395},{"style":394},"--shiki-default:#79B8FF",[396],{"type":44,"value":397},"module",{"type":29,"tag":63,"props":399,"children":400},{"style":76},[401],{"type":44,"value":228},{"type":29,"tag":63,"props":403,"children":404},{"style":394},[405],{"type":44,"value":406},"exports",{"type":29,"tag":63,"props":408,"children":409},{"style":70},[410],{"type":44,"value":155},{"type":29,"tag":63,"props":412,"children":413},{"style":117},[414],{"type":44,"value":415}," require",{"type":29,"tag":63,"props":417,"children":418},{"style":76},[419],{"type":44,"value":238},{"type":29,"tag":63,"props":421,"children":422},{"style":87},[423],{"type":44,"value":424},"\"./lib/inprocess\"",{"type":29,"tag":63,"props":426,"children":427},{"style":76},[428],{"type":44,"value":429},");\n",{"type":29,"tag":30,"props":431,"children":432},{},[433,435,441,443,449,451,457,459,465,467,473,475,481,483,489,491,497,499,505,507,512,514,520,522,528],{"type":44,"value":434},"gives an export from its ",{"type":29,"tag":59,"props":436,"children":438},{"className":437},[],[439],{"type":44,"value":440},"lib/inprocess.ts",{"type":44,"value":442}," file (note the ",{"type":29,"tag":59,"props":444,"children":446},{"className":445},[],[447],{"type":44,"value":448},"src",{"type":44,"value":450}," directory is compiled to the ",{"type":29,"tag":59,"props":452,"children":454},{"className":453},[],[455],{"type":44,"value":456},"lib",{"type":44,"value":458}," directory after playwright runs its build script, and is what's found in ",{"type":29,"tag":59,"props":460,"children":462},{"className":461},[],[463],{"type":44,"value":464},"node_modules/playwright-core",{"type":44,"value":466},", hence the require imports from ",{"type":29,"tag":59,"props":468,"children":470},{"className":469},[],[471],{"type":44,"value":472},"./lib/",{"type":44,"value":474}," and not ",{"type":29,"tag":59,"props":476,"children":478},{"className":477},[],[479],{"type":44,"value":480},"./src/",{"type":44,"value":482},"). The ",{"type":29,"tag":59,"props":484,"children":486},{"className":485},[],[487],{"type":44,"value":488},"inprocess.ts",{"type":44,"value":490}," file just imports from the adjacent ",{"type":29,"tag":59,"props":492,"children":494},{"className":493},[],[495],{"type":44,"value":496},"inProcessFactory.ts",{"type":44,"value":498}," and executes the function from there, called ",{"type":29,"tag":59,"props":500,"children":502},{"className":501},[],[503],{"type":44,"value":504},"createInProcessPlaywright",{"type":44,"value":506},". We include the source below in its own section but note ",{"type":29,"tag":59,"props":508,"children":510},{"className":509},[],[511],{"type":44,"value":504},{"type":44,"value":513}," dynamically intiailizes the interface between the client library, defined in ",{"type":29,"tag":59,"props":515,"children":517},{"className":516},[],[518],{"type":44,"value":519},"src/client",{"type":44,"value":521},", and the server library, defined in ",{"type":29,"tag":59,"props":523,"children":525},{"className":524},[],[526],{"type":44,"value":527},"src/server",{"type":44,"value":529},". The server library is responsible for dispatching browser automation actions over a browser automation protocol, such as the Chrome Devtools Protocol, abbreviated as CDP, while the client library gives a public API for playwright users to interact with the server library.",{"type":29,"tag":30,"props":531,"children":532},{},[533,535,544,546,551,553,558],{"type":44,"value":534},"This separation of logic between client and server is what gives implementations of the client library in multiple languages. For example, if you look in the ",{"type":29,"tag":536,"props":537,"children":541},"a",{"href":538,"rel":539},"https://github.com/microsoft/playwright-python",[540],"nofollow",[542],{"type":44,"value":543},"playwright-python",{"type":44,"value":545}," source code, you will find the same design patterns and classes defined in ",{"type":29,"tag":59,"props":547,"children":549},{"className":548},[],[550],{"type":44,"value":287},{"type":44,"value":552},"'s ",{"type":29,"tag":59,"props":554,"children":556},{"className":555},[],[557],{"type":44,"value":519},{"type":44,"value":559}," library.",{"type":29,"tag":269,"props":561,"children":563},{"id":562},"rapid-overview-of-the-client-and-server-libraries",[564],{"type":44,"value":565},"Rapid overview of the client and server libraries",{"type":29,"tag":30,"props":567,"children":568},{},[569,571,576,578,583,584,589,591,597,599,605,607,612,614,620,622,628,630,635,637,643,645,651,653,658,659,665,667,672,674,680,682,688,690,695],{"type":44,"value":570},"In ",{"type":29,"tag":59,"props":572,"children":574},{"className":573},[],[575],{"type":44,"value":287},{"type":44,"value":577}," the main functionality can be found in the ",{"type":29,"tag":59,"props":579,"children":581},{"className":580},[],[582],{"type":44,"value":519},{"type":44,"value":281},{"type":29,"tag":59,"props":585,"children":587},{"className":586},[],[588],{"type":44,"value":527},{"type":44,"value":590}," folders. The ",{"type":29,"tag":59,"props":592,"children":594},{"className":593},[],[595],{"type":44,"value":596},"client",{"type":44,"value":598}," folder contains classes, many of which are subclasses of the ",{"type":29,"tag":59,"props":600,"children":602},{"className":601},[],[603],{"type":44,"value":604},"ChannelOwner",{"type":44,"value":606}," class. This ",{"type":29,"tag":59,"props":608,"children":610},{"className":609},[],[611],{"type":44,"value":604},{"type":44,"value":613}," class is a client-side representation of a corresponding server-side ",{"type":29,"tag":59,"props":615,"children":617},{"className":616},[],[618],{"type":44,"value":619},"Dispatcher",{"type":44,"value":621}," class in the ",{"type":29,"tag":59,"props":623,"children":625},{"className":624},[],[626],{"type":44,"value":627},"src/server/dispatchers",{"type":44,"value":629}," folder. These dispatcher classes manage communication from the server library to the browser being automated. So for a ",{"type":29,"tag":59,"props":631,"children":633},{"className":632},[],[634],{"type":44,"value":604},{"type":44,"value":636}," subclass called ",{"type":29,"tag":59,"props":638,"children":640},{"className":639},[],[641],{"type":44,"value":642},"Page",{"type":44,"value":644},", containing the client side APIs (such as ",{"type":29,"tag":59,"props":646,"children":648},{"className":647},[],[649],{"type":44,"value":650},"page.goto",{"type":44,"value":652},"), there is a corresponding ",{"type":29,"tag":59,"props":654,"children":656},{"className":655},[],[657],{"type":44,"value":619},{"type":44,"value":636},{"type":29,"tag":59,"props":660,"children":662},{"className":661},[],[663],{"type":44,"value":664},"PageDispatcher",{"type":44,"value":666},". When we call ",{"type":29,"tag":59,"props":668,"children":670},{"className":669},[],[671],{"type":44,"value":650},{"type":44,"value":673}," a message is send over the unique client ",{"type":29,"tag":59,"props":675,"children":677},{"className":676},[],[678],{"type":44,"value":679},"Connection",{"type":44,"value":681}," instance to the unique ",{"type":29,"tag":59,"props":683,"children":685},{"className":684},[],[686],{"type":44,"value":687},"DispatcherConnection",{"type":44,"value":689}," instance, which calls the corresponding ",{"type":29,"tag":59,"props":691,"children":693},{"className":692},[],[694],{"type":44,"value":664},{"type":44,"value":696},", which then marshalls the automation command to the running browser process. This is a repeated pattern for many of the client-facing APIs you use while writing browser automation scripts with Playwright.",{"type":29,"tag":30,"props":698,"children":699},{},[700],{"type":44,"value":701},"Understanding the inner workings of these abstractions is essential for grokking the architecture of Playwright, which we touch on soon. But first, let's go back to tracing the import process from Playwright and see how that works.",{"type":29,"tag":39,"props":703,"children":705},{"id":704},"playwrights-core-api-factory-createinprocessplaywright",[706],{"type":44,"value":707},"Playwright's core API factory, createInProcessPlaywright",{"type":29,"tag":30,"props":709,"children":710},{},[711,713,718,720,725],{"type":44,"value":712},"This file, ",{"type":29,"tag":59,"props":714,"children":716},{"className":715},[],[717],{"type":44,"value":496},{"type":44,"value":719},", contains only one function called ",{"type":29,"tag":59,"props":721,"children":723},{"className":722},[],[724],{"type":44,"value":504},{"type":44,"value":726},". We include it here as a reference:",{"type":29,"tag":52,"props":728,"children":731},{"className":54,"code":729,"filename":730,"language":56,"meta":7,"style":7},"export function createInProcessPlaywright(): PlaywrightAPI {\n  const playwright = createPlaywright({\n    sdkLanguage:\n      (process.env.PW_LANG_NAME as Language | undefined) || \"javascript\",\n  });\n\n  const clientConnection = new Connection(undefined, undefined);\n  clientConnection.useRawBuffers();\n  const dispatcherConnection = new DispatcherConnection(true /* local */);\n\n  // Dispatch synchronously at first.\n  dispatcherConnection.onmessage = (message) =>\n    clientConnection.dispatch(message);\n  clientConnection.onmessage = (message) =>\n    dispatcherConnection.dispatch(message);\n\n  const rootScope = new RootDispatcher(dispatcherConnection);\n\n  // Initialize Playwright channel.\n  new PlaywrightDispatcher(rootScope, playwright);\n  const playwrightAPI = clientConnection.getObjectWithKnownName(\n    \"Playwright\"\n  ) as PlaywrightAPI;\n  playwrightAPI.chromium._serverLauncher = new BrowserServerLauncherImpl(\n    \"chromium\"\n  );\n  playwrightAPI.firefox._serverLauncher = new BrowserServerLauncherImpl(\n    \"firefox\"\n  );\n  playwrightAPI.webkit._serverLauncher = new BrowserServerLauncherImpl(\n    \"webkit\"\n  );\n  playwrightAPI._android._serverLauncher = new AndroidServerLauncherImpl();\n\n  // Switch to async dispatch after we got Playwright object.\n  dispatcherConnection.onmessage = (message) =>\n    setImmediate(() => clientConnection.dispatch(message));\n  clientConnection.onmessage = (message) =>\n    setImmediate(() => dispatcherConnection.dispatch(message));\n\n  clientConnection.toImpl = (x: any) =>\n    x\n      ? dispatcherConnection._dispatchers.get(x._guid)!._object\n      : dispatcherConnection._dispatchers.get(\"\");\n  (playwrightAPI as any)._toImpl = clientConnection.toImpl;\n  return playwrightAPI;\n}\n","packages/playwright-core/src/inProcessFactory.ts",[732],{"type":29,"tag":59,"props":733,"children":734},{"__ignoreMap":7},[735,771,797,805,858,866,873,921,940,985,993,1002,1039,1057,1089,1106,1114,1145,1153,1162,1181,1213,1222,1245,1272,1281,1290,1315,1324,1332,1357,1366,1374,1400,1408,1417,1449,1480,1512,1541,1549,1592,1601,1635,1665,1696,1710],{"type":29,"tag":63,"props":736,"children":737},{"class":65,"line":66},[738,743,747,752,757,762,767],{"type":29,"tag":63,"props":739,"children":740},{"style":70},[741],{"type":44,"value":742},"export",{"type":29,"tag":63,"props":744,"children":745},{"style":70},[746],{"type":44,"value":114},{"type":29,"tag":63,"props":748,"children":749},{"style":117},[750],{"type":44,"value":751}," createInProcessPlaywright",{"type":29,"tag":63,"props":753,"children":754},{"style":76},[755],{"type":44,"value":756},"()",{"type":29,"tag":63,"props":758,"children":759},{"style":70},[760],{"type":44,"value":761},":",{"type":29,"tag":63,"props":763,"children":764},{"style":117},[765],{"type":44,"value":766}," PlaywrightAPI",{"type":29,"tag":63,"props":768,"children":769},{"style":76},[770],{"type":44,"value":135},{"type":29,"tag":63,"props":772,"children":773},{"class":65,"line":93},[774,778,783,787,792],{"type":29,"tag":63,"props":775,"children":776},{"style":70},[777],{"type":44,"value":144},{"type":29,"tag":63,"props":779,"children":780},{"style":394},[781],{"type":44,"value":782}," playwright",{"type":29,"tag":63,"props":784,"children":785},{"style":70},[786],{"type":44,"value":155},{"type":29,"tag":63,"props":788,"children":789},{"style":117},[790],{"type":44,"value":791}," createPlaywright",{"type":29,"tag":63,"props":793,"children":794},{"style":76},[795],{"type":44,"value":796},"({\n",{"type":29,"tag":63,"props":798,"children":799},{"class":65,"line":103},[800],{"type":29,"tag":63,"props":801,"children":802},{"style":76},[803],{"type":44,"value":804},"    sdkLanguage:\n",{"type":29,"tag":63,"props":806,"children":807},{"class":65,"line":138},[808,813,818,823,828,833,838,843,848,853],{"type":29,"tag":63,"props":809,"children":810},{"style":76},[811],{"type":44,"value":812},"      (process.env.",{"type":29,"tag":63,"props":814,"children":815},{"style":394},[816],{"type":44,"value":817},"PW_LANG_NAME",{"type":29,"tag":63,"props":819,"children":820},{"style":70},[821],{"type":44,"value":822}," as",{"type":29,"tag":63,"props":824,"children":825},{"style":117},[826],{"type":44,"value":827}," Language",{"type":29,"tag":63,"props":829,"children":830},{"style":70},[831],{"type":44,"value":832}," |",{"type":29,"tag":63,"props":834,"children":835},{"style":394},[836],{"type":44,"value":837}," undefined",{"type":29,"tag":63,"props":839,"children":840},{"style":76},[841],{"type":44,"value":842},") ",{"type":29,"tag":63,"props":844,"children":845},{"style":70},[846],{"type":44,"value":847},"||",{"type":29,"tag":63,"props":849,"children":850},{"style":87},[851],{"type":44,"value":852}," \"javascript\"",{"type":29,"tag":63,"props":854,"children":855},{"style":76},[856],{"type":44,"value":857},",\n",{"type":29,"tag":63,"props":859,"children":860},{"class":65,"line":178},[861],{"type":29,"tag":63,"props":862,"children":863},{"style":76},[864],{"type":44,"value":865},"  });\n",{"type":29,"tag":63,"props":867,"children":868},{"class":65,"line":213},[869],{"type":29,"tag":63,"props":870,"children":871},{"emptyLinePlaceholder":97},[872],{"type":44,"value":100},{"type":29,"tag":63,"props":874,"children":875},{"class":65,"line":251},[876,880,885,889,894,899,903,908,913,917],{"type":29,"tag":63,"props":877,"children":878},{"style":70},[879],{"type":44,"value":144},{"type":29,"tag":63,"props":881,"children":882},{"style":394},[883],{"type":44,"value":884}," clientConnection",{"type":29,"tag":63,"props":886,"children":887},{"style":70},[888],{"type":44,"value":155},{"type":29,"tag":63,"props":890,"children":891},{"style":70},[892],{"type":44,"value":893}," new",{"type":29,"tag":63,"props":895,"children":896},{"style":117},[897],{"type":44,"value":898}," Connection",{"type":29,"tag":63,"props":900,"children":901},{"style":76},[902],{"type":44,"value":238},{"type":29,"tag":63,"props":904,"children":905},{"style":394},[906],{"type":44,"value":907},"undefined",{"type":29,"tag":63,"props":909,"children":910},{"style":76},[911],{"type":44,"value":912},", ",{"type":29,"tag":63,"props":914,"children":915},{"style":394},[916],{"type":44,"value":907},{"type":29,"tag":63,"props":918,"children":919},{"style":76},[920],{"type":44,"value":429},{"type":29,"tag":63,"props":922,"children":924},{"class":65,"line":923},8,[925,930,935],{"type":29,"tag":63,"props":926,"children":927},{"style":76},[928],{"type":44,"value":929},"  clientConnection.",{"type":29,"tag":63,"props":931,"children":932},{"style":117},[933],{"type":44,"value":934},"useRawBuffers",{"type":29,"tag":63,"props":936,"children":937},{"style":76},[938],{"type":44,"value":939},"();\n",{"type":29,"tag":63,"props":941,"children":943},{"class":65,"line":942},9,[944,948,953,957,961,966,970,975,981],{"type":29,"tag":63,"props":945,"children":946},{"style":70},[947],{"type":44,"value":144},{"type":29,"tag":63,"props":949,"children":950},{"style":394},[951],{"type":44,"value":952}," dispatcherConnection",{"type":29,"tag":63,"props":954,"children":955},{"style":70},[956],{"type":44,"value":155},{"type":29,"tag":63,"props":958,"children":959},{"style":70},[960],{"type":44,"value":893},{"type":29,"tag":63,"props":962,"children":963},{"style":117},[964],{"type":44,"value":965}," DispatcherConnection",{"type":29,"tag":63,"props":967,"children":968},{"style":76},[969],{"type":44,"value":238},{"type":29,"tag":63,"props":971,"children":972},{"style":394},[973],{"type":44,"value":974},"true",{"type":29,"tag":63,"props":976,"children":978},{"style":977},"--shiki-default:#6A737D",[979],{"type":44,"value":980}," /* local */",{"type":29,"tag":63,"props":982,"children":983},{"style":76},[984],{"type":44,"value":429},{"type":29,"tag":63,"props":986,"children":988},{"class":65,"line":987},10,[989],{"type":29,"tag":63,"props":990,"children":991},{"emptyLinePlaceholder":97},[992],{"type":44,"value":100},{"type":29,"tag":63,"props":994,"children":996},{"class":65,"line":995},11,[997],{"type":29,"tag":63,"props":998,"children":999},{"style":977},[1000],{"type":44,"value":1001},"  // Dispatch synchronously at first.\n",{"type":29,"tag":63,"props":1003,"children":1005},{"class":65,"line":1004},12,[1006,1011,1016,1020,1025,1030,1034],{"type":29,"tag":63,"props":1007,"children":1008},{"style":76},[1009],{"type":44,"value":1010},"  dispatcherConnection.",{"type":29,"tag":63,"props":1012,"children":1013},{"style":117},[1014],{"type":44,"value":1015},"onmessage",{"type":29,"tag":63,"props":1017,"children":1018},{"style":70},[1019],{"type":44,"value":155},{"type":29,"tag":63,"props":1021,"children":1022},{"style":76},[1023],{"type":44,"value":1024}," (",{"type":29,"tag":63,"props":1026,"children":1027},{"style":147},[1028],{"type":44,"value":1029},"message",{"type":29,"tag":63,"props":1031,"children":1032},{"style":76},[1033],{"type":44,"value":842},{"type":29,"tag":63,"props":1035,"children":1036},{"style":70},[1037],{"type":44,"value":1038},"=>\n",{"type":29,"tag":63,"props":1040,"children":1041},{"class":65,"line":23},[1042,1047,1052],{"type":29,"tag":63,"props":1043,"children":1044},{"style":76},[1045],{"type":44,"value":1046},"    clientConnection.",{"type":29,"tag":63,"props":1048,"children":1049},{"style":117},[1050],{"type":44,"value":1051},"dispatch",{"type":29,"tag":63,"props":1053,"children":1054},{"style":76},[1055],{"type":44,"value":1056},"(message);\n",{"type":29,"tag":63,"props":1058,"children":1060},{"class":65,"line":1059},14,[1061,1065,1069,1073,1077,1081,1085],{"type":29,"tag":63,"props":1062,"children":1063},{"style":76},[1064],{"type":44,"value":929},{"type":29,"tag":63,"props":1066,"children":1067},{"style":117},[1068],{"type":44,"value":1015},{"type":29,"tag":63,"props":1070,"children":1071},{"style":70},[1072],{"type":44,"value":155},{"type":29,"tag":63,"props":1074,"children":1075},{"style":76},[1076],{"type":44,"value":1024},{"type":29,"tag":63,"props":1078,"children":1079},{"style":147},[1080],{"type":44,"value":1029},{"type":29,"tag":63,"props":1082,"children":1083},{"style":76},[1084],{"type":44,"value":842},{"type":29,"tag":63,"props":1086,"children":1087},{"style":70},[1088],{"type":44,"value":1038},{"type":29,"tag":63,"props":1090,"children":1092},{"class":65,"line":1091},15,[1093,1098,1102],{"type":29,"tag":63,"props":1094,"children":1095},{"style":76},[1096],{"type":44,"value":1097},"    dispatcherConnection.",{"type":29,"tag":63,"props":1099,"children":1100},{"style":117},[1101],{"type":44,"value":1051},{"type":29,"tag":63,"props":1103,"children":1104},{"style":76},[1105],{"type":44,"value":1056},{"type":29,"tag":63,"props":1107,"children":1109},{"class":65,"line":1108},16,[1110],{"type":29,"tag":63,"props":1111,"children":1112},{"emptyLinePlaceholder":97},[1113],{"type":44,"value":100},{"type":29,"tag":63,"props":1115,"children":1117},{"class":65,"line":1116},17,[1118,1122,1127,1131,1135,1140],{"type":29,"tag":63,"props":1119,"children":1120},{"style":70},[1121],{"type":44,"value":144},{"type":29,"tag":63,"props":1123,"children":1124},{"style":394},[1125],{"type":44,"value":1126}," rootScope",{"type":29,"tag":63,"props":1128,"children":1129},{"style":70},[1130],{"type":44,"value":155},{"type":29,"tag":63,"props":1132,"children":1133},{"style":70},[1134],{"type":44,"value":893},{"type":29,"tag":63,"props":1136,"children":1137},{"style":117},[1138],{"type":44,"value":1139}," RootDispatcher",{"type":29,"tag":63,"props":1141,"children":1142},{"style":76},[1143],{"type":44,"value":1144},"(dispatcherConnection);\n",{"type":29,"tag":63,"props":1146,"children":1148},{"class":65,"line":1147},18,[1149],{"type":29,"tag":63,"props":1150,"children":1151},{"emptyLinePlaceholder":97},[1152],{"type":44,"value":100},{"type":29,"tag":63,"props":1154,"children":1156},{"class":65,"line":1155},19,[1157],{"type":29,"tag":63,"props":1158,"children":1159},{"style":977},[1160],{"type":44,"value":1161},"  // Initialize Playwright channel.\n",{"type":29,"tag":63,"props":1163,"children":1165},{"class":65,"line":1164},20,[1166,1171,1176],{"type":29,"tag":63,"props":1167,"children":1168},{"style":70},[1169],{"type":44,"value":1170},"  new",{"type":29,"tag":63,"props":1172,"children":1173},{"style":117},[1174],{"type":44,"value":1175}," PlaywrightDispatcher",{"type":29,"tag":63,"props":1177,"children":1178},{"style":76},[1179],{"type":44,"value":1180},"(rootScope, playwright);\n",{"type":29,"tag":63,"props":1182,"children":1184},{"class":65,"line":1183},21,[1185,1189,1194,1198,1203,1208],{"type":29,"tag":63,"props":1186,"children":1187},{"style":70},[1188],{"type":44,"value":144},{"type":29,"tag":63,"props":1190,"children":1191},{"style":394},[1192],{"type":44,"value":1193}," playwrightAPI",{"type":29,"tag":63,"props":1195,"children":1196},{"style":70},[1197],{"type":44,"value":155},{"type":29,"tag":63,"props":1199,"children":1200},{"style":76},[1201],{"type":44,"value":1202}," clientConnection.",{"type":29,"tag":63,"props":1204,"children":1205},{"style":117},[1206],{"type":44,"value":1207},"getObjectWithKnownName",{"type":29,"tag":63,"props":1209,"children":1210},{"style":76},[1211],{"type":44,"value":1212},"(\n",{"type":29,"tag":63,"props":1214,"children":1216},{"class":65,"line":1215},22,[1217],{"type":29,"tag":63,"props":1218,"children":1219},{"style":87},[1220],{"type":44,"value":1221},"    \"Playwright\"\n",{"type":29,"tag":63,"props":1223,"children":1225},{"class":65,"line":1224},23,[1226,1231,1236,1240],{"type":29,"tag":63,"props":1227,"children":1228},{"style":76},[1229],{"type":44,"value":1230},"  ) ",{"type":29,"tag":63,"props":1232,"children":1233},{"style":70},[1234],{"type":44,"value":1235},"as",{"type":29,"tag":63,"props":1237,"children":1238},{"style":117},[1239],{"type":44,"value":766},{"type":29,"tag":63,"props":1241,"children":1242},{"style":76},[1243],{"type":44,"value":1244},";\n",{"type":29,"tag":63,"props":1246,"children":1248},{"class":65,"line":1247},24,[1249,1254,1259,1263,1268],{"type":29,"tag":63,"props":1250,"children":1251},{"style":76},[1252],{"type":44,"value":1253},"  playwrightAPI.chromium._serverLauncher ",{"type":29,"tag":63,"props":1255,"children":1256},{"style":70},[1257],{"type":44,"value":1258},"=",{"type":29,"tag":63,"props":1260,"children":1261},{"style":70},[1262],{"type":44,"value":893},{"type":29,"tag":63,"props":1264,"children":1265},{"style":117},[1266],{"type":44,"value":1267}," BrowserServerLauncherImpl",{"type":29,"tag":63,"props":1269,"children":1270},{"style":76},[1271],{"type":44,"value":1212},{"type":29,"tag":63,"props":1273,"children":1275},{"class":65,"line":1274},25,[1276],{"type":29,"tag":63,"props":1277,"children":1278},{"style":87},[1279],{"type":44,"value":1280},"    \"chromium\"\n",{"type":29,"tag":63,"props":1282,"children":1284},{"class":65,"line":1283},26,[1285],{"type":29,"tag":63,"props":1286,"children":1287},{"style":76},[1288],{"type":44,"value":1289},"  );\n",{"type":29,"tag":63,"props":1291,"children":1293},{"class":65,"line":1292},27,[1294,1299,1303,1307,1311],{"type":29,"tag":63,"props":1295,"children":1296},{"style":76},[1297],{"type":44,"value":1298},"  playwrightAPI.firefox._serverLauncher ",{"type":29,"tag":63,"props":1300,"children":1301},{"style":70},[1302],{"type":44,"value":1258},{"type":29,"tag":63,"props":1304,"children":1305},{"style":70},[1306],{"type":44,"value":893},{"type":29,"tag":63,"props":1308,"children":1309},{"style":117},[1310],{"type":44,"value":1267},{"type":29,"tag":63,"props":1312,"children":1313},{"style":76},[1314],{"type":44,"value":1212},{"type":29,"tag":63,"props":1316,"children":1318},{"class":65,"line":1317},28,[1319],{"type":29,"tag":63,"props":1320,"children":1321},{"style":87},[1322],{"type":44,"value":1323},"    \"firefox\"\n",{"type":29,"tag":63,"props":1325,"children":1327},{"class":65,"line":1326},29,[1328],{"type":29,"tag":63,"props":1329,"children":1330},{"style":76},[1331],{"type":44,"value":1289},{"type":29,"tag":63,"props":1333,"children":1335},{"class":65,"line":1334},30,[1336,1341,1345,1349,1353],{"type":29,"tag":63,"props":1337,"children":1338},{"style":76},[1339],{"type":44,"value":1340},"  playwrightAPI.webkit._serverLauncher ",{"type":29,"tag":63,"props":1342,"children":1343},{"style":70},[1344],{"type":44,"value":1258},{"type":29,"tag":63,"props":1346,"children":1347},{"style":70},[1348],{"type":44,"value":893},{"type":29,"tag":63,"props":1350,"children":1351},{"style":117},[1352],{"type":44,"value":1267},{"type":29,"tag":63,"props":1354,"children":1355},{"style":76},[1356],{"type":44,"value":1212},{"type":29,"tag":63,"props":1358,"children":1360},{"class":65,"line":1359},31,[1361],{"type":29,"tag":63,"props":1362,"children":1363},{"style":87},[1364],{"type":44,"value":1365},"    \"webkit\"\n",{"type":29,"tag":63,"props":1367,"children":1369},{"class":65,"line":1368},32,[1370],{"type":29,"tag":63,"props":1371,"children":1372},{"style":76},[1373],{"type":44,"value":1289},{"type":29,"tag":63,"props":1375,"children":1377},{"class":65,"line":1376},33,[1378,1383,1387,1391,1396],{"type":29,"tag":63,"props":1379,"children":1380},{"style":76},[1381],{"type":44,"value":1382},"  playwrightAPI._android._serverLauncher ",{"type":29,"tag":63,"props":1384,"children":1385},{"style":70},[1386],{"type":44,"value":1258},{"type":29,"tag":63,"props":1388,"children":1389},{"style":70},[1390],{"type":44,"value":893},{"type":29,"tag":63,"props":1392,"children":1393},{"style":117},[1394],{"type":44,"value":1395}," AndroidServerLauncherImpl",{"type":29,"tag":63,"props":1397,"children":1398},{"style":76},[1399],{"type":44,"value":939},{"type":29,"tag":63,"props":1401,"children":1403},{"class":65,"line":1402},34,[1404],{"type":29,"tag":63,"props":1405,"children":1406},{"emptyLinePlaceholder":97},[1407],{"type":44,"value":100},{"type":29,"tag":63,"props":1409,"children":1411},{"class":65,"line":1410},35,[1412],{"type":29,"tag":63,"props":1413,"children":1414},{"style":977},[1415],{"type":44,"value":1416},"  // Switch to async dispatch after we got Playwright object.\n",{"type":29,"tag":63,"props":1418,"children":1420},{"class":65,"line":1419},36,[1421,1425,1429,1433,1437,1441,1445],{"type":29,"tag":63,"props":1422,"children":1423},{"style":76},[1424],{"type":44,"value":1010},{"type":29,"tag":63,"props":1426,"children":1427},{"style":117},[1428],{"type":44,"value":1015},{"type":29,"tag":63,"props":1430,"children":1431},{"style":70},[1432],{"type":44,"value":155},{"type":29,"tag":63,"props":1434,"children":1435},{"style":76},[1436],{"type":44,"value":1024},{"type":29,"tag":63,"props":1438,"children":1439},{"style":147},[1440],{"type":44,"value":1029},{"type":29,"tag":63,"props":1442,"children":1443},{"style":76},[1444],{"type":44,"value":842},{"type":29,"tag":63,"props":1446,"children":1447},{"style":70},[1448],{"type":44,"value":1038},{"type":29,"tag":63,"props":1450,"children":1452},{"class":65,"line":1451},37,[1453,1458,1463,1467,1471,1475],{"type":29,"tag":63,"props":1454,"children":1455},{"style":117},[1456],{"type":44,"value":1457},"    setImmediate",{"type":29,"tag":63,"props":1459,"children":1460},{"style":76},[1461],{"type":44,"value":1462},"(() ",{"type":29,"tag":63,"props":1464,"children":1465},{"style":70},[1466],{"type":44,"value":130},{"type":29,"tag":63,"props":1468,"children":1469},{"style":76},[1470],{"type":44,"value":1202},{"type":29,"tag":63,"props":1472,"children":1473},{"style":117},[1474],{"type":44,"value":1051},{"type":29,"tag":63,"props":1476,"children":1477},{"style":76},[1478],{"type":44,"value":1479},"(message));\n",{"type":29,"tag":63,"props":1481,"children":1483},{"class":65,"line":1482},38,[1484,1488,1492,1496,1500,1504,1508],{"type":29,"tag":63,"props":1485,"children":1486},{"style":76},[1487],{"type":44,"value":929},{"type":29,"tag":63,"props":1489,"children":1490},{"style":117},[1491],{"type":44,"value":1015},{"type":29,"tag":63,"props":1493,"children":1494},{"style":70},[1495],{"type":44,"value":155},{"type":29,"tag":63,"props":1497,"children":1498},{"style":76},[1499],{"type":44,"value":1024},{"type":29,"tag":63,"props":1501,"children":1502},{"style":147},[1503],{"type":44,"value":1029},{"type":29,"tag":63,"props":1505,"children":1506},{"style":76},[1507],{"type":44,"value":842},{"type":29,"tag":63,"props":1509,"children":1510},{"style":70},[1511],{"type":44,"value":1038},{"type":29,"tag":63,"props":1513,"children":1515},{"class":65,"line":1514},39,[1516,1520,1524,1528,1533,1537],{"type":29,"tag":63,"props":1517,"children":1518},{"style":117},[1519],{"type":44,"value":1457},{"type":29,"tag":63,"props":1521,"children":1522},{"style":76},[1523],{"type":44,"value":1462},{"type":29,"tag":63,"props":1525,"children":1526},{"style":70},[1527],{"type":44,"value":130},{"type":29,"tag":63,"props":1529,"children":1530},{"style":76},[1531],{"type":44,"value":1532}," dispatcherConnection.",{"type":29,"tag":63,"props":1534,"children":1535},{"style":117},[1536],{"type":44,"value":1051},{"type":29,"tag":63,"props":1538,"children":1539},{"style":76},[1540],{"type":44,"value":1479},{"type":29,"tag":63,"props":1542,"children":1544},{"class":65,"line":1543},40,[1545],{"type":29,"tag":63,"props":1546,"children":1547},{"emptyLinePlaceholder":97},[1548],{"type":44,"value":100},{"type":29,"tag":63,"props":1550,"children":1552},{"class":65,"line":1551},41,[1553,1557,1562,1566,1570,1575,1579,1584,1588],{"type":29,"tag":63,"props":1554,"children":1555},{"style":76},[1556],{"type":44,"value":929},{"type":29,"tag":63,"props":1558,"children":1559},{"style":117},[1560],{"type":44,"value":1561},"toImpl",{"type":29,"tag":63,"props":1563,"children":1564},{"style":70},[1565],{"type":44,"value":155},{"type":29,"tag":63,"props":1567,"children":1568},{"style":76},[1569],{"type":44,"value":1024},{"type":29,"tag":63,"props":1571,"children":1572},{"style":147},[1573],{"type":44,"value":1574},"x",{"type":29,"tag":63,"props":1576,"children":1577},{"style":70},[1578],{"type":44,"value":761},{"type":29,"tag":63,"props":1580,"children":1581},{"style":394},[1582],{"type":44,"value":1583}," any",{"type":29,"tag":63,"props":1585,"children":1586},{"style":76},[1587],{"type":44,"value":842},{"type":29,"tag":63,"props":1589,"children":1590},{"style":70},[1591],{"type":44,"value":1038},{"type":29,"tag":63,"props":1593,"children":1595},{"class":65,"line":1594},42,[1596],{"type":29,"tag":63,"props":1597,"children":1598},{"style":76},[1599],{"type":44,"value":1600},"    x\n",{"type":29,"tag":63,"props":1602,"children":1604},{"class":65,"line":1603},43,[1605,1610,1615,1620,1625,1630],{"type":29,"tag":63,"props":1606,"children":1607},{"style":70},[1608],{"type":44,"value":1609},"      ?",{"type":29,"tag":63,"props":1611,"children":1612},{"style":76},[1613],{"type":44,"value":1614}," dispatcherConnection._dispatchers.",{"type":29,"tag":63,"props":1616,"children":1617},{"style":117},[1618],{"type":44,"value":1619},"get",{"type":29,"tag":63,"props":1621,"children":1622},{"style":76},[1623],{"type":44,"value":1624},"(x._guid)",{"type":29,"tag":63,"props":1626,"children":1627},{"style":70},[1628],{"type":44,"value":1629},"!",{"type":29,"tag":63,"props":1631,"children":1632},{"style":76},[1633],{"type":44,"value":1634},"._object\n",{"type":29,"tag":63,"props":1636,"children":1638},{"class":65,"line":1637},44,[1639,1644,1648,1652,1656,1661],{"type":29,"tag":63,"props":1640,"children":1641},{"style":70},[1642],{"type":44,"value":1643},"      :",{"type":29,"tag":63,"props":1645,"children":1646},{"style":76},[1647],{"type":44,"value":1614},{"type":29,"tag":63,"props":1649,"children":1650},{"style":117},[1651],{"type":44,"value":1619},{"type":29,"tag":63,"props":1653,"children":1654},{"style":76},[1655],{"type":44,"value":238},{"type":29,"tag":63,"props":1657,"children":1658},{"style":87},[1659],{"type":44,"value":1660},"\"\"",{"type":29,"tag":63,"props":1662,"children":1663},{"style":76},[1664],{"type":44,"value":429},{"type":29,"tag":63,"props":1666,"children":1668},{"class":65,"line":1667},45,[1669,1674,1678,1682,1687,1691],{"type":29,"tag":63,"props":1670,"children":1671},{"style":76},[1672],{"type":44,"value":1673},"  (playwrightAPI ",{"type":29,"tag":63,"props":1675,"children":1676},{"style":70},[1677],{"type":44,"value":1235},{"type":29,"tag":63,"props":1679,"children":1680},{"style":394},[1681],{"type":44,"value":1583},{"type":29,"tag":63,"props":1683,"children":1684},{"style":76},[1685],{"type":44,"value":1686},")._toImpl ",{"type":29,"tag":63,"props":1688,"children":1689},{"style":70},[1690],{"type":44,"value":1258},{"type":29,"tag":63,"props":1692,"children":1693},{"style":76},[1694],{"type":44,"value":1695}," clientConnection.toImpl;\n",{"type":29,"tag":63,"props":1697,"children":1699},{"class":65,"line":1698},46,[1700,1705],{"type":29,"tag":63,"props":1701,"children":1702},{"style":70},[1703],{"type":44,"value":1704},"  return",{"type":29,"tag":63,"props":1706,"children":1707},{"style":76},[1708],{"type":44,"value":1709}," playwrightAPI;\n",{"type":29,"tag":63,"props":1711,"children":1713},{"class":65,"line":1712},47,[1714],{"type":29,"tag":63,"props":1715,"children":1716},{"style":76},[1717],{"type":44,"value":257},{"type":29,"tag":30,"props":1719,"children":1720},{},[1721,1723,1729,1731,1737,1739,1745,1747],{"type":44,"value":1722},"If you scan through the script and look at the return value, you'll see Playwright is returning the ",{"type":29,"tag":59,"props":1724,"children":1726},{"className":1725},[],[1727],{"type":44,"value":1728},"PlaywrightAPI",{"type":44,"value":1730}," instance ",{"type":29,"tag":59,"props":1732,"children":1734},{"className":1733},[],[1735],{"type":44,"value":1736},"playwrightAPI",{"type":44,"value":1738},", which is defined somewhere within the client library ",{"type":29,"tag":59,"props":1740,"children":1742},{"className":1741},[],[1743],{"type":44,"value":1744},"playwright-core/src/client/",{"type":44,"value":1746}," (which we find from our type hints). So when we write a script using ",{"type":29,"tag":59,"props":1748,"children":1750},{"className":1749},[],[1751],{"type":44,"value":287},{"type":29,"tag":52,"props":1753,"children":1756},{"className":54,"code":1754,"filename":1755,"language":56,"meta":7,"style":7},"import { chromium } from \"playwright-core\";\n","my-automation-script.ts",[1757],{"type":29,"tag":59,"props":1758,"children":1759},{"__ignoreMap":7},[1760],{"type":29,"tag":63,"props":1761,"children":1762},{"class":65,"line":66},[1763,1767,1771,1775,1780],{"type":29,"tag":63,"props":1764,"children":1765},{"style":70},[1766],{"type":44,"value":73},{"type":29,"tag":63,"props":1768,"children":1769},{"style":76},[1770],{"type":44,"value":79},{"type":29,"tag":63,"props":1772,"children":1773},{"style":70},[1774],{"type":44,"value":84},{"type":29,"tag":63,"props":1776,"children":1777},{"style":87},[1778],{"type":44,"value":1779}," \"playwright-core\"",{"type":29,"tag":63,"props":1781,"children":1782},{"style":76},[1783],{"type":44,"value":1244},{"type":29,"tag":30,"props":1785,"children":1786},{},[1787,1789,1794,1796,1802],{"type":44,"value":1788},"really we are making an import of the ",{"type":29,"tag":59,"props":1790,"children":1792},{"className":1791},[],[1793],{"type":44,"value":1736},{"type":44,"value":1795}," object and accessing its ",{"type":29,"tag":59,"props":1797,"children":1799},{"className":1798},[],[1800],{"type":44,"value":1801},"chromium",{"type":44,"value":1803}," property, so our script is secretly",{"type":29,"tag":52,"props":1805,"children":1807},{"className":54,"code":1806,"filename":1755,"language":56,"meta":7,"style":7},"import playwrightAPI from \"playwright-core\";\nconst { chromium } = playwrightAPI;\n",[1808],{"type":29,"tag":59,"props":1809,"children":1810},{"__ignoreMap":7},[1811,1835],{"type":29,"tag":63,"props":1812,"children":1813},{"class":65,"line":66},[1814,1818,1823,1827,1831],{"type":29,"tag":63,"props":1815,"children":1816},{"style":70},[1817],{"type":44,"value":73},{"type":29,"tag":63,"props":1819,"children":1820},{"style":76},[1821],{"type":44,"value":1822}," playwrightAPI ",{"type":29,"tag":63,"props":1824,"children":1825},{"style":70},[1826],{"type":44,"value":84},{"type":29,"tag":63,"props":1828,"children":1829},{"style":87},[1830],{"type":44,"value":1779},{"type":29,"tag":63,"props":1832,"children":1833},{"style":76},[1834],{"type":44,"value":1244},{"type":29,"tag":63,"props":1836,"children":1837},{"class":65,"line":93},[1838,1843,1848,1852,1857,1861],{"type":29,"tag":63,"props":1839,"children":1840},{"style":70},[1841],{"type":44,"value":1842},"const",{"type":29,"tag":63,"props":1844,"children":1845},{"style":76},[1846],{"type":44,"value":1847}," { ",{"type":29,"tag":63,"props":1849,"children":1850},{"style":394},[1851],{"type":44,"value":1801},{"type":29,"tag":63,"props":1853,"children":1854},{"style":76},[1855],{"type":44,"value":1856}," } ",{"type":29,"tag":63,"props":1858,"children":1859},{"style":70},[1860],{"type":44,"value":1258},{"type":29,"tag":63,"props":1862,"children":1863},{"style":76},[1864],{"type":44,"value":1709},{"type":29,"tag":30,"props":1866,"children":1867},{},[1868],{"type":44,"value":1869},"Tracing where this object is instantiated, we find the call",{"type":29,"tag":52,"props":1871,"children":1873},{"className":54,"code":1872,"filename":730,"language":56,"meta":7,"style":7},"const playwrightAPI = clientConnection.getObjectWithKnownName(\n  \"Playwright\"\n) as PlaywrightAPI;\n",[1874],{"type":29,"tag":59,"props":1875,"children":1876},{"__ignoreMap":7},[1877,1904,1912],{"type":29,"tag":63,"props":1878,"children":1879},{"class":65,"line":66},[1880,1884,1888,1892,1896,1900],{"type":29,"tag":63,"props":1881,"children":1882},{"style":70},[1883],{"type":44,"value":1842},{"type":29,"tag":63,"props":1885,"children":1886},{"style":394},[1887],{"type":44,"value":1193},{"type":29,"tag":63,"props":1889,"children":1890},{"style":70},[1891],{"type":44,"value":155},{"type":29,"tag":63,"props":1893,"children":1894},{"style":76},[1895],{"type":44,"value":1202},{"type":29,"tag":63,"props":1897,"children":1898},{"style":117},[1899],{"type":44,"value":1207},{"type":29,"tag":63,"props":1901,"children":1902},{"style":76},[1903],{"type":44,"value":1212},{"type":29,"tag":63,"props":1905,"children":1906},{"class":65,"line":93},[1907],{"type":29,"tag":63,"props":1908,"children":1909},{"style":87},[1910],{"type":44,"value":1911},"  \"Playwright\"\n",{"type":29,"tag":63,"props":1913,"children":1914},{"class":65,"line":103},[1915,1919,1923,1927],{"type":29,"tag":63,"props":1916,"children":1917},{"style":76},[1918],{"type":44,"value":842},{"type":29,"tag":63,"props":1920,"children":1921},{"style":70},[1922],{"type":44,"value":1235},{"type":29,"tag":63,"props":1924,"children":1925},{"style":117},[1926],{"type":44,"value":766},{"type":29,"tag":63,"props":1928,"children":1929},{"style":76},[1930],{"type":44,"value":1244},{"type":29,"tag":30,"props":1932,"children":1933},{},[1934,1936,1941],{"type":44,"value":1935},"which is not very descriptive. If you try looking in the ",{"type":29,"tag":59,"props":1937,"children":1939},{"className":1938},[],[1940],{"type":44,"value":679},{"type":44,"value":1942}," class definition, you won't get very far either, you'll just see",{"type":29,"tag":52,"props":1944,"children":1947},{"className":54,"code":1945,"filename":1946,"language":56,"meta":7,"style":7},"export class Connection extends EventEmitter {\n  readonly _objects = new Map\u003Cstring, ChannelOwner>();\n  // ...\n  getObjectWithKnownName(guid: string): any {\n    return this._objects.get(guid)!;\n  }\n}\n","packages/playwright-core/src/client/connection.ts",[1948],{"type":29,"tag":59,"props":1949,"children":1950},{"__ignoreMap":7},[1951,1981,2030,2038,2081,2116,2124],{"type":29,"tag":63,"props":1952,"children":1953},{"class":65,"line":66},[1954,1958,1963,1967,1972,1977],{"type":29,"tag":63,"props":1955,"children":1956},{"style":70},[1957],{"type":44,"value":742},{"type":29,"tag":63,"props":1959,"children":1960},{"style":70},[1961],{"type":44,"value":1962}," class",{"type":29,"tag":63,"props":1964,"children":1965},{"style":117},[1966],{"type":44,"value":898},{"type":29,"tag":63,"props":1968,"children":1969},{"style":70},[1970],{"type":44,"value":1971}," extends",{"type":29,"tag":63,"props":1973,"children":1974},{"style":117},[1975],{"type":44,"value":1976}," EventEmitter",{"type":29,"tag":63,"props":1978,"children":1979},{"style":76},[1980],{"type":44,"value":135},{"type":29,"tag":63,"props":1982,"children":1983},{"class":65,"line":93},[1984,1989,1994,1998,2002,2007,2012,2017,2021,2025],{"type":29,"tag":63,"props":1985,"children":1986},{"style":70},[1987],{"type":44,"value":1988},"  readonly",{"type":29,"tag":63,"props":1990,"children":1991},{"style":147},[1992],{"type":44,"value":1993}," _objects",{"type":29,"tag":63,"props":1995,"children":1996},{"style":70},[1997],{"type":44,"value":155},{"type":29,"tag":63,"props":1999,"children":2000},{"style":70},[2001],{"type":44,"value":893},{"type":29,"tag":63,"props":2003,"children":2004},{"style":117},[2005],{"type":44,"value":2006}," Map",{"type":29,"tag":63,"props":2008,"children":2009},{"style":76},[2010],{"type":44,"value":2011},"\u003C",{"type":29,"tag":63,"props":2013,"children":2014},{"style":394},[2015],{"type":44,"value":2016},"string",{"type":29,"tag":63,"props":2018,"children":2019},{"style":76},[2020],{"type":44,"value":912},{"type":29,"tag":63,"props":2022,"children":2023},{"style":117},[2024],{"type":44,"value":604},{"type":29,"tag":63,"props":2026,"children":2027},{"style":76},[2028],{"type":44,"value":2029},">();\n",{"type":29,"tag":63,"props":2031,"children":2032},{"class":65,"line":103},[2033],{"type":29,"tag":63,"props":2034,"children":2035},{"style":977},[2036],{"type":44,"value":2037},"  // ...\n",{"type":29,"tag":63,"props":2039,"children":2040},{"class":65,"line":138},[2041,2046,2050,2055,2059,2064,2069,2073,2077],{"type":29,"tag":63,"props":2042,"children":2043},{"style":117},[2044],{"type":44,"value":2045},"  getObjectWithKnownName",{"type":29,"tag":63,"props":2047,"children":2048},{"style":76},[2049],{"type":44,"value":238},{"type":29,"tag":63,"props":2051,"children":2052},{"style":147},[2053],{"type":44,"value":2054},"guid",{"type":29,"tag":63,"props":2056,"children":2057},{"style":70},[2058],{"type":44,"value":761},{"type":29,"tag":63,"props":2060,"children":2061},{"style":394},[2062],{"type":44,"value":2063}," string",{"type":29,"tag":63,"props":2065,"children":2066},{"style":76},[2067],{"type":44,"value":2068},")",{"type":29,"tag":63,"props":2070,"children":2071},{"style":70},[2072],{"type":44,"value":761},{"type":29,"tag":63,"props":2074,"children":2075},{"style":394},[2076],{"type":44,"value":1583},{"type":29,"tag":63,"props":2078,"children":2079},{"style":76},[2080],{"type":44,"value":135},{"type":29,"tag":63,"props":2082,"children":2083},{"class":65,"line":178},[2084,2089,2094,2099,2103,2108,2112],{"type":29,"tag":63,"props":2085,"children":2086},{"style":70},[2087],{"type":44,"value":2088},"    return",{"type":29,"tag":63,"props":2090,"children":2091},{"style":394},[2092],{"type":44,"value":2093}," this",{"type":29,"tag":63,"props":2095,"children":2096},{"style":76},[2097],{"type":44,"value":2098},"._objects.",{"type":29,"tag":63,"props":2100,"children":2101},{"style":117},[2102],{"type":44,"value":1619},{"type":29,"tag":63,"props":2104,"children":2105},{"style":76},[2106],{"type":44,"value":2107},"(guid)",{"type":29,"tag":63,"props":2109,"children":2110},{"style":70},[2111],{"type":44,"value":1629},{"type":29,"tag":63,"props":2113,"children":2114},{"style":76},[2115],{"type":44,"value":1244},{"type":29,"tag":63,"props":2117,"children":2118},{"class":65,"line":213},[2119],{"type":29,"tag":63,"props":2120,"children":2121},{"style":76},[2122],{"type":44,"value":2123},"  }\n",{"type":29,"tag":63,"props":2125,"children":2126},{"class":65,"line":251},[2127],{"type":29,"tag":63,"props":2128,"children":2129},{"style":76},[2130],{"type":44,"value":257},{"type":29,"tag":30,"props":2132,"children":2133},{},[2134,2136,2141,2143,2149,2151,2156,2158,2164],{"type":44,"value":2135},"which is even more opaque. From this all we know is the ",{"type":29,"tag":59,"props":2137,"children":2139},{"className":2138},[],[2140],{"type":44,"value":679},{"type":44,"value":2142}," class keeps an ",{"type":29,"tag":59,"props":2144,"children":2146},{"className":2145},[],[2147],{"type":44,"value":2148},"_objects",{"type":44,"value":2150}," map which at some point contains an instance of ",{"type":29,"tag":59,"props":2152,"children":2154},{"className":2153},[],[2155],{"type":44,"value":1728},{"type":44,"value":2157},", so tracing the calls directly is not the most helpful choice for understanding Playwright's initialization. Instead, going through the logic within ",{"type":29,"tag":59,"props":2159,"children":2161},{"className":2160},[],[2162],{"type":44,"value":2163},"inProcessFactory",{"type":44,"value":2165}," will give us a clear picture of how this library is wrapped together.",{"type":29,"tag":39,"props":2167,"children":2169},{"id":2168},"cross-communication-between-client-and-server",[2170],{"type":44,"value":2171},"Cross communication between client and server",{"type":29,"tag":30,"props":2173,"children":2174},{},[2175,2177,2182,2184,2190,2192,2198,2200,2205,2207,2212,2214,2220],{"type":44,"value":2176},"If you look through the script's imports, anything with ",{"type":29,"tag":59,"props":2178,"children":2180},{"className":2179},[],[2181],{"type":44,"value":619},{"type":44,"value":2183}," in its name, and ",{"type":29,"tag":59,"props":2185,"children":2187},{"className":2186},[],[2188],{"type":44,"value":2189},"createPlaywright",{"type":44,"value":2191},", come from the ",{"type":29,"tag":59,"props":2193,"children":2195},{"className":2194},[],[2196],{"type":44,"value":2197},"server",{"type":44,"value":2199}," directroy. The ",{"type":29,"tag":59,"props":2201,"children":2203},{"className":2202},[],[2204],{"type":44,"value":2189},{"type":44,"value":2206}," function creates an instance of the ",{"type":29,"tag":59,"props":2208,"children":2210},{"className":2209},[],[2211],{"type":44,"value":12},{"type":44,"value":2213}," class defined in ",{"type":29,"tag":59,"props":2215,"children":2217},{"className":2216},[],[2218],{"type":44,"value":2219},"packages/playwright-core/server/playwright.ts",{"type":44,"value":228},{"type":29,"tag":30,"props":2222,"children":2223},{},[2224,2226,2231,2232,2237,2239,2244,2246,2251,2253,2258,2260,2266,2267,2272],{"type":44,"value":2225},"Similarly, the imports for ",{"type":29,"tag":59,"props":2227,"children":2229},{"className":2228},[],[2230],{"type":44,"value":679},{"type":44,"value":281},{"type":29,"tag":59,"props":2233,"children":2235},{"className":2234},[],[2236],{"type":44,"value":1728},{"type":44,"value":2238}," come from the ",{"type":29,"tag":59,"props":2240,"children":2242},{"className":2241},[],[2243],{"type":44,"value":519},{"type":44,"value":2245}," directory. Looking through the first lines of ",{"type":29,"tag":59,"props":2247,"children":2249},{"className":2248},[],[2250],{"type":44,"value":2163},{"type":44,"value":2252},", there is an instantiation of the server ",{"type":29,"tag":59,"props":2254,"children":2256},{"className":2255},[],[2257],{"type":44,"value":12},{"type":44,"value":2259}," class and instantiation of objects for the ",{"type":29,"tag":59,"props":2261,"children":2263},{"className":2262},[],[2264],{"type":44,"value":2265},"ClientConnection",{"type":44,"value":281},{"type":29,"tag":59,"props":2268,"children":2270},{"className":2269},[],[2271],{"type":44,"value":687},{"type":44,"value":2273}," classes",{"type":29,"tag":52,"props":2275,"children":2277},{"className":54,"code":2276,"filename":730,"language":56,"meta":7,"style":7},"const playwright = createPlaywright({\n  sdkLanguage:\n    (process.env.PW_LANG_NAME as Language | undefined) || \"javascript\",\n});\n\nconst clientConnection = new Connection(undefined, undefined);\nclientConnection.useRawBuffers();\nconst dispatcherConnection = new DispatcherConnection(true /* local */);\n",[2278],{"type":29,"tag":59,"props":2279,"children":2280},{"__ignoreMap":7},[2281,2304,2312,2356,2364,2371,2414,2430],{"type":29,"tag":63,"props":2282,"children":2283},{"class":65,"line":66},[2284,2288,2292,2296,2300],{"type":29,"tag":63,"props":2285,"children":2286},{"style":70},[2287],{"type":44,"value":1842},{"type":29,"tag":63,"props":2289,"children":2290},{"style":394},[2291],{"type":44,"value":782},{"type":29,"tag":63,"props":2293,"children":2294},{"style":70},[2295],{"type":44,"value":155},{"type":29,"tag":63,"props":2297,"children":2298},{"style":117},[2299],{"type":44,"value":791},{"type":29,"tag":63,"props":2301,"children":2302},{"style":76},[2303],{"type":44,"value":796},{"type":29,"tag":63,"props":2305,"children":2306},{"class":65,"line":93},[2307],{"type":29,"tag":63,"props":2308,"children":2309},{"style":76},[2310],{"type":44,"value":2311},"  sdkLanguage:\n",{"type":29,"tag":63,"props":2313,"children":2314},{"class":65,"line":103},[2315,2320,2324,2328,2332,2336,2340,2344,2348,2352],{"type":29,"tag":63,"props":2316,"children":2317},{"style":76},[2318],{"type":44,"value":2319},"    (process.env.",{"type":29,"tag":63,"props":2321,"children":2322},{"style":394},[2323],{"type":44,"value":817},{"type":29,"tag":63,"props":2325,"children":2326},{"style":70},[2327],{"type":44,"value":822},{"type":29,"tag":63,"props":2329,"children":2330},{"style":117},[2331],{"type":44,"value":827},{"type":29,"tag":63,"props":2333,"children":2334},{"style":70},[2335],{"type":44,"value":832},{"type":29,"tag":63,"props":2337,"children":2338},{"style":394},[2339],{"type":44,"value":837},{"type":29,"tag":63,"props":2341,"children":2342},{"style":76},[2343],{"type":44,"value":842},{"type":29,"tag":63,"props":2345,"children":2346},{"style":70},[2347],{"type":44,"value":847},{"type":29,"tag":63,"props":2349,"children":2350},{"style":87},[2351],{"type":44,"value":852},{"type":29,"tag":63,"props":2353,"children":2354},{"style":76},[2355],{"type":44,"value":857},{"type":29,"tag":63,"props":2357,"children":2358},{"class":65,"line":138},[2359],{"type":29,"tag":63,"props":2360,"children":2361},{"style":76},[2362],{"type":44,"value":2363},"});\n",{"type":29,"tag":63,"props":2365,"children":2366},{"class":65,"line":178},[2367],{"type":29,"tag":63,"props":2368,"children":2369},{"emptyLinePlaceholder":97},[2370],{"type":44,"value":100},{"type":29,"tag":63,"props":2372,"children":2373},{"class":65,"line":213},[2374,2378,2382,2386,2390,2394,2398,2402,2406,2410],{"type":29,"tag":63,"props":2375,"children":2376},{"style":70},[2377],{"type":44,"value":1842},{"type":29,"tag":63,"props":2379,"children":2380},{"style":394},[2381],{"type":44,"value":884},{"type":29,"tag":63,"props":2383,"children":2384},{"style":70},[2385],{"type":44,"value":155},{"type":29,"tag":63,"props":2387,"children":2388},{"style":70},[2389],{"type":44,"value":893},{"type":29,"tag":63,"props":2391,"children":2392},{"style":117},[2393],{"type":44,"value":898},{"type":29,"tag":63,"props":2395,"children":2396},{"style":76},[2397],{"type":44,"value":238},{"type":29,"tag":63,"props":2399,"children":2400},{"style":394},[2401],{"type":44,"value":907},{"type":29,"tag":63,"props":2403,"children":2404},{"style":76},[2405],{"type":44,"value":912},{"type":29,"tag":63,"props":2407,"children":2408},{"style":394},[2409],{"type":44,"value":907},{"type":29,"tag":63,"props":2411,"children":2412},{"style":76},[2413],{"type":44,"value":429},{"type":29,"tag":63,"props":2415,"children":2416},{"class":65,"line":251},[2417,2422,2426],{"type":29,"tag":63,"props":2418,"children":2419},{"style":76},[2420],{"type":44,"value":2421},"clientConnection.",{"type":29,"tag":63,"props":2423,"children":2424},{"style":117},[2425],{"type":44,"value":934},{"type":29,"tag":63,"props":2427,"children":2428},{"style":76},[2429],{"type":44,"value":939},{"type":29,"tag":63,"props":2431,"children":2432},{"class":65,"line":923},[2433,2437,2441,2445,2449,2453,2457,2461,2465],{"type":29,"tag":63,"props":2434,"children":2435},{"style":70},[2436],{"type":44,"value":1842},{"type":29,"tag":63,"props":2438,"children":2439},{"style":394},[2440],{"type":44,"value":952},{"type":29,"tag":63,"props":2442,"children":2443},{"style":70},[2444],{"type":44,"value":155},{"type":29,"tag":63,"props":2446,"children":2447},{"style":70},[2448],{"type":44,"value":893},{"type":29,"tag":63,"props":2450,"children":2451},{"style":117},[2452],{"type":44,"value":965},{"type":29,"tag":63,"props":2454,"children":2455},{"style":76},[2456],{"type":44,"value":238},{"type":29,"tag":63,"props":2458,"children":2459},{"style":394},[2460],{"type":44,"value":974},{"type":29,"tag":63,"props":2462,"children":2463},{"style":977},[2464],{"type":44,"value":980},{"type":29,"tag":63,"props":2466,"children":2467},{"style":76},[2468],{"type":44,"value":429},{"type":29,"tag":30,"props":2470,"children":2471},{},[2472],{"type":44,"value":2473},"The next lines of code are the bridge between the internal client and server libraries",{"type":29,"tag":52,"props":2475,"children":2477},{"className":54,"code":2476,"filename":730,"language":56,"meta":7,"style":7},"dispatcherConnection.onmessage = (message) =>\n  clientConnection.dispatch(message);\nclientConnection.onmessage = (message) =>\n  dispatcherConnection.dispatch(message);\n",[2478],{"type":29,"tag":59,"props":2479,"children":2480},{"__ignoreMap":7},[2481,2513,2528,2559],{"type":29,"tag":63,"props":2482,"children":2483},{"class":65,"line":66},[2484,2489,2493,2497,2501,2505,2509],{"type":29,"tag":63,"props":2485,"children":2486},{"style":76},[2487],{"type":44,"value":2488},"dispatcherConnection.",{"type":29,"tag":63,"props":2490,"children":2491},{"style":117},[2492],{"type":44,"value":1015},{"type":29,"tag":63,"props":2494,"children":2495},{"style":70},[2496],{"type":44,"value":155},{"type":29,"tag":63,"props":2498,"children":2499},{"style":76},[2500],{"type":44,"value":1024},{"type":29,"tag":63,"props":2502,"children":2503},{"style":147},[2504],{"type":44,"value":1029},{"type":29,"tag":63,"props":2506,"children":2507},{"style":76},[2508],{"type":44,"value":842},{"type":29,"tag":63,"props":2510,"children":2511},{"style":70},[2512],{"type":44,"value":1038},{"type":29,"tag":63,"props":2514,"children":2515},{"class":65,"line":93},[2516,2520,2524],{"type":29,"tag":63,"props":2517,"children":2518},{"style":76},[2519],{"type":44,"value":929},{"type":29,"tag":63,"props":2521,"children":2522},{"style":117},[2523],{"type":44,"value":1051},{"type":29,"tag":63,"props":2525,"children":2526},{"style":76},[2527],{"type":44,"value":1056},{"type":29,"tag":63,"props":2529,"children":2530},{"class":65,"line":103},[2531,2535,2539,2543,2547,2551,2555],{"type":29,"tag":63,"props":2532,"children":2533},{"style":76},[2534],{"type":44,"value":2421},{"type":29,"tag":63,"props":2536,"children":2537},{"style":117},[2538],{"type":44,"value":1015},{"type":29,"tag":63,"props":2540,"children":2541},{"style":70},[2542],{"type":44,"value":155},{"type":29,"tag":63,"props":2544,"children":2545},{"style":76},[2546],{"type":44,"value":1024},{"type":29,"tag":63,"props":2548,"children":2549},{"style":147},[2550],{"type":44,"value":1029},{"type":29,"tag":63,"props":2552,"children":2553},{"style":76},[2554],{"type":44,"value":842},{"type":29,"tag":63,"props":2556,"children":2557},{"style":70},[2558],{"type":44,"value":1038},{"type":29,"tag":63,"props":2560,"children":2561},{"class":65,"line":138},[2562,2566,2570],{"type":29,"tag":63,"props":2563,"children":2564},{"style":76},[2565],{"type":44,"value":1010},{"type":29,"tag":63,"props":2567,"children":2568},{"style":117},[2569],{"type":44,"value":1051},{"type":29,"tag":63,"props":2571,"children":2572},{"style":76},[2573],{"type":44,"value":1056},{"type":29,"tag":30,"props":2575,"children":2576},{},[2577,2579,2584,2586,2591,2593,2598,2600,2606,2608,2614,2616,2621,2623,2629],{"type":44,"value":2578},"given by setting the ",{"type":29,"tag":59,"props":2580,"children":2582},{"className":2581},[],[2583],{"type":44,"value":1015},{"type":44,"value":2585}," properties for each of these objects. Notice each ",{"type":29,"tag":59,"props":2587,"children":2589},{"className":2588},[],[2590],{"type":44,"value":1015},{"type":44,"value":2592}," calls the other's ",{"type":29,"tag":59,"props":2594,"children":2596},{"className":2595},[],[2597],{"type":44,"value":1051},{"type":44,"value":2599}," method; i.e., ",{"type":29,"tag":59,"props":2601,"children":2603},{"className":2602},[],[2604],{"type":44,"value":2605},"dispatcherConnection",{"type":44,"value":2607}," calls the ",{"type":29,"tag":59,"props":2609,"children":2611},{"className":2610},[],[2612],{"type":44,"value":2613},"clientConnection.dispatch",{"type":44,"value":2615}," through ",{"type":29,"tag":59,"props":2617,"children":2619},{"className":2618},[],[2620],{"type":44,"value":1015},{"type":44,"value":2622}," and vice versa. This gives us the hint somehow ",{"type":29,"tag":59,"props":2624,"children":2626},{"className":2625},[],[2627],{"type":44,"value":2628},"dispatcherConnection.onmessage",{"type":44,"value":2630}," will be called somewhere in the codebase.",{"type":29,"tag":269,"props":2632,"children":2634},{"id":2633},"server-side-createplaywright",[2635],{"type":44,"value":2636},"Server-side createPlaywright",{"type":29,"tag":30,"props":2638,"children":2639},{},[2640,2642,2647,2649,2654,2656,2661,2662,2667],{"type":44,"value":2641},"Before we continue down the logic within ",{"type":29,"tag":59,"props":2643,"children":2645},{"className":2644},[],[2646],{"type":44,"value":504},{"type":44,"value":2648},", let's go over what the ",{"type":29,"tag":59,"props":2650,"children":2652},{"className":2651},[],[2653],{"type":44,"value":2189},{"type":44,"value":2655}," function actually does. It is a simple function call which instantiates the ",{"type":29,"tag":59,"props":2657,"children":2659},{"className":2658},[],[2660],{"type":44,"value":12},{"type":44,"value":2213},{"type":29,"tag":59,"props":2663,"children":2665},{"className":2664},[],[2666],{"type":44,"value":2219},{"type":44,"value":2668},". Below is a simplified version of it",{"type":29,"tag":52,"props":2670,"children":2672},{"className":54,"code":2671,"filename":2219,"language":56,"meta":7,"style":7},"import { Chromium } from \"./chromium/chromium\";\nimport { Firefox } from \"./firefox/firefox\";\nimport { Selectors } from \"./selectors\";\nimport { WebKit } from \"./webkit/webkit\";\nimport { createInstrumentation, SdkObject } from \"./instrumentation\";\n\nexport class Playwright extends SdkObject {\n  readonly selectors: Selectors;\n  readonly chromium: Chromium;\n  readonly android: Android;\n  readonly electron: Electron;\n  readonly firefox: Firefox;\n  readonly webkit: WebKit;\n  readonly options: PlaywrightOptions;\n  readonly debugController: DebugController;\n\n  constructor(options: PlaywrightOptions) {\n    super(\n      { attribution: {}, instrumentation: createInstrumentation() } as any,\n      undefined,\n      \"Playwright\"\n    );\n    this.options = options;\n    this.chromium = new Chromium(this);\n    this.firefox = new Firefox(this);\n    this.webkit = new WebKit(this);\n    this.selectors = new Selectors();\n    this.debugController = new DebugController(this);\n  }\n}\n",[2673],{"type":29,"tag":59,"props":2674,"children":2675},{"__ignoreMap":7},[2676,2701,2726,2751,2776,2801,2808,2837,2862,2887,2912,2937,2962,2987,3012,3037,3044,3074,3086,3116,3128,3136,3144,3166,3203,3239,3275,3303,3339,3346],{"type":29,"tag":63,"props":2677,"children":2678},{"class":65,"line":66},[2679,2683,2688,2692,2697],{"type":29,"tag":63,"props":2680,"children":2681},{"style":70},[2682],{"type":44,"value":73},{"type":29,"tag":63,"props":2684,"children":2685},{"style":76},[2686],{"type":44,"value":2687}," { Chromium } ",{"type":29,"tag":63,"props":2689,"children":2690},{"style":70},[2691],{"type":44,"value":84},{"type":29,"tag":63,"props":2693,"children":2694},{"style":87},[2695],{"type":44,"value":2696}," \"./chromium/chromium\"",{"type":29,"tag":63,"props":2698,"children":2699},{"style":76},[2700],{"type":44,"value":1244},{"type":29,"tag":63,"props":2702,"children":2703},{"class":65,"line":93},[2704,2708,2713,2717,2722],{"type":29,"tag":63,"props":2705,"children":2706},{"style":70},[2707],{"type":44,"value":73},{"type":29,"tag":63,"props":2709,"children":2710},{"style":76},[2711],{"type":44,"value":2712}," { Firefox } ",{"type":29,"tag":63,"props":2714,"children":2715},{"style":70},[2716],{"type":44,"value":84},{"type":29,"tag":63,"props":2718,"children":2719},{"style":87},[2720],{"type":44,"value":2721}," \"./firefox/firefox\"",{"type":29,"tag":63,"props":2723,"children":2724},{"style":76},[2725],{"type":44,"value":1244},{"type":29,"tag":63,"props":2727,"children":2728},{"class":65,"line":103},[2729,2733,2738,2742,2747],{"type":29,"tag":63,"props":2730,"children":2731},{"style":70},[2732],{"type":44,"value":73},{"type":29,"tag":63,"props":2734,"children":2735},{"style":76},[2736],{"type":44,"value":2737}," { Selectors } ",{"type":29,"tag":63,"props":2739,"children":2740},{"style":70},[2741],{"type":44,"value":84},{"type":29,"tag":63,"props":2743,"children":2744},{"style":87},[2745],{"type":44,"value":2746}," \"./selectors\"",{"type":29,"tag":63,"props":2748,"children":2749},{"style":76},[2750],{"type":44,"value":1244},{"type":29,"tag":63,"props":2752,"children":2753},{"class":65,"line":138},[2754,2758,2763,2767,2772],{"type":29,"tag":63,"props":2755,"children":2756},{"style":70},[2757],{"type":44,"value":73},{"type":29,"tag":63,"props":2759,"children":2760},{"style":76},[2761],{"type":44,"value":2762}," { WebKit } ",{"type":29,"tag":63,"props":2764,"children":2765},{"style":70},[2766],{"type":44,"value":84},{"type":29,"tag":63,"props":2768,"children":2769},{"style":87},[2770],{"type":44,"value":2771}," \"./webkit/webkit\"",{"type":29,"tag":63,"props":2773,"children":2774},{"style":76},[2775],{"type":44,"value":1244},{"type":29,"tag":63,"props":2777,"children":2778},{"class":65,"line":178},[2779,2783,2788,2792,2797],{"type":29,"tag":63,"props":2780,"children":2781},{"style":70},[2782],{"type":44,"value":73},{"type":29,"tag":63,"props":2784,"children":2785},{"style":76},[2786],{"type":44,"value":2787}," { createInstrumentation, SdkObject } ",{"type":29,"tag":63,"props":2789,"children":2790},{"style":70},[2791],{"type":44,"value":84},{"type":29,"tag":63,"props":2793,"children":2794},{"style":87},[2795],{"type":44,"value":2796}," \"./instrumentation\"",{"type":29,"tag":63,"props":2798,"children":2799},{"style":76},[2800],{"type":44,"value":1244},{"type":29,"tag":63,"props":2802,"children":2803},{"class":65,"line":213},[2804],{"type":29,"tag":63,"props":2805,"children":2806},{"emptyLinePlaceholder":97},[2807],{"type":44,"value":100},{"type":29,"tag":63,"props":2809,"children":2810},{"class":65,"line":251},[2811,2815,2819,2824,2828,2833],{"type":29,"tag":63,"props":2812,"children":2813},{"style":70},[2814],{"type":44,"value":742},{"type":29,"tag":63,"props":2816,"children":2817},{"style":70},[2818],{"type":44,"value":1962},{"type":29,"tag":63,"props":2820,"children":2821},{"style":117},[2822],{"type":44,"value":2823}," Playwright",{"type":29,"tag":63,"props":2825,"children":2826},{"style":70},[2827],{"type":44,"value":1971},{"type":29,"tag":63,"props":2829,"children":2830},{"style":117},[2831],{"type":44,"value":2832}," SdkObject",{"type":29,"tag":63,"props":2834,"children":2835},{"style":76},[2836],{"type":44,"value":135},{"type":29,"tag":63,"props":2838,"children":2839},{"class":65,"line":923},[2840,2844,2849,2853,2858],{"type":29,"tag":63,"props":2841,"children":2842},{"style":70},[2843],{"type":44,"value":1988},{"type":29,"tag":63,"props":2845,"children":2846},{"style":147},[2847],{"type":44,"value":2848}," selectors",{"type":29,"tag":63,"props":2850,"children":2851},{"style":70},[2852],{"type":44,"value":761},{"type":29,"tag":63,"props":2854,"children":2855},{"style":117},[2856],{"type":44,"value":2857}," Selectors",{"type":29,"tag":63,"props":2859,"children":2860},{"style":76},[2861],{"type":44,"value":1244},{"type":29,"tag":63,"props":2863,"children":2864},{"class":65,"line":942},[2865,2869,2874,2878,2883],{"type":29,"tag":63,"props":2866,"children":2867},{"style":70},[2868],{"type":44,"value":1988},{"type":29,"tag":63,"props":2870,"children":2871},{"style":147},[2872],{"type":44,"value":2873}," chromium",{"type":29,"tag":63,"props":2875,"children":2876},{"style":70},[2877],{"type":44,"value":761},{"type":29,"tag":63,"props":2879,"children":2880},{"style":117},[2881],{"type":44,"value":2882}," Chromium",{"type":29,"tag":63,"props":2884,"children":2885},{"style":76},[2886],{"type":44,"value":1244},{"type":29,"tag":63,"props":2888,"children":2889},{"class":65,"line":987},[2890,2894,2899,2903,2908],{"type":29,"tag":63,"props":2891,"children":2892},{"style":70},[2893],{"type":44,"value":1988},{"type":29,"tag":63,"props":2895,"children":2896},{"style":147},[2897],{"type":44,"value":2898}," android",{"type":29,"tag":63,"props":2900,"children":2901},{"style":70},[2902],{"type":44,"value":761},{"type":29,"tag":63,"props":2904,"children":2905},{"style":117},[2906],{"type":44,"value":2907}," Android",{"type":29,"tag":63,"props":2909,"children":2910},{"style":76},[2911],{"type":44,"value":1244},{"type":29,"tag":63,"props":2913,"children":2914},{"class":65,"line":995},[2915,2919,2924,2928,2933],{"type":29,"tag":63,"props":2916,"children":2917},{"style":70},[2918],{"type":44,"value":1988},{"type":29,"tag":63,"props":2920,"children":2921},{"style":147},[2922],{"type":44,"value":2923}," electron",{"type":29,"tag":63,"props":2925,"children":2926},{"style":70},[2927],{"type":44,"value":761},{"type":29,"tag":63,"props":2929,"children":2930},{"style":117},[2931],{"type":44,"value":2932}," Electron",{"type":29,"tag":63,"props":2934,"children":2935},{"style":76},[2936],{"type":44,"value":1244},{"type":29,"tag":63,"props":2938,"children":2939},{"class":65,"line":1004},[2940,2944,2949,2953,2958],{"type":29,"tag":63,"props":2941,"children":2942},{"style":70},[2943],{"type":44,"value":1988},{"type":29,"tag":63,"props":2945,"children":2946},{"style":147},[2947],{"type":44,"value":2948}," firefox",{"type":29,"tag":63,"props":2950,"children":2951},{"style":70},[2952],{"type":44,"value":761},{"type":29,"tag":63,"props":2954,"children":2955},{"style":117},[2956],{"type":44,"value":2957}," Firefox",{"type":29,"tag":63,"props":2959,"children":2960},{"style":76},[2961],{"type":44,"value":1244},{"type":29,"tag":63,"props":2963,"children":2964},{"class":65,"line":23},[2965,2969,2974,2978,2983],{"type":29,"tag":63,"props":2966,"children":2967},{"style":70},[2968],{"type":44,"value":1988},{"type":29,"tag":63,"props":2970,"children":2971},{"style":147},[2972],{"type":44,"value":2973}," webkit",{"type":29,"tag":63,"props":2975,"children":2976},{"style":70},[2977],{"type":44,"value":761},{"type":29,"tag":63,"props":2979,"children":2980},{"style":117},[2981],{"type":44,"value":2982}," WebKit",{"type":29,"tag":63,"props":2984,"children":2985},{"style":76},[2986],{"type":44,"value":1244},{"type":29,"tag":63,"props":2988,"children":2989},{"class":65,"line":1059},[2990,2994,2999,3003,3008],{"type":29,"tag":63,"props":2991,"children":2992},{"style":70},[2993],{"type":44,"value":1988},{"type":29,"tag":63,"props":2995,"children":2996},{"style":147},[2997],{"type":44,"value":2998}," options",{"type":29,"tag":63,"props":3000,"children":3001},{"style":70},[3002],{"type":44,"value":761},{"type":29,"tag":63,"props":3004,"children":3005},{"style":117},[3006],{"type":44,"value":3007}," PlaywrightOptions",{"type":29,"tag":63,"props":3009,"children":3010},{"style":76},[3011],{"type":44,"value":1244},{"type":29,"tag":63,"props":3013,"children":3014},{"class":65,"line":1091},[3015,3019,3024,3028,3033],{"type":29,"tag":63,"props":3016,"children":3017},{"style":70},[3018],{"type":44,"value":1988},{"type":29,"tag":63,"props":3020,"children":3021},{"style":147},[3022],{"type":44,"value":3023}," debugController",{"type":29,"tag":63,"props":3025,"children":3026},{"style":70},[3027],{"type":44,"value":761},{"type":29,"tag":63,"props":3029,"children":3030},{"style":117},[3031],{"type":44,"value":3032}," DebugController",{"type":29,"tag":63,"props":3034,"children":3035},{"style":76},[3036],{"type":44,"value":1244},{"type":29,"tag":63,"props":3038,"children":3039},{"class":65,"line":1108},[3040],{"type":29,"tag":63,"props":3041,"children":3042},{"emptyLinePlaceholder":97},[3043],{"type":44,"value":100},{"type":29,"tag":63,"props":3045,"children":3046},{"class":65,"line":1116},[3047,3052,3056,3061,3065,3069],{"type":29,"tag":63,"props":3048,"children":3049},{"style":70},[3050],{"type":44,"value":3051},"  constructor",{"type":29,"tag":63,"props":3053,"children":3054},{"style":76},[3055],{"type":44,"value":238},{"type":29,"tag":63,"props":3057,"children":3058},{"style":147},[3059],{"type":44,"value":3060},"options",{"type":29,"tag":63,"props":3062,"children":3063},{"style":70},[3064],{"type":44,"value":761},{"type":29,"tag":63,"props":3066,"children":3067},{"style":117},[3068],{"type":44,"value":3007},{"type":29,"tag":63,"props":3070,"children":3071},{"style":76},[3072],{"type":44,"value":3073},") {\n",{"type":29,"tag":63,"props":3075,"children":3076},{"class":65,"line":1147},[3077,3082],{"type":29,"tag":63,"props":3078,"children":3079},{"style":394},[3080],{"type":44,"value":3081},"    super",{"type":29,"tag":63,"props":3083,"children":3084},{"style":76},[3085],{"type":44,"value":1212},{"type":29,"tag":63,"props":3087,"children":3088},{"class":65,"line":1155},[3089,3094,3099,3104,3108,3112],{"type":29,"tag":63,"props":3090,"children":3091},{"style":76},[3092],{"type":44,"value":3093},"      { attribution: {}, instrumentation: ",{"type":29,"tag":63,"props":3095,"children":3096},{"style":117},[3097],{"type":44,"value":3098},"createInstrumentation",{"type":29,"tag":63,"props":3100,"children":3101},{"style":76},[3102],{"type":44,"value":3103},"() } ",{"type":29,"tag":63,"props":3105,"children":3106},{"style":70},[3107],{"type":44,"value":1235},{"type":29,"tag":63,"props":3109,"children":3110},{"style":394},[3111],{"type":44,"value":1583},{"type":29,"tag":63,"props":3113,"children":3114},{"style":76},[3115],{"type":44,"value":857},{"type":29,"tag":63,"props":3117,"children":3118},{"class":65,"line":1164},[3119,3124],{"type":29,"tag":63,"props":3120,"children":3121},{"style":394},[3122],{"type":44,"value":3123},"      undefined",{"type":29,"tag":63,"props":3125,"children":3126},{"style":76},[3127],{"type":44,"value":857},{"type":29,"tag":63,"props":3129,"children":3130},{"class":65,"line":1183},[3131],{"type":29,"tag":63,"props":3132,"children":3133},{"style":87},[3134],{"type":44,"value":3135},"      \"Playwright\"\n",{"type":29,"tag":63,"props":3137,"children":3138},{"class":65,"line":1215},[3139],{"type":29,"tag":63,"props":3140,"children":3141},{"style":76},[3142],{"type":44,"value":3143},"    );\n",{"type":29,"tag":63,"props":3145,"children":3146},{"class":65,"line":1224},[3147,3152,3157,3161],{"type":29,"tag":63,"props":3148,"children":3149},{"style":394},[3150],{"type":44,"value":3151},"    this",{"type":29,"tag":63,"props":3153,"children":3154},{"style":76},[3155],{"type":44,"value":3156},".options ",{"type":29,"tag":63,"props":3158,"children":3159},{"style":70},[3160],{"type":44,"value":1258},{"type":29,"tag":63,"props":3162,"children":3163},{"style":76},[3164],{"type":44,"value":3165}," options;\n",{"type":29,"tag":63,"props":3167,"children":3168},{"class":65,"line":1247},[3169,3173,3178,3182,3186,3190,3194,3199],{"type":29,"tag":63,"props":3170,"children":3171},{"style":394},[3172],{"type":44,"value":3151},{"type":29,"tag":63,"props":3174,"children":3175},{"style":76},[3176],{"type":44,"value":3177},".chromium ",{"type":29,"tag":63,"props":3179,"children":3180},{"style":70},[3181],{"type":44,"value":1258},{"type":29,"tag":63,"props":3183,"children":3184},{"style":70},[3185],{"type":44,"value":893},{"type":29,"tag":63,"props":3187,"children":3188},{"style":117},[3189],{"type":44,"value":2882},{"type":29,"tag":63,"props":3191,"children":3192},{"style":76},[3193],{"type":44,"value":238},{"type":29,"tag":63,"props":3195,"children":3196},{"style":394},[3197],{"type":44,"value":3198},"this",{"type":29,"tag":63,"props":3200,"children":3201},{"style":76},[3202],{"type":44,"value":429},{"type":29,"tag":63,"props":3204,"children":3205},{"class":65,"line":1274},[3206,3210,3215,3219,3223,3227,3231,3235],{"type":29,"tag":63,"props":3207,"children":3208},{"style":394},[3209],{"type":44,"value":3151},{"type":29,"tag":63,"props":3211,"children":3212},{"style":76},[3213],{"type":44,"value":3214},".firefox ",{"type":29,"tag":63,"props":3216,"children":3217},{"style":70},[3218],{"type":44,"value":1258},{"type":29,"tag":63,"props":3220,"children":3221},{"style":70},[3222],{"type":44,"value":893},{"type":29,"tag":63,"props":3224,"children":3225},{"style":117},[3226],{"type":44,"value":2957},{"type":29,"tag":63,"props":3228,"children":3229},{"style":76},[3230],{"type":44,"value":238},{"type":29,"tag":63,"props":3232,"children":3233},{"style":394},[3234],{"type":44,"value":3198},{"type":29,"tag":63,"props":3236,"children":3237},{"style":76},[3238],{"type":44,"value":429},{"type":29,"tag":63,"props":3240,"children":3241},{"class":65,"line":1283},[3242,3246,3251,3255,3259,3263,3267,3271],{"type":29,"tag":63,"props":3243,"children":3244},{"style":394},[3245],{"type":44,"value":3151},{"type":29,"tag":63,"props":3247,"children":3248},{"style":76},[3249],{"type":44,"value":3250},".webkit ",{"type":29,"tag":63,"props":3252,"children":3253},{"style":70},[3254],{"type":44,"value":1258},{"type":29,"tag":63,"props":3256,"children":3257},{"style":70},[3258],{"type":44,"value":893},{"type":29,"tag":63,"props":3260,"children":3261},{"style":117},[3262],{"type":44,"value":2982},{"type":29,"tag":63,"props":3264,"children":3265},{"style":76},[3266],{"type":44,"value":238},{"type":29,"tag":63,"props":3268,"children":3269},{"style":394},[3270],{"type":44,"value":3198},{"type":29,"tag":63,"props":3272,"children":3273},{"style":76},[3274],{"type":44,"value":429},{"type":29,"tag":63,"props":3276,"children":3277},{"class":65,"line":1292},[3278,3282,3287,3291,3295,3299],{"type":29,"tag":63,"props":3279,"children":3280},{"style":394},[3281],{"type":44,"value":3151},{"type":29,"tag":63,"props":3283,"children":3284},{"style":76},[3285],{"type":44,"value":3286},".selectors ",{"type":29,"tag":63,"props":3288,"children":3289},{"style":70},[3290],{"type":44,"value":1258},{"type":29,"tag":63,"props":3292,"children":3293},{"style":70},[3294],{"type":44,"value":893},{"type":29,"tag":63,"props":3296,"children":3297},{"style":117},[3298],{"type":44,"value":2857},{"type":29,"tag":63,"props":3300,"children":3301},{"style":76},[3302],{"type":44,"value":939},{"type":29,"tag":63,"props":3304,"children":3305},{"class":65,"line":1317},[3306,3310,3315,3319,3323,3327,3331,3335],{"type":29,"tag":63,"props":3307,"children":3308},{"style":394},[3309],{"type":44,"value":3151},{"type":29,"tag":63,"props":3311,"children":3312},{"style":76},[3313],{"type":44,"value":3314},".debugController ",{"type":29,"tag":63,"props":3316,"children":3317},{"style":70},[3318],{"type":44,"value":1258},{"type":29,"tag":63,"props":3320,"children":3321},{"style":70},[3322],{"type":44,"value":893},{"type":29,"tag":63,"props":3324,"children":3325},{"style":117},[3326],{"type":44,"value":3032},{"type":29,"tag":63,"props":3328,"children":3329},{"style":76},[3330],{"type":44,"value":238},{"type":29,"tag":63,"props":3332,"children":3333},{"style":394},[3334],{"type":44,"value":3198},{"type":29,"tag":63,"props":3336,"children":3337},{"style":76},[3338],{"type":44,"value":429},{"type":29,"tag":63,"props":3340,"children":3341},{"class":65,"line":1326},[3342],{"type":29,"tag":63,"props":3343,"children":3344},{"style":76},[3345],{"type":44,"value":2123},{"type":29,"tag":63,"props":3347,"children":3348},{"class":65,"line":1334},[3349],{"type":29,"tag":63,"props":3350,"children":3351},{"style":76},[3352],{"type":44,"value":257},{"type":29,"tag":30,"props":3354,"children":3355},{},[3356,3358,3364,3366,3371],{"type":44,"value":3357},"This class contains all of the core browser automation functionality for Playwright. Diving deeper, if you look into ",{"type":29,"tag":59,"props":3359,"children":3361},{"className":3360},[],[3362],{"type":44,"value":3363},"packages/playwright-core/server/chromium/",{"type":44,"value":3365}," you will see all the functionality for automating a ",{"type":29,"tag":59,"props":3367,"children":3369},{"className":3368},[],[3370],{"type":44,"value":1801},{"type":44,"value":201},{"type":29,"tag":269,"props":3373,"children":3375},{"id":3374},"rootdispatcher-and-server-side-playwright",[3376],{"type":44,"value":3377},"RootDispatcher and server-side Playwright",{"type":29,"tag":30,"props":3379,"children":3380},{},[3381,3383,3388,3390,3396,3398,3404],{"type":44,"value":3382},"Continuing down ",{"type":29,"tag":59,"props":3384,"children":3386},{"className":3385},[],[3387],{"type":44,"value":504},{"type":44,"value":3389},", we see there's the construction of a ",{"type":29,"tag":59,"props":3391,"children":3393},{"className":3392},[],[3394],{"type":44,"value":3395},"RootDispatcher",{"type":44,"value":3397}," instance, and a ",{"type":29,"tag":59,"props":3399,"children":3401},{"className":3400},[],[3402],{"type":44,"value":3403},"PlaywrightDispatcher",{"type":44,"value":3405}," instance.",{"type":29,"tag":52,"props":3407,"children":3409},{"className":54,"code":3408,"filename":730,"language":56,"meta":7,"style":7},"const rootScope = new RootDispatcher(dispatcherConnection);\n\n// Initialize Playwright channel.\nnew PlaywrightDispatcher(rootScope, playwright);\n",[3410],{"type":29,"tag":59,"props":3411,"children":3412},{"__ignoreMap":7},[3413,3440,3447,3455],{"type":29,"tag":63,"props":3414,"children":3415},{"class":65,"line":66},[3416,3420,3424,3428,3432,3436],{"type":29,"tag":63,"props":3417,"children":3418},{"style":70},[3419],{"type":44,"value":1842},{"type":29,"tag":63,"props":3421,"children":3422},{"style":394},[3423],{"type":44,"value":1126},{"type":29,"tag":63,"props":3425,"children":3426},{"style":70},[3427],{"type":44,"value":155},{"type":29,"tag":63,"props":3429,"children":3430},{"style":70},[3431],{"type":44,"value":893},{"type":29,"tag":63,"props":3433,"children":3434},{"style":117},[3435],{"type":44,"value":1139},{"type":29,"tag":63,"props":3437,"children":3438},{"style":76},[3439],{"type":44,"value":1144},{"type":29,"tag":63,"props":3441,"children":3442},{"class":65,"line":93},[3443],{"type":29,"tag":63,"props":3444,"children":3445},{"emptyLinePlaceholder":97},[3446],{"type":44,"value":100},{"type":29,"tag":63,"props":3448,"children":3449},{"class":65,"line":103},[3450],{"type":29,"tag":63,"props":3451,"children":3452},{"style":977},[3453],{"type":44,"value":3454},"// Initialize Playwright channel.\n",{"type":29,"tag":63,"props":3456,"children":3457},{"class":65,"line":138},[3458,3463,3467],{"type":29,"tag":63,"props":3459,"children":3460},{"style":70},[3461],{"type":44,"value":3462},"new",{"type":29,"tag":63,"props":3464,"children":3465},{"style":117},[3466],{"type":44,"value":1175},{"type":29,"tag":63,"props":3468,"children":3469},{"style":76},[3470],{"type":44,"value":1180},{"type":29,"tag":30,"props":3472,"children":3473},{},[3474,3476,3482,3484,3489,3491,3496,3498,3503,3505,3510,3512,3517,3519,3524,3526,3531],{"type":44,"value":3475},"Note the ",{"type":29,"tag":59,"props":3477,"children":3479},{"className":3478},[],[3480],{"type":44,"value":3481},"rootScope",{"type":44,"value":3483}," object is referenced throughout the dispatcher classes, and acts as a wrapper around the ",{"type":29,"tag":59,"props":3485,"children":3487},{"className":3486},[],[3488],{"type":44,"value":2605},{"type":44,"value":3490}," object instantiated above, so that each of the child ",{"type":29,"tag":59,"props":3492,"children":3494},{"className":3493},[],[3495],{"type":44,"value":619},{"type":44,"value":3497}," classes will have access to the ",{"type":29,"tag":59,"props":3499,"children":3501},{"className":3500},[],[3502],{"type":44,"value":2605},{"type":44,"value":3504}," through the ",{"type":29,"tag":59,"props":3506,"children":3508},{"className":3507},[],[3509],{"type":44,"value":3481},{"type":44,"value":3511}," object. This wrapping functionality will become clearer when we dive into ",{"type":29,"tag":59,"props":3513,"children":3515},{"className":3514},[],[3516],{"type":44,"value":3403},{"type":44,"value":3518},"'s constructor, where it passes the ",{"type":29,"tag":59,"props":3520,"children":3522},{"className":3521},[],[3523],{"type":44,"value":3481},{"type":44,"value":3525}," to all of the child ",{"type":29,"tag":59,"props":3527,"children":3529},{"className":3528},[],[3530],{"type":44,"value":619},{"type":44,"value":3532}," classes.",{"type":29,"tag":30,"props":3534,"children":3535},{},[3536,3538,3544],{"type":44,"value":3537},"Here's a simplified version of what's happening in the constructor for ",{"type":29,"tag":59,"props":3539,"children":3541},{"className":3540},[],[3542],{"type":44,"value":3543},"Rootscope",{"type":44,"value":761},{"type":29,"tag":52,"props":3546,"children":3549},{"className":54,"code":3547,"filename":3548,"language":56,"meta":7,"style":7},"class RootDispatcher extends Dispatcher {\n  constructor(connection: DispatcherConnection) {\n    super(connection, { guid: \"\" }, \"Root\", {});\n  }\n}\n\nclass Dispatcher extends EventEmitter {\n  _connection: DispatcherConnection;\n  _parent: DispatcherConnection | undefined;\n\n  constructor(\n    parent: ParentScopeType | DispatcherConnection,\n    object: Type,\n    type: string,\n    initializer: channels.InitializerTraits\u003CType>\n  ) {\n    super();\n\n    this._connection =\n      parent instanceof DispatcherConnection ? parent : parent._connection;\n    this._parent = parent instanceof DispatcherConnection ? undefined : parent;\n\n    this._guid = object.guid;\n    this._type = type;\n    this._object = object;\n\n    this._connection.registerDispatcher(this);\n\n    if (this._parent)\n      this._connection.sendCreate(\n        this._parent,\n        type,\n        guid,\n        initializer,\n        this._parent._object\n      );\n  }\n}\n","playwright-core/src/server/dispatchers/dispatcher.ts",[3550],{"type":29,"tag":59,"props":3551,"children":3552},{"__ignoreMap":7},[3553,3578,3606,3637,3644,3651,3658,3681,3701,3729,3736,3747,3776,3797,3817,3857,3865,3876,3883,3900,3936,3982,3989,4010,4031,4052,4059,4088,4095,4116,4137,4150,4158,4166,4174,4186,4194,4201],{"type":29,"tag":63,"props":3554,"children":3555},{"class":65,"line":66},[3556,3561,3565,3569,3574],{"type":29,"tag":63,"props":3557,"children":3558},{"style":70},[3559],{"type":44,"value":3560},"class",{"type":29,"tag":63,"props":3562,"children":3563},{"style":117},[3564],{"type":44,"value":1139},{"type":29,"tag":63,"props":3566,"children":3567},{"style":70},[3568],{"type":44,"value":1971},{"type":29,"tag":63,"props":3570,"children":3571},{"style":117},[3572],{"type":44,"value":3573}," Dispatcher",{"type":29,"tag":63,"props":3575,"children":3576},{"style":76},[3577],{"type":44,"value":135},{"type":29,"tag":63,"props":3579,"children":3580},{"class":65,"line":93},[3581,3585,3589,3594,3598,3602],{"type":29,"tag":63,"props":3582,"children":3583},{"style":70},[3584],{"type":44,"value":3051},{"type":29,"tag":63,"props":3586,"children":3587},{"style":76},[3588],{"type":44,"value":238},{"type":29,"tag":63,"props":3590,"children":3591},{"style":147},[3592],{"type":44,"value":3593},"connection",{"type":29,"tag":63,"props":3595,"children":3596},{"style":70},[3597],{"type":44,"value":761},{"type":29,"tag":63,"props":3599,"children":3600},{"style":117},[3601],{"type":44,"value":965},{"type":29,"tag":63,"props":3603,"children":3604},{"style":76},[3605],{"type":44,"value":3073},{"type":29,"tag":63,"props":3607,"children":3608},{"class":65,"line":103},[3609,3613,3618,3622,3627,3632],{"type":29,"tag":63,"props":3610,"children":3611},{"style":394},[3612],{"type":44,"value":3081},{"type":29,"tag":63,"props":3614,"children":3615},{"style":76},[3616],{"type":44,"value":3617},"(connection, { guid: ",{"type":29,"tag":63,"props":3619,"children":3620},{"style":87},[3621],{"type":44,"value":1660},{"type":29,"tag":63,"props":3623,"children":3624},{"style":76},[3625],{"type":44,"value":3626}," }, ",{"type":29,"tag":63,"props":3628,"children":3629},{"style":87},[3630],{"type":44,"value":3631},"\"Root\"",{"type":29,"tag":63,"props":3633,"children":3634},{"style":76},[3635],{"type":44,"value":3636},", {});\n",{"type":29,"tag":63,"props":3638,"children":3639},{"class":65,"line":138},[3640],{"type":29,"tag":63,"props":3641,"children":3642},{"style":76},[3643],{"type":44,"value":2123},{"type":29,"tag":63,"props":3645,"children":3646},{"class":65,"line":178},[3647],{"type":29,"tag":63,"props":3648,"children":3649},{"style":76},[3650],{"type":44,"value":257},{"type":29,"tag":63,"props":3652,"children":3653},{"class":65,"line":213},[3654],{"type":29,"tag":63,"props":3655,"children":3656},{"emptyLinePlaceholder":97},[3657],{"type":44,"value":100},{"type":29,"tag":63,"props":3659,"children":3660},{"class":65,"line":251},[3661,3665,3669,3673,3677],{"type":29,"tag":63,"props":3662,"children":3663},{"style":70},[3664],{"type":44,"value":3560},{"type":29,"tag":63,"props":3666,"children":3667},{"style":117},[3668],{"type":44,"value":3573},{"type":29,"tag":63,"props":3670,"children":3671},{"style":70},[3672],{"type":44,"value":1971},{"type":29,"tag":63,"props":3674,"children":3675},{"style":117},[3676],{"type":44,"value":1976},{"type":29,"tag":63,"props":3678,"children":3679},{"style":76},[3680],{"type":44,"value":135},{"type":29,"tag":63,"props":3682,"children":3683},{"class":65,"line":923},[3684,3689,3693,3697],{"type":29,"tag":63,"props":3685,"children":3686},{"style":147},[3687],{"type":44,"value":3688},"  _connection",{"type":29,"tag":63,"props":3690,"children":3691},{"style":70},[3692],{"type":44,"value":761},{"type":29,"tag":63,"props":3694,"children":3695},{"style":117},[3696],{"type":44,"value":965},{"type":29,"tag":63,"props":3698,"children":3699},{"style":76},[3700],{"type":44,"value":1244},{"type":29,"tag":63,"props":3702,"children":3703},{"class":65,"line":942},[3704,3709,3713,3717,3721,3725],{"type":29,"tag":63,"props":3705,"children":3706},{"style":147},[3707],{"type":44,"value":3708},"  _parent",{"type":29,"tag":63,"props":3710,"children":3711},{"style":70},[3712],{"type":44,"value":761},{"type":29,"tag":63,"props":3714,"children":3715},{"style":117},[3716],{"type":44,"value":965},{"type":29,"tag":63,"props":3718,"children":3719},{"style":70},[3720],{"type":44,"value":832},{"type":29,"tag":63,"props":3722,"children":3723},{"style":394},[3724],{"type":44,"value":837},{"type":29,"tag":63,"props":3726,"children":3727},{"style":76},[3728],{"type":44,"value":1244},{"type":29,"tag":63,"props":3730,"children":3731},{"class":65,"line":987},[3732],{"type":29,"tag":63,"props":3733,"children":3734},{"emptyLinePlaceholder":97},[3735],{"type":44,"value":100},{"type":29,"tag":63,"props":3737,"children":3738},{"class":65,"line":995},[3739,3743],{"type":29,"tag":63,"props":3740,"children":3741},{"style":70},[3742],{"type":44,"value":3051},{"type":29,"tag":63,"props":3744,"children":3745},{"style":76},[3746],{"type":44,"value":1212},{"type":29,"tag":63,"props":3748,"children":3749},{"class":65,"line":1004},[3750,3755,3759,3764,3768,3772],{"type":29,"tag":63,"props":3751,"children":3752},{"style":147},[3753],{"type":44,"value":3754},"    parent",{"type":29,"tag":63,"props":3756,"children":3757},{"style":70},[3758],{"type":44,"value":761},{"type":29,"tag":63,"props":3760,"children":3761},{"style":117},[3762],{"type":44,"value":3763}," ParentScopeType",{"type":29,"tag":63,"props":3765,"children":3766},{"style":70},[3767],{"type":44,"value":832},{"type":29,"tag":63,"props":3769,"children":3770},{"style":117},[3771],{"type":44,"value":965},{"type":29,"tag":63,"props":3773,"children":3774},{"style":76},[3775],{"type":44,"value":857},{"type":29,"tag":63,"props":3777,"children":3778},{"class":65,"line":23},[3779,3784,3788,3793],{"type":29,"tag":63,"props":3780,"children":3781},{"style":147},[3782],{"type":44,"value":3783},"    object",{"type":29,"tag":63,"props":3785,"children":3786},{"style":70},[3787],{"type":44,"value":761},{"type":29,"tag":63,"props":3789,"children":3790},{"style":117},[3791],{"type":44,"value":3792}," Type",{"type":29,"tag":63,"props":3794,"children":3795},{"style":76},[3796],{"type":44,"value":857},{"type":29,"tag":63,"props":3798,"children":3799},{"class":65,"line":1059},[3800,3805,3809,3813],{"type":29,"tag":63,"props":3801,"children":3802},{"style":147},[3803],{"type":44,"value":3804},"    type",{"type":29,"tag":63,"props":3806,"children":3807},{"style":70},[3808],{"type":44,"value":761},{"type":29,"tag":63,"props":3810,"children":3811},{"style":394},[3812],{"type":44,"value":2063},{"type":29,"tag":63,"props":3814,"children":3815},{"style":76},[3816],{"type":44,"value":857},{"type":29,"tag":63,"props":3818,"children":3819},{"class":65,"line":1091},[3820,3825,3829,3834,3838,3843,3847,3852],{"type":29,"tag":63,"props":3821,"children":3822},{"style":147},[3823],{"type":44,"value":3824},"    initializer",{"type":29,"tag":63,"props":3826,"children":3827},{"style":70},[3828],{"type":44,"value":761},{"type":29,"tag":63,"props":3830,"children":3831},{"style":117},[3832],{"type":44,"value":3833}," channels",{"type":29,"tag":63,"props":3835,"children":3836},{"style":76},[3837],{"type":44,"value":228},{"type":29,"tag":63,"props":3839,"children":3840},{"style":117},[3841],{"type":44,"value":3842},"InitializerTraits",{"type":29,"tag":63,"props":3844,"children":3845},{"style":76},[3846],{"type":44,"value":2011},{"type":29,"tag":63,"props":3848,"children":3849},{"style":117},[3850],{"type":44,"value":3851},"Type",{"type":29,"tag":63,"props":3853,"children":3854},{"style":76},[3855],{"type":44,"value":3856},">\n",{"type":29,"tag":63,"props":3858,"children":3859},{"class":65,"line":1108},[3860],{"type":29,"tag":63,"props":3861,"children":3862},{"style":76},[3863],{"type":44,"value":3864},"  ) {\n",{"type":29,"tag":63,"props":3866,"children":3867},{"class":65,"line":1116},[3868,3872],{"type":29,"tag":63,"props":3869,"children":3870},{"style":394},[3871],{"type":44,"value":3081},{"type":29,"tag":63,"props":3873,"children":3874},{"style":76},[3875],{"type":44,"value":939},{"type":29,"tag":63,"props":3877,"children":3878},{"class":65,"line":1147},[3879],{"type":29,"tag":63,"props":3880,"children":3881},{"emptyLinePlaceholder":97},[3882],{"type":44,"value":100},{"type":29,"tag":63,"props":3884,"children":3885},{"class":65,"line":1155},[3886,3890,3895],{"type":29,"tag":63,"props":3887,"children":3888},{"style":394},[3889],{"type":44,"value":3151},{"type":29,"tag":63,"props":3891,"children":3892},{"style":76},[3893],{"type":44,"value":3894},"._connection ",{"type":29,"tag":63,"props":3896,"children":3897},{"style":70},[3898],{"type":44,"value":3899},"=\n",{"type":29,"tag":63,"props":3901,"children":3902},{"class":65,"line":1164},[3903,3908,3913,3917,3922,3927,3931],{"type":29,"tag":63,"props":3904,"children":3905},{"style":76},[3906],{"type":44,"value":3907},"      parent ",{"type":29,"tag":63,"props":3909,"children":3910},{"style":70},[3911],{"type":44,"value":3912},"instanceof",{"type":29,"tag":63,"props":3914,"children":3915},{"style":117},[3916],{"type":44,"value":965},{"type":29,"tag":63,"props":3918,"children":3919},{"style":70},[3920],{"type":44,"value":3921}," ?",{"type":29,"tag":63,"props":3923,"children":3924},{"style":76},[3925],{"type":44,"value":3926}," parent ",{"type":29,"tag":63,"props":3928,"children":3929},{"style":70},[3930],{"type":44,"value":761},{"type":29,"tag":63,"props":3932,"children":3933},{"style":76},[3934],{"type":44,"value":3935}," parent._connection;\n",{"type":29,"tag":63,"props":3937,"children":3938},{"class":65,"line":1183},[3939,3943,3948,3952,3956,3960,3964,3968,3972,3977],{"type":29,"tag":63,"props":3940,"children":3941},{"style":394},[3942],{"type":44,"value":3151},{"type":29,"tag":63,"props":3944,"children":3945},{"style":76},[3946],{"type":44,"value":3947},"._parent ",{"type":29,"tag":63,"props":3949,"children":3950},{"style":70},[3951],{"type":44,"value":1258},{"type":29,"tag":63,"props":3953,"children":3954},{"style":76},[3955],{"type":44,"value":3926},{"type":29,"tag":63,"props":3957,"children":3958},{"style":70},[3959],{"type":44,"value":3912},{"type":29,"tag":63,"props":3961,"children":3962},{"style":117},[3963],{"type":44,"value":965},{"type":29,"tag":63,"props":3965,"children":3966},{"style":70},[3967],{"type":44,"value":3921},{"type":29,"tag":63,"props":3969,"children":3970},{"style":394},[3971],{"type":44,"value":837},{"type":29,"tag":63,"props":3973,"children":3974},{"style":70},[3975],{"type":44,"value":3976}," :",{"type":29,"tag":63,"props":3978,"children":3979},{"style":76},[3980],{"type":44,"value":3981}," parent;\n",{"type":29,"tag":63,"props":3983,"children":3984},{"class":65,"line":1215},[3985],{"type":29,"tag":63,"props":3986,"children":3987},{"emptyLinePlaceholder":97},[3988],{"type":44,"value":100},{"type":29,"tag":63,"props":3990,"children":3991},{"class":65,"line":1224},[3992,3996,4001,4005],{"type":29,"tag":63,"props":3993,"children":3994},{"style":394},[3995],{"type":44,"value":3151},{"type":29,"tag":63,"props":3997,"children":3998},{"style":76},[3999],{"type":44,"value":4000},"._guid ",{"type":29,"tag":63,"props":4002,"children":4003},{"style":70},[4004],{"type":44,"value":1258},{"type":29,"tag":63,"props":4006,"children":4007},{"style":76},[4008],{"type":44,"value":4009}," object.guid;\n",{"type":29,"tag":63,"props":4011,"children":4012},{"class":65,"line":1247},[4013,4017,4022,4026],{"type":29,"tag":63,"props":4014,"children":4015},{"style":394},[4016],{"type":44,"value":3151},{"type":29,"tag":63,"props":4018,"children":4019},{"style":76},[4020],{"type":44,"value":4021},"._type ",{"type":29,"tag":63,"props":4023,"children":4024},{"style":70},[4025],{"type":44,"value":1258},{"type":29,"tag":63,"props":4027,"children":4028},{"style":76},[4029],{"type":44,"value":4030}," type;\n",{"type":29,"tag":63,"props":4032,"children":4033},{"class":65,"line":1274},[4034,4038,4043,4047],{"type":29,"tag":63,"props":4035,"children":4036},{"style":394},[4037],{"type":44,"value":3151},{"type":29,"tag":63,"props":4039,"children":4040},{"style":76},[4041],{"type":44,"value":4042},"._object ",{"type":29,"tag":63,"props":4044,"children":4045},{"style":70},[4046],{"type":44,"value":1258},{"type":29,"tag":63,"props":4048,"children":4049},{"style":76},[4050],{"type":44,"value":4051}," object;\n",{"type":29,"tag":63,"props":4053,"children":4054},{"class":65,"line":1283},[4055],{"type":29,"tag":63,"props":4056,"children":4057},{"emptyLinePlaceholder":97},[4058],{"type":44,"value":100},{"type":29,"tag":63,"props":4060,"children":4061},{"class":65,"line":1292},[4062,4066,4071,4076,4080,4084],{"type":29,"tag":63,"props":4063,"children":4064},{"style":394},[4065],{"type":44,"value":3151},{"type":29,"tag":63,"props":4067,"children":4068},{"style":76},[4069],{"type":44,"value":4070},"._connection.",{"type":29,"tag":63,"props":4072,"children":4073},{"style":117},[4074],{"type":44,"value":4075},"registerDispatcher",{"type":29,"tag":63,"props":4077,"children":4078},{"style":76},[4079],{"type":44,"value":238},{"type":29,"tag":63,"props":4081,"children":4082},{"style":394},[4083],{"type":44,"value":3198},{"type":29,"tag":63,"props":4085,"children":4086},{"style":76},[4087],{"type":44,"value":429},{"type":29,"tag":63,"props":4089,"children":4090},{"class":65,"line":1317},[4091],{"type":29,"tag":63,"props":4092,"children":4093},{"emptyLinePlaceholder":97},[4094],{"type":44,"value":100},{"type":29,"tag":63,"props":4096,"children":4097},{"class":65,"line":1326},[4098,4103,4107,4111],{"type":29,"tag":63,"props":4099,"children":4100},{"style":70},[4101],{"type":44,"value":4102},"    if",{"type":29,"tag":63,"props":4104,"children":4105},{"style":76},[4106],{"type":44,"value":1024},{"type":29,"tag":63,"props":4108,"children":4109},{"style":394},[4110],{"type":44,"value":3198},{"type":29,"tag":63,"props":4112,"children":4113},{"style":76},[4114],{"type":44,"value":4115},"._parent)\n",{"type":29,"tag":63,"props":4117,"children":4118},{"class":65,"line":1334},[4119,4124,4128,4133],{"type":29,"tag":63,"props":4120,"children":4121},{"style":394},[4122],{"type":44,"value":4123},"      this",{"type":29,"tag":63,"props":4125,"children":4126},{"style":76},[4127],{"type":44,"value":4070},{"type":29,"tag":63,"props":4129,"children":4130},{"style":117},[4131],{"type":44,"value":4132},"sendCreate",{"type":29,"tag":63,"props":4134,"children":4135},{"style":76},[4136],{"type":44,"value":1212},{"type":29,"tag":63,"props":4138,"children":4139},{"class":65,"line":1359},[4140,4145],{"type":29,"tag":63,"props":4141,"children":4142},{"style":394},[4143],{"type":44,"value":4144},"        this",{"type":29,"tag":63,"props":4146,"children":4147},{"style":76},[4148],{"type":44,"value":4149},"._parent,\n",{"type":29,"tag":63,"props":4151,"children":4152},{"class":65,"line":1368},[4153],{"type":29,"tag":63,"props":4154,"children":4155},{"style":76},[4156],{"type":44,"value":4157},"        type,\n",{"type":29,"tag":63,"props":4159,"children":4160},{"class":65,"line":1376},[4161],{"type":29,"tag":63,"props":4162,"children":4163},{"style":76},[4164],{"type":44,"value":4165},"        guid,\n",{"type":29,"tag":63,"props":4167,"children":4168},{"class":65,"line":1402},[4169],{"type":29,"tag":63,"props":4170,"children":4171},{"style":76},[4172],{"type":44,"value":4173},"        initializer,\n",{"type":29,"tag":63,"props":4175,"children":4176},{"class":65,"line":1410},[4177,4181],{"type":29,"tag":63,"props":4178,"children":4179},{"style":394},[4180],{"type":44,"value":4144},{"type":29,"tag":63,"props":4182,"children":4183},{"style":76},[4184],{"type":44,"value":4185},"._parent._object\n",{"type":29,"tag":63,"props":4187,"children":4188},{"class":65,"line":1419},[4189],{"type":29,"tag":63,"props":4190,"children":4191},{"style":76},[4192],{"type":44,"value":4193},"      );\n",{"type":29,"tag":63,"props":4195,"children":4196},{"class":65,"line":1451},[4197],{"type":29,"tag":63,"props":4198,"children":4199},{"style":76},[4200],{"type":44,"value":2123},{"type":29,"tag":63,"props":4202,"children":4203},{"class":65,"line":1482},[4204],{"type":29,"tag":63,"props":4205,"children":4206},{"style":76},[4207],{"type":44,"value":257},{"type":29,"tag":30,"props":4209,"children":4210},{},[4211,4213,4218,4220,4225,4227,4232,4234,4240,4242,4247,4249,4254,4256,4261,4263,4268,4270,4275,4277,4282,4284,4289,4291,4296],{"type":44,"value":4212},"In the ",{"type":29,"tag":59,"props":4214,"children":4216},{"className":4215},[],[4217],{"type":44,"value":619},{"type":44,"value":4219}," constructor we see the connection always comes from either the inherited parent ",{"type":29,"tag":59,"props":4221,"children":4223},{"className":4222},[],[4224],{"type":44,"value":619},{"type":44,"value":4226},", or from the ",{"type":29,"tag":59,"props":4228,"children":4230},{"className":4229},[],[4231],{"type":44,"value":687},{"type":44,"value":4233}," passed into the ",{"type":29,"tag":59,"props":4235,"children":4237},{"className":4236},[],[4238],{"type":44,"value":4239},"parent",{"type":44,"value":4241}," parameter. This, coupled with ",{"type":29,"tag":59,"props":4243,"children":4245},{"className":4244},[],[4246],{"type":44,"value":3481},{"type":44,"value":4248}," having the name ",{"type":29,"tag":59,"props":4250,"children":4252},{"className":4251},[],[4253],{"type":44,"value":26},{"type":44,"value":4255},", gives us the hint that every dispatcher in the server library will have access to the ",{"type":29,"tag":59,"props":4257,"children":4259},{"className":4258},[],[4260],{"type":44,"value":2605},{"type":44,"value":4262}," instance (from ",{"type":29,"tag":59,"props":4264,"children":4266},{"className":4265},[],[4267],{"type":44,"value":504},{"type":44,"value":4269},"). Furthermore, the ",{"type":29,"tag":59,"props":4271,"children":4273},{"className":4272},[],[4274],{"type":44,"value":2605},{"type":44,"value":4276}," will register every instance of a subclass of ",{"type":29,"tag":59,"props":4278,"children":4280},{"className":4279},[],[4281],{"type":44,"value":619},{"type":44,"value":4283},", hinting that it will communicate with each of the ",{"type":29,"tag":59,"props":4285,"children":4287},{"className":4286},[],[4288],{"type":44,"value":619},{"type":44,"value":4290}," objects. These points will become more clear after looking at the ",{"type":29,"tag":59,"props":4292,"children":4294},{"className":4293},[],[4295],{"type":44,"value":3403},{"type":44,"value":4297},"'s constructor.",{"type":29,"tag":4299,"props":4300,"children":4302},"h4",{"id":4301},"playwrightdispatcher-and-its-constructor",[4303],{"type":44,"value":4304},"PlaywrightDispatcher and its constructor",{"type":29,"tag":30,"props":4306,"children":4307},{},[4308,4310,4315],{"type":44,"value":4309},"Let's look closer at a slightly simplified version of ",{"type":29,"tag":59,"props":4311,"children":4313},{"className":4312},[],[4314],{"type":44,"value":3403},{"type":44,"value":4316},"'s constructor",{"type":29,"tag":52,"props":4318,"children":4321},{"className":54,"code":4319,"filename":4320,"language":56,"meta":7,"style":7},"import type { Playwright } from \"playwright-core/src/server/playwright\";\n\nclass PlaywrightDispatcher extends Dispatcher {\n  constructor(scope: RootDispatcher, playwright: Playwright) {\n    super(scope, playwright, \"Playwright\", {\n      chromium: new BrowserTypeDispatcher(scope, playwright.chromium),\n      firefox: new BrowserTypeDispatcher(scope, playwright.firefox),\n      webkit: new BrowserTypeDispatcher(scope, playwright.webkit),\n      // ...\n    });\n  }\n}\n","packages/playwright-core/src/server/dispatchers/playwrightDispatcher.ts",[4322],{"type":29,"tag":59,"props":4323,"children":4324},{"__ignoreMap":7},[4325,4355,4362,4385,4429,4451,4473,4494,4515,4523,4531,4538],{"type":29,"tag":63,"props":4326,"children":4327},{"class":65,"line":66},[4328,4332,4337,4342,4346,4351],{"type":29,"tag":63,"props":4329,"children":4330},{"style":70},[4331],{"type":44,"value":73},{"type":29,"tag":63,"props":4333,"children":4334},{"style":70},[4335],{"type":44,"value":4336}," type",{"type":29,"tag":63,"props":4338,"children":4339},{"style":76},[4340],{"type":44,"value":4341}," { Playwright } ",{"type":29,"tag":63,"props":4343,"children":4344},{"style":70},[4345],{"type":44,"value":84},{"type":29,"tag":63,"props":4347,"children":4348},{"style":87},[4349],{"type":44,"value":4350}," \"playwright-core/src/server/playwright\"",{"type":29,"tag":63,"props":4352,"children":4353},{"style":76},[4354],{"type":44,"value":1244},{"type":29,"tag":63,"props":4356,"children":4357},{"class":65,"line":93},[4358],{"type":29,"tag":63,"props":4359,"children":4360},{"emptyLinePlaceholder":97},[4361],{"type":44,"value":100},{"type":29,"tag":63,"props":4363,"children":4364},{"class":65,"line":103},[4365,4369,4373,4377,4381],{"type":29,"tag":63,"props":4366,"children":4367},{"style":70},[4368],{"type":44,"value":3560},{"type":29,"tag":63,"props":4370,"children":4371},{"style":117},[4372],{"type":44,"value":1175},{"type":29,"tag":63,"props":4374,"children":4375},{"style":70},[4376],{"type":44,"value":1971},{"type":29,"tag":63,"props":4378,"children":4379},{"style":117},[4380],{"type":44,"value":3573},{"type":29,"tag":63,"props":4382,"children":4383},{"style":76},[4384],{"type":44,"value":135},{"type":29,"tag":63,"props":4386,"children":4387},{"class":65,"line":138},[4388,4392,4396,4401,4405,4409,4413,4417,4421,4425],{"type":29,"tag":63,"props":4389,"children":4390},{"style":70},[4391],{"type":44,"value":3051},{"type":29,"tag":63,"props":4393,"children":4394},{"style":76},[4395],{"type":44,"value":238},{"type":29,"tag":63,"props":4397,"children":4398},{"style":147},[4399],{"type":44,"value":4400},"scope",{"type":29,"tag":63,"props":4402,"children":4403},{"style":70},[4404],{"type":44,"value":761},{"type":29,"tag":63,"props":4406,"children":4407},{"style":117},[4408],{"type":44,"value":1139},{"type":29,"tag":63,"props":4410,"children":4411},{"style":76},[4412],{"type":44,"value":912},{"type":29,"tag":63,"props":4414,"children":4415},{"style":147},[4416],{"type":44,"value":5},{"type":29,"tag":63,"props":4418,"children":4419},{"style":70},[4420],{"type":44,"value":761},{"type":29,"tag":63,"props":4422,"children":4423},{"style":117},[4424],{"type":44,"value":2823},{"type":29,"tag":63,"props":4426,"children":4427},{"style":76},[4428],{"type":44,"value":3073},{"type":29,"tag":63,"props":4430,"children":4431},{"class":65,"line":178},[4432,4436,4441,4446],{"type":29,"tag":63,"props":4433,"children":4434},{"style":394},[4435],{"type":44,"value":3081},{"type":29,"tag":63,"props":4437,"children":4438},{"style":76},[4439],{"type":44,"value":4440},"(scope, playwright, ",{"type":29,"tag":63,"props":4442,"children":4443},{"style":87},[4444],{"type":44,"value":4445},"\"Playwright\"",{"type":29,"tag":63,"props":4447,"children":4448},{"style":76},[4449],{"type":44,"value":4450},", {\n",{"type":29,"tag":63,"props":4452,"children":4453},{"class":65,"line":213},[4454,4459,4463,4468],{"type":29,"tag":63,"props":4455,"children":4456},{"style":76},[4457],{"type":44,"value":4458},"      chromium: ",{"type":29,"tag":63,"props":4460,"children":4461},{"style":70},[4462],{"type":44,"value":3462},{"type":29,"tag":63,"props":4464,"children":4465},{"style":117},[4466],{"type":44,"value":4467}," BrowserTypeDispatcher",{"type":29,"tag":63,"props":4469,"children":4470},{"style":76},[4471],{"type":44,"value":4472},"(scope, playwright.chromium),\n",{"type":29,"tag":63,"props":4474,"children":4475},{"class":65,"line":251},[4476,4481,4485,4489],{"type":29,"tag":63,"props":4477,"children":4478},{"style":76},[4479],{"type":44,"value":4480},"      firefox: ",{"type":29,"tag":63,"props":4482,"children":4483},{"style":70},[4484],{"type":44,"value":3462},{"type":29,"tag":63,"props":4486,"children":4487},{"style":117},[4488],{"type":44,"value":4467},{"type":29,"tag":63,"props":4490,"children":4491},{"style":76},[4492],{"type":44,"value":4493},"(scope, playwright.firefox),\n",{"type":29,"tag":63,"props":4495,"children":4496},{"class":65,"line":923},[4497,4502,4506,4510],{"type":29,"tag":63,"props":4498,"children":4499},{"style":76},[4500],{"type":44,"value":4501},"      webkit: ",{"type":29,"tag":63,"props":4503,"children":4504},{"style":70},[4505],{"type":44,"value":3462},{"type":29,"tag":63,"props":4507,"children":4508},{"style":117},[4509],{"type":44,"value":4467},{"type":29,"tag":63,"props":4511,"children":4512},{"style":76},[4513],{"type":44,"value":4514},"(scope, playwright.webkit),\n",{"type":29,"tag":63,"props":4516,"children":4517},{"class":65,"line":942},[4518],{"type":29,"tag":63,"props":4519,"children":4520},{"style":977},[4521],{"type":44,"value":4522},"      // ...\n",{"type":29,"tag":63,"props":4524,"children":4525},{"class":65,"line":987},[4526],{"type":29,"tag":63,"props":4527,"children":4528},{"style":76},[4529],{"type":44,"value":4530},"    });\n",{"type":29,"tag":63,"props":4532,"children":4533},{"class":65,"line":995},[4534],{"type":29,"tag":63,"props":4535,"children":4536},{"style":76},[4537],{"type":44,"value":2123},{"type":29,"tag":63,"props":4539,"children":4540},{"class":65,"line":1004},[4541],{"type":29,"tag":63,"props":4542,"children":4543},{"style":76},[4544],{"type":44,"value":257},{"type":29,"tag":30,"props":4546,"children":4547},{},[4548,4550,4556,4558,4563,4565,4570,4572,4577,4579,4584,4586,4592,4594,4600,4602,4608,4610,4615,4617,4622],{"type":44,"value":4549},"Notice the ",{"type":29,"tag":59,"props":4551,"children":4553},{"className":4552},[],[4554],{"type":44,"value":4555},"super",{"type":44,"value":4557}," call has parameters for each of the driver types (chromium, firefox, etc.), in its initializers object. And each of the values have the ",{"type":29,"tag":59,"props":4559,"children":4561},{"className":4560},[],[4562],{"type":44,"value":3481},{"type":44,"value":4564}," from ",{"type":29,"tag":59,"props":4566,"children":4568},{"className":4567},[],[4569],{"type":44,"value":504},{"type":44,"value":4571}," passed into it as the first parameter. Every call to the server will run through the ",{"type":29,"tag":59,"props":4573,"children":4575},{"className":4574},[],[4576],{"type":44,"value":2605},{"type":44,"value":4578}," in the ",{"type":29,"tag":59,"props":4580,"children":4582},{"className":4581},[],[4583],{"type":44,"value":3481},{"type":44,"value":4585},", which then can be traced through calls in each of the dispatcher classes. ",{"type":29,"tag":59,"props":4587,"children":4589},{"className":4588},[],[4590],{"type":44,"value":4591},"BrowserTypeDispatcher",{"type":44,"value":4593}," will launch a ",{"type":29,"tag":59,"props":4595,"children":4597},{"className":4596},[],[4598],{"type":44,"value":4599},"BrowserDispatcher",{"type":44,"value":4601},", which is responsible for creating a ",{"type":29,"tag":59,"props":4603,"children":4605},{"className":4604},[],[4606],{"type":44,"value":4607},"BrowserContextDispatcher",{"type":44,"value":4609},", which can create a ",{"type":29,"tag":59,"props":4611,"children":4613},{"className":4612},[],[4614],{"type":44,"value":664},{"type":44,"value":4616},", and so on. The whole hierarchy of dispatchers directly interacting with the automated browser is contained within these few dispatcher initializations. So now we can trace all calls back to the original ",{"type":29,"tag":59,"props":4618,"children":4620},{"className":4619},[],[4621],{"type":44,"value":2605},{"type":44,"value":4623}," defined in the factory method with confidence!",{"type":29,"tag":269,"props":4625,"children":4627},{"id":4626},"tying-back-to-the-onmessage-communication",[4628],{"type":44,"value":4629},"Tying back to the onmessage communication",{"type":29,"tag":30,"props":4631,"children":4632},{},[4633,4635,4640,4641,4647],{"type":44,"value":4634},"So now that we have these server-side dispatchers constructed, let's look back at how the client-side and server-side API's are connected via the ",{"type":29,"tag":59,"props":4636,"children":4638},{"className":4637},[],[4639],{"type":44,"value":2628},{"type":44,"value":281},{"type":29,"tag":59,"props":4642,"children":4644},{"className":4643},[],[4645],{"type":44,"value":4646},"clientConnect.onmessage",{"type":44,"value":4648}," functions.",{"type":29,"tag":30,"props":4650,"children":4651},{},[4652,4654,4659,4661,4666,4668,4673,4674,4680,4682,4687,4689,4695,4697,4703,4705,4710,4712,4718,4719,4724,4725,4731,4733,4739,4741,4746,4748,4754,4756,4761],{"type":44,"value":4653},"From within ",{"type":29,"tag":59,"props":4655,"children":4657},{"className":4656},[],[4658],{"type":44,"value":2605},{"type":44,"value":4660}," its ",{"type":29,"tag":59,"props":4662,"children":4664},{"className":4663},[],[4665],{"type":44,"value":2628},{"type":44,"value":4667}," function is called from two main methods. These are ",{"type":29,"tag":59,"props":4669,"children":4671},{"className":4670},[],[4672],{"type":44,"value":1051},{"type":44,"value":281},{"type":29,"tag":59,"props":4675,"children":4677},{"className":4676},[],[4678],{"type":44,"value":4679},"_sendMessageToClient",{"type":44,"value":4681},". The first, ",{"type":29,"tag":59,"props":4683,"children":4685},{"className":4684},[],[4686],{"type":44,"value":1051},{"type":44,"value":4688},", is called from within the ",{"type":29,"tag":59,"props":4690,"children":4692},{"className":4691},[],[4693],{"type":44,"value":4694},"clientConnection.onmessage",{"type":44,"value":4696},", so the ",{"type":29,"tag":59,"props":4698,"children":4700},{"className":4699},[],[4701],{"type":44,"value":4702},"dispatcher.onmessage",{"type":44,"value":4704}," call in that case acts as a response callback. The second, ",{"type":29,"tag":59,"props":4706,"children":4708},{"className":4707},[],[4709],{"type":44,"value":4679},{"type":44,"value":4711},", is called from the ",{"type":29,"tag":59,"props":4713,"children":4715},{"className":4714},[],[4716],{"type":44,"value":4717},"sendEvent",{"type":44,"value":912},{"type":29,"tag":59,"props":4720,"children":4722},{"className":4721},[],[4723],{"type":44,"value":4132},{"type":44,"value":912},{"type":29,"tag":59,"props":4726,"children":4728},{"className":4727},[],[4729],{"type":44,"value":4730},"sendAdopt",{"type":44,"value":4732},", and ",{"type":29,"tag":59,"props":4734,"children":4736},{"className":4735},[],[4737],{"type":44,"value":4738},"sendDestroy",{"type":44,"value":4740}," methods defined within the dispatcher. Calls to these functions are spread throughout the ",{"type":29,"tag":59,"props":4742,"children":4744},{"className":4743},[],[4745],{"type":44,"value":619},{"type":44,"value":4747}," subclasses which call these functions from their internal ",{"type":29,"tag":59,"props":4749,"children":4751},{"className":4750},[],[4752],{"type":44,"value":4753},"_connection",{"type":44,"value":4755}," variable. These will tell the client to construct, update, and destroy, their corresponding client side ",{"type":29,"tag":59,"props":4757,"children":4759},{"className":4758},[],[4760],{"type":44,"value":604},{"type":44,"value":4762}," objects.",{"type":29,"tag":30,"props":4764,"children":4765},{},[4766,4768,4773,4775,4781,4783,4788,4790,4795,4797,4802],{"type":44,"value":4767},"Separately on the client-side, ",{"type":29,"tag":59,"props":4769,"children":4771},{"className":4770},[],[4772],{"type":44,"value":4694},{"type":44,"value":4774}," is called from ",{"type":29,"tag":59,"props":4776,"children":4778},{"className":4777},[],[4779],{"type":44,"value":4780},"sendMessageToServer",{"type":44,"value":4782}," whenever you use a client-side API. This sends a message over to the ",{"type":29,"tag":59,"props":4784,"children":4786},{"className":4785},[],[4787],{"type":44,"value":2605},{"type":44,"value":4789},", which finds the corresponding ",{"type":29,"tag":59,"props":4791,"children":4793},{"className":4792},[],[4794],{"type":44,"value":619},{"type":44,"value":4796}," subclass, which executes to the corresponding API call to the browser being automated. This will respond back to the client via ",{"type":29,"tag":59,"props":4798,"children":4800},{"className":4799},[],[4801],{"type":44,"value":4679},{"type":44,"value":4803},", as mentioned before.",{"type":29,"tag":269,"props":4805,"children":4807},{"id":4806},"synchronizing-objects-between-the-dispatchers-and-client-side-channelowners",[4808],{"type":44,"value":4809},"Synchronizing objects between the Dispatchers and client-side ChannelOwners",{"type":29,"tag":30,"props":4811,"children":4812},{},[4813,4815,4820,4822,4827,4829,4834,4836,4841,4843,4849],{"type":44,"value":4814},"The ",{"type":29,"tag":59,"props":4816,"children":4818},{"className":4817},[],[4819],{"type":44,"value":4132},{"type":44,"value":4821}," function is special because it is only called from within the ",{"type":29,"tag":59,"props":4823,"children":4825},{"className":4824},[],[4826],{"type":44,"value":619},{"type":44,"value":4828}," constructor, hence the constructor of each of its subclasses. This method tells the client connection to create a corresponding client-side class which handles messaging to this dispatcher. Moreover, looking into the ",{"type":29,"tag":59,"props":4830,"children":4832},{"className":4831},[],[4833],{"type":44,"value":4132},{"type":44,"value":4835}," implementation, internally it calls ",{"type":29,"tag":59,"props":4837,"children":4839},{"className":4838},[],[4840],{"type":44,"value":4679},{"type":44,"value":4842}," with the ",{"type":29,"tag":59,"props":4844,"children":4846},{"className":4845},[],[4847],{"type":44,"value":4848},"__create__",{"type":44,"value":4850}," parameter:",{"type":29,"tag":52,"props":4852,"children":4855},{"className":54,"code":4853,"filename":4854,"language":56,"meta":7,"style":7},"sendCreate(parent: DispatcherScope, type: string, guid: string, initializer: any, sdkObject?: SdkObject) {\n  const validator = findValidator(type, '', 'Initializer');\n  initializer = validator(initializer, '', { tChannelImpl: this._tChannelImplToWire.bind(this), binary: this._isLocal ? 'buffer' : 'toBase64' });\n  this._sendMessageToClient(parent._guid, type, '__create__', { type, initializer, guid }, sdkObject);\n}\n","packages/playwright-core/src/server/dispatchers/dispatcher.ts",[4856],{"type":29,"tag":59,"props":4857,"children":4858},{"__ignoreMap":7},[4859,4881,4925,5015,5046],{"type":29,"tag":63,"props":4860,"children":4861},{"class":65,"line":66},[4862,4866,4871,4876],{"type":29,"tag":63,"props":4863,"children":4864},{"style":117},[4865],{"type":44,"value":4132},{"type":29,"tag":63,"props":4867,"children":4868},{"style":76},[4869],{"type":44,"value":4870},"(parent: DispatcherScope, type: string, guid: string, initializer: any, sdkObject",{"type":29,"tag":63,"props":4872,"children":4873},{"style":70},[4874],{"type":44,"value":4875},"?:",{"type":29,"tag":63,"props":4877,"children":4878},{"style":76},[4879],{"type":44,"value":4880}," SdkObject) {\n",{"type":29,"tag":63,"props":4882,"children":4883},{"class":65,"line":93},[4884,4888,4893,4897,4902,4907,4912,4916,4921],{"type":29,"tag":63,"props":4885,"children":4886},{"style":70},[4887],{"type":44,"value":144},{"type":29,"tag":63,"props":4889,"children":4890},{"style":394},[4891],{"type":44,"value":4892}," validator",{"type":29,"tag":63,"props":4894,"children":4895},{"style":70},[4896],{"type":44,"value":155},{"type":29,"tag":63,"props":4898,"children":4899},{"style":117},[4900],{"type":44,"value":4901}," findValidator",{"type":29,"tag":63,"props":4903,"children":4904},{"style":76},[4905],{"type":44,"value":4906},"(type, ",{"type":29,"tag":63,"props":4908,"children":4909},{"style":87},[4910],{"type":44,"value":4911},"''",{"type":29,"tag":63,"props":4913,"children":4914},{"style":76},[4915],{"type":44,"value":912},{"type":29,"tag":63,"props":4917,"children":4918},{"style":87},[4919],{"type":44,"value":4920},"'Initializer'",{"type":29,"tag":63,"props":4922,"children":4923},{"style":76},[4924],{"type":44,"value":429},{"type":29,"tag":63,"props":4926,"children":4927},{"class":65,"line":103},[4928,4933,4937,4941,4946,4950,4955,4959,4964,4969,4973,4977,4982,4986,4991,4996,5001,5005,5010],{"type":29,"tag":63,"props":4929,"children":4930},{"style":76},[4931],{"type":44,"value":4932},"  initializer ",{"type":29,"tag":63,"props":4934,"children":4935},{"style":70},[4936],{"type":44,"value":1258},{"type":29,"tag":63,"props":4938,"children":4939},{"style":117},[4940],{"type":44,"value":4892},{"type":29,"tag":63,"props":4942,"children":4943},{"style":76},[4944],{"type":44,"value":4945},"(initializer, ",{"type":29,"tag":63,"props":4947,"children":4948},{"style":87},[4949],{"type":44,"value":4911},{"type":29,"tag":63,"props":4951,"children":4952},{"style":76},[4953],{"type":44,"value":4954},", { tChannelImpl: ",{"type":29,"tag":63,"props":4956,"children":4957},{"style":394},[4958],{"type":44,"value":3198},{"type":29,"tag":63,"props":4960,"children":4961},{"style":76},[4962],{"type":44,"value":4963},"._tChannelImplToWire.",{"type":29,"tag":63,"props":4965,"children":4966},{"style":117},[4967],{"type":44,"value":4968},"bind",{"type":29,"tag":63,"props":4970,"children":4971},{"style":76},[4972],{"type":44,"value":238},{"type":29,"tag":63,"props":4974,"children":4975},{"style":394},[4976],{"type":44,"value":3198},{"type":29,"tag":63,"props":4978,"children":4979},{"style":76},[4980],{"type":44,"value":4981},"), binary: ",{"type":29,"tag":63,"props":4983,"children":4984},{"style":394},[4985],{"type":44,"value":3198},{"type":29,"tag":63,"props":4987,"children":4988},{"style":76},[4989],{"type":44,"value":4990},"._isLocal ",{"type":29,"tag":63,"props":4992,"children":4993},{"style":70},[4994],{"type":44,"value":4995},"?",{"type":29,"tag":63,"props":4997,"children":4998},{"style":87},[4999],{"type":44,"value":5000}," 'buffer'",{"type":29,"tag":63,"props":5002,"children":5003},{"style":70},[5004],{"type":44,"value":3976},{"type":29,"tag":63,"props":5006,"children":5007},{"style":87},[5008],{"type":44,"value":5009}," 'toBase64'",{"type":29,"tag":63,"props":5011,"children":5012},{"style":76},[5013],{"type":44,"value":5014}," });\n",{"type":29,"tag":63,"props":5016,"children":5017},{"class":65,"line":138},[5018,5023,5027,5031,5036,5041],{"type":29,"tag":63,"props":5019,"children":5020},{"style":394},[5021],{"type":44,"value":5022},"  this",{"type":29,"tag":63,"props":5024,"children":5025},{"style":76},[5026],{"type":44,"value":228},{"type":29,"tag":63,"props":5028,"children":5029},{"style":117},[5030],{"type":44,"value":4679},{"type":29,"tag":63,"props":5032,"children":5033},{"style":76},[5034],{"type":44,"value":5035},"(parent._guid, type, ",{"type":29,"tag":63,"props":5037,"children":5038},{"style":87},[5039],{"type":44,"value":5040},"'__create__'",{"type":29,"tag":63,"props":5042,"children":5043},{"style":76},[5044],{"type":44,"value":5045},", { type, initializer, guid }, sdkObject);\n",{"type":29,"tag":63,"props":5047,"children":5048},{"class":65,"line":178},[5049],{"type":29,"tag":63,"props":5050,"children":5051},{"style":76},[5052],{"type":44,"value":257},{"type":29,"tag":30,"props":5054,"children":5055},{},[5056,5058,5063,5065,5070,5072,5078,5080,5085,5087,5092,5094,5099],{"type":44,"value":5057},"so if we search through the ",{"type":29,"tag":59,"props":5059,"children":5061},{"className":5060},[],[5062],{"type":44,"value":679},{"type":44,"value":5064}," class on the client side, sure enough in its ",{"type":29,"tag":59,"props":5066,"children":5068},{"className":5067},[],[5069],{"type":44,"value":1051},{"type":44,"value":5071}," function it has a call to ",{"type":29,"tag":59,"props":5073,"children":5075},{"className":5074},[],[5076],{"type":44,"value":5077},"_createRemoteObject",{"type":44,"value":5079}," for the associated method ",{"type":29,"tag":59,"props":5081,"children":5083},{"className":5082},[],[5084],{"type":44,"value":4848},{"type":44,"value":5086},". This ",{"type":29,"tag":59,"props":5088,"children":5090},{"className":5089},[],[5091],{"type":44,"value":5077},{"type":44,"value":5093}," is what initializes the client-side ",{"type":29,"tag":59,"props":5095,"children":5097},{"className":5096},[],[5098],{"type":44,"value":12},{"type":44,"value":5100}," instance, and is the reason why we call",{"type":29,"tag":52,"props":5102,"children":5104},{"className":54,"code":5103,"language":56,"meta":7,"style":7},"const playwrightAPI = clientConnection.getObjectWithKnownName(\"Playwright\");\n",[5105],{"type":29,"tag":59,"props":5106,"children":5107},{"__ignoreMap":7},[5108],{"type":29,"tag":63,"props":5109,"children":5110},{"class":65,"line":66},[5111,5115,5119,5123,5127,5131,5135,5139],{"type":29,"tag":63,"props":5112,"children":5113},{"style":70},[5114],{"type":44,"value":1842},{"type":29,"tag":63,"props":5116,"children":5117},{"style":394},[5118],{"type":44,"value":1193},{"type":29,"tag":63,"props":5120,"children":5121},{"style":70},[5122],{"type":44,"value":155},{"type":29,"tag":63,"props":5124,"children":5125},{"style":76},[5126],{"type":44,"value":1202},{"type":29,"tag":63,"props":5128,"children":5129},{"style":117},[5130],{"type":44,"value":1207},{"type":29,"tag":63,"props":5132,"children":5133},{"style":76},[5134],{"type":44,"value":238},{"type":29,"tag":63,"props":5136,"children":5137},{"style":87},[5138],{"type":44,"value":4445},{"type":29,"tag":63,"props":5140,"children":5141},{"style":76},[5142],{"type":44,"value":429},{"type":29,"tag":30,"props":5144,"children":5145},{},[5146,5148,5153,5155,5161],{"type":44,"value":5147},"to access the playwright API. But let's dive a little deeper as to what's happening with the message from the ",{"type":29,"tag":59,"props":5149,"children":5151},{"className":5150},[],[5152],{"type":44,"value":2605},{"type":44,"value":5154}," over to the ",{"type":29,"tag":59,"props":5156,"children":5158},{"className":5157},[],[5159],{"type":44,"value":5160},"clientConnection",{"type":44,"value":5162},". For the Playwright create message, the message looks something like",{"type":29,"tag":52,"props":5164,"children":5166},{"className":54,"code":5165,"language":56,"meta":7,"style":7},"{\n  guid: '',\n  method: '__create__',\n  params: {\n    type: 'Playwright',\n    initializer: {\n      chromium: { guid: 'browser-type@024d5a494527ece580841844a9a933a6' },\n      firefox: { guid: 'browser-type@fae8f48651c02682ad3b276f0a046d63' },\n      webkit: { guid: 'browser-type@ed1c30ab794ec863fe5b9b208c3635e1' },\n      android: { guid: 'android@832582c466c24c6933d3a5587059e1be' },\n      electron: { guid: 'electron@3829a7608477101154e15c1e25bca9ca' },\n    },\n    guid: 'Playwright'\n  }\n}\n",[5167],{"type":29,"tag":59,"props":5168,"children":5169},{"__ignoreMap":7},[5170,5178,5199,5219,5232,5252,5263,5294,5323,5352,5381,5410,5418,5435,5442],{"type":29,"tag":63,"props":5171,"children":5172},{"class":65,"line":66},[5173],{"type":29,"tag":63,"props":5174,"children":5175},{"style":76},[5176],{"type":44,"value":5177},"{\n",{"type":29,"tag":63,"props":5179,"children":5180},{"class":65,"line":93},[5181,5186,5191,5195],{"type":29,"tag":63,"props":5182,"children":5183},{"style":117},[5184],{"type":44,"value":5185},"  guid",{"type":29,"tag":63,"props":5187,"children":5188},{"style":76},[5189],{"type":44,"value":5190},": ",{"type":29,"tag":63,"props":5192,"children":5193},{"style":87},[5194],{"type":44,"value":4911},{"type":29,"tag":63,"props":5196,"children":5197},{"style":76},[5198],{"type":44,"value":857},{"type":29,"tag":63,"props":5200,"children":5201},{"class":65,"line":103},[5202,5207,5211,5215],{"type":29,"tag":63,"props":5203,"children":5204},{"style":117},[5205],{"type":44,"value":5206},"  method",{"type":29,"tag":63,"props":5208,"children":5209},{"style":76},[5210],{"type":44,"value":5190},{"type":29,"tag":63,"props":5212,"children":5213},{"style":87},[5214],{"type":44,"value":5040},{"type":29,"tag":63,"props":5216,"children":5217},{"style":76},[5218],{"type":44,"value":857},{"type":29,"tag":63,"props":5220,"children":5221},{"class":65,"line":138},[5222,5227],{"type":29,"tag":63,"props":5223,"children":5224},{"style":117},[5225],{"type":44,"value":5226},"  params",{"type":29,"tag":63,"props":5228,"children":5229},{"style":76},[5230],{"type":44,"value":5231},": {\n",{"type":29,"tag":63,"props":5233,"children":5234},{"class":65,"line":178},[5235,5239,5243,5248],{"type":29,"tag":63,"props":5236,"children":5237},{"style":117},[5238],{"type":44,"value":3804},{"type":29,"tag":63,"props":5240,"children":5241},{"style":76},[5242],{"type":44,"value":5190},{"type":29,"tag":63,"props":5244,"children":5245},{"style":87},[5246],{"type":44,"value":5247},"'Playwright'",{"type":29,"tag":63,"props":5249,"children":5250},{"style":76},[5251],{"type":44,"value":857},{"type":29,"tag":63,"props":5253,"children":5254},{"class":65,"line":213},[5255,5259],{"type":29,"tag":63,"props":5256,"children":5257},{"style":117},[5258],{"type":44,"value":3824},{"type":29,"tag":63,"props":5260,"children":5261},{"style":76},[5262],{"type":44,"value":5231},{"type":29,"tag":63,"props":5264,"children":5265},{"class":65,"line":251},[5266,5271,5276,5280,5284,5289],{"type":29,"tag":63,"props":5267,"children":5268},{"style":117},[5269],{"type":44,"value":5270},"      chromium",{"type":29,"tag":63,"props":5272,"children":5273},{"style":76},[5274],{"type":44,"value":5275},": { ",{"type":29,"tag":63,"props":5277,"children":5278},{"style":117},[5279],{"type":44,"value":2054},{"type":29,"tag":63,"props":5281,"children":5282},{"style":76},[5283],{"type":44,"value":5190},{"type":29,"tag":63,"props":5285,"children":5286},{"style":87},[5287],{"type":44,"value":5288},"'browser-type@024d5a494527ece580841844a9a933a6'",{"type":29,"tag":63,"props":5290,"children":5291},{"style":76},[5292],{"type":44,"value":5293}," },\n",{"type":29,"tag":63,"props":5295,"children":5296},{"class":65,"line":923},[5297,5302,5306,5310,5314,5319],{"type":29,"tag":63,"props":5298,"children":5299},{"style":117},[5300],{"type":44,"value":5301},"      firefox",{"type":29,"tag":63,"props":5303,"children":5304},{"style":76},[5305],{"type":44,"value":5275},{"type":29,"tag":63,"props":5307,"children":5308},{"style":117},[5309],{"type":44,"value":2054},{"type":29,"tag":63,"props":5311,"children":5312},{"style":76},[5313],{"type":44,"value":5190},{"type":29,"tag":63,"props":5315,"children":5316},{"style":87},[5317],{"type":44,"value":5318},"'browser-type@fae8f48651c02682ad3b276f0a046d63'",{"type":29,"tag":63,"props":5320,"children":5321},{"style":76},[5322],{"type":44,"value":5293},{"type":29,"tag":63,"props":5324,"children":5325},{"class":65,"line":942},[5326,5331,5335,5339,5343,5348],{"type":29,"tag":63,"props":5327,"children":5328},{"style":117},[5329],{"type":44,"value":5330},"      webkit",{"type":29,"tag":63,"props":5332,"children":5333},{"style":76},[5334],{"type":44,"value":5275},{"type":29,"tag":63,"props":5336,"children":5337},{"style":117},[5338],{"type":44,"value":2054},{"type":29,"tag":63,"props":5340,"children":5341},{"style":76},[5342],{"type":44,"value":5190},{"type":29,"tag":63,"props":5344,"children":5345},{"style":87},[5346],{"type":44,"value":5347},"'browser-type@ed1c30ab794ec863fe5b9b208c3635e1'",{"type":29,"tag":63,"props":5349,"children":5350},{"style":76},[5351],{"type":44,"value":5293},{"type":29,"tag":63,"props":5353,"children":5354},{"class":65,"line":987},[5355,5360,5364,5368,5372,5377],{"type":29,"tag":63,"props":5356,"children":5357},{"style":117},[5358],{"type":44,"value":5359},"      android",{"type":29,"tag":63,"props":5361,"children":5362},{"style":76},[5363],{"type":44,"value":5275},{"type":29,"tag":63,"props":5365,"children":5366},{"style":117},[5367],{"type":44,"value":2054},{"type":29,"tag":63,"props":5369,"children":5370},{"style":76},[5371],{"type":44,"value":5190},{"type":29,"tag":63,"props":5373,"children":5374},{"style":87},[5375],{"type":44,"value":5376},"'android@832582c466c24c6933d3a5587059e1be'",{"type":29,"tag":63,"props":5378,"children":5379},{"style":76},[5380],{"type":44,"value":5293},{"type":29,"tag":63,"props":5382,"children":5383},{"class":65,"line":995},[5384,5389,5393,5397,5401,5406],{"type":29,"tag":63,"props":5385,"children":5386},{"style":117},[5387],{"type":44,"value":5388},"      electron",{"type":29,"tag":63,"props":5390,"children":5391},{"style":76},[5392],{"type":44,"value":5275},{"type":29,"tag":63,"props":5394,"children":5395},{"style":117},[5396],{"type":44,"value":2054},{"type":29,"tag":63,"props":5398,"children":5399},{"style":76},[5400],{"type":44,"value":5190},{"type":29,"tag":63,"props":5402,"children":5403},{"style":87},[5404],{"type":44,"value":5405},"'electron@3829a7608477101154e15c1e25bca9ca'",{"type":29,"tag":63,"props":5407,"children":5408},{"style":76},[5409],{"type":44,"value":5293},{"type":29,"tag":63,"props":5411,"children":5412},{"class":65,"line":1004},[5413],{"type":29,"tag":63,"props":5414,"children":5415},{"style":76},[5416],{"type":44,"value":5417},"    },\n",{"type":29,"tag":63,"props":5419,"children":5420},{"class":65,"line":23},[5421,5426,5430],{"type":29,"tag":63,"props":5422,"children":5423},{"style":117},[5424],{"type":44,"value":5425},"    guid",{"type":29,"tag":63,"props":5427,"children":5428},{"style":76},[5429],{"type":44,"value":5190},{"type":29,"tag":63,"props":5431,"children":5432},{"style":87},[5433],{"type":44,"value":5434},"'Playwright'\n",{"type":29,"tag":63,"props":5436,"children":5437},{"class":65,"line":1059},[5438],{"type":29,"tag":63,"props":5439,"children":5440},{"style":76},[5441],{"type":44,"value":2123},{"type":29,"tag":63,"props":5443,"children":5444},{"class":65,"line":1091},[5445],{"type":29,"tag":63,"props":5446,"children":5447},{"style":76},[5448],{"type":44,"value":257},{"type":29,"tag":30,"props":5450,"children":5451},{},[5452,5454,5459,5461,5466,5468,5474,5476,5481,5482,5488,5490,5495,5497,5502],{"type":44,"value":5453},"Note before this ",{"type":29,"tag":59,"props":5455,"children":5457},{"className":5456},[],[5458],{"type":44,"value":4132},{"type":44,"value":5460}," message is passed to create the Playwright API on the client side, there were ",{"type":29,"tag":59,"props":5462,"children":5464},{"className":5463},[],[5465],{"type":44,"value":4132},{"type":44,"value":5467}," messages for each of the device types, meaning there already exists a client-side ",{"type":29,"tag":59,"props":5469,"children":5471},{"className":5470},[],[5472],{"type":44,"value":5473},"BrowserType",{"type":44,"value":5475}," for ",{"type":29,"tag":59,"props":5477,"children":5479},{"className":5478},[],[5480],{"type":44,"value":1801},{"type":44,"value":912},{"type":29,"tag":59,"props":5483,"children":5485},{"className":5484},[],[5486],{"type":44,"value":5487},"firefox",{"type":44,"value":5489},", etc. before the ",{"type":29,"tag":59,"props":5491,"children":5493},{"className":5492},[],[5494],{"type":44,"value":4848},{"type":44,"value":5496}," message for ",{"type":29,"tag":59,"props":5498,"children":5500},{"className":5499},[],[5501],{"type":44,"value":12},{"type":44,"value":5503}," is sent.",{"type":29,"tag":30,"props":5505,"children":5506},{},[5507,5508,5513,5515,5520,5522,5527,5529,5535],{"type":44,"value":4814},{"type":29,"tag":59,"props":5509,"children":5511},{"className":5510},[],[5512],{"type":44,"value":5160},{"type":44,"value":5514}," constructs objects on the client side corresponding to dispatcher objects on the server side. These client side API's are provided by subclasses of the ",{"type":29,"tag":59,"props":5516,"children":5518},{"className":5517},[],[5519],{"type":44,"value":604},{"type":44,"value":5521}," class, which is a concept for a later section. For now, let's trace what happens in the ",{"type":29,"tag":59,"props":5523,"children":5525},{"className":5524},[],[5526],{"type":44,"value":5160},{"type":44,"value":5528}," for the ",{"type":29,"tag":59,"props":5530,"children":5532},{"className":5531},[],[5533],{"type":44,"value":5534},"type: 'Playwright'",{"type":44,"value":5536}," message.",{"type":29,"tag":30,"props":5538,"children":5539},{},[5540,5541,5546,5548,5554,5556,5561,5563,5569],{"type":44,"value":4814},{"type":29,"tag":59,"props":5542,"children":5544},{"className":5543},[],[5545],{"type":44,"value":4132},{"type":44,"value":5547}," function calls ",{"type":29,"tag":59,"props":5549,"children":5551},{"className":5550},[],[5552],{"type":44,"value":5553},"dispatchConnection.onmessage",{"type":44,"value":5555},", which calls the ",{"type":29,"tag":59,"props":5557,"children":5559},{"className":5558},[],[5560],{"type":44,"value":2613},{"type":44,"value":5562}," function, which then calls the ",{"type":29,"tag":59,"props":5564,"children":5566},{"className":5565},[],[5567],{"type":44,"value":5568},"clientConnection._createRemoteObject",{"type":44,"value":5570}," function with the following parameters",{"type":29,"tag":52,"props":5572,"children":5574},{"className":54,"code":5573,"filename":1946,"language":56,"meta":7,"style":7},"this._createRemoteObject(\n  \"\", // parentGuid - corresponds to Root, the root ChannelOwner\n  \"Playwright\", // type\n  \"Playwright\", // guid\n  {\n    // initializer\n    chromium: { guid: \"browser-type@024d5a494527ece580841844a9a933a6\" },\n    firefox: { guid: \"browser-type@fae8f48651c02682ad3b276f0a046d63\" },\n    webkit: { guid: \"browser-type@ed1c30ab794ec863fe5b9b208c3635e1\" },\n    android: { guid: \"android@832582c466c24c6933d3a5587059e1be\" },\n    electron: { guid: \"electron@3829a7608477101154e15c1e25bca9ca\" },\n  }\n);\n",[5575],{"type":29,"tag":59,"props":5576,"children":5577},{"__ignoreMap":7},[5578,5597,5614,5631,5647,5655,5663,5680,5697,5714,5731,5748,5755],{"type":29,"tag":63,"props":5579,"children":5580},{"class":65,"line":66},[5581,5585,5589,5593],{"type":29,"tag":63,"props":5582,"children":5583},{"style":394},[5584],{"type":44,"value":3198},{"type":29,"tag":63,"props":5586,"children":5587},{"style":76},[5588],{"type":44,"value":228},{"type":29,"tag":63,"props":5590,"children":5591},{"style":117},[5592],{"type":44,"value":5077},{"type":29,"tag":63,"props":5594,"children":5595},{"style":76},[5596],{"type":44,"value":1212},{"type":29,"tag":63,"props":5598,"children":5599},{"class":65,"line":93},[5600,5605,5609],{"type":29,"tag":63,"props":5601,"children":5602},{"style":87},[5603],{"type":44,"value":5604},"  \"\"",{"type":29,"tag":63,"props":5606,"children":5607},{"style":76},[5608],{"type":44,"value":912},{"type":29,"tag":63,"props":5610,"children":5611},{"style":977},[5612],{"type":44,"value":5613},"// parentGuid - corresponds to Root, the root ChannelOwner\n",{"type":29,"tag":63,"props":5615,"children":5616},{"class":65,"line":103},[5617,5622,5626],{"type":29,"tag":63,"props":5618,"children":5619},{"style":87},[5620],{"type":44,"value":5621},"  \"Playwright\"",{"type":29,"tag":63,"props":5623,"children":5624},{"style":76},[5625],{"type":44,"value":912},{"type":29,"tag":63,"props":5627,"children":5628},{"style":977},[5629],{"type":44,"value":5630},"// type\n",{"type":29,"tag":63,"props":5632,"children":5633},{"class":65,"line":138},[5634,5638,5642],{"type":29,"tag":63,"props":5635,"children":5636},{"style":87},[5637],{"type":44,"value":5621},{"type":29,"tag":63,"props":5639,"children":5640},{"style":76},[5641],{"type":44,"value":912},{"type":29,"tag":63,"props":5643,"children":5644},{"style":977},[5645],{"type":44,"value":5646},"// guid\n",{"type":29,"tag":63,"props":5648,"children":5649},{"class":65,"line":178},[5650],{"type":29,"tag":63,"props":5651,"children":5652},{"style":76},[5653],{"type":44,"value":5654},"  {\n",{"type":29,"tag":63,"props":5656,"children":5657},{"class":65,"line":213},[5658],{"type":29,"tag":63,"props":5659,"children":5660},{"style":977},[5661],{"type":44,"value":5662},"    // initializer\n",{"type":29,"tag":63,"props":5664,"children":5665},{"class":65,"line":251},[5666,5671,5676],{"type":29,"tag":63,"props":5667,"children":5668},{"style":76},[5669],{"type":44,"value":5670},"    chromium: { guid: ",{"type":29,"tag":63,"props":5672,"children":5673},{"style":87},[5674],{"type":44,"value":5675},"\"browser-type@024d5a494527ece580841844a9a933a6\"",{"type":29,"tag":63,"props":5677,"children":5678},{"style":76},[5679],{"type":44,"value":5293},{"type":29,"tag":63,"props":5681,"children":5682},{"class":65,"line":923},[5683,5688,5693],{"type":29,"tag":63,"props":5684,"children":5685},{"style":76},[5686],{"type":44,"value":5687},"    firefox: { guid: ",{"type":29,"tag":63,"props":5689,"children":5690},{"style":87},[5691],{"type":44,"value":5692},"\"browser-type@fae8f48651c02682ad3b276f0a046d63\"",{"type":29,"tag":63,"props":5694,"children":5695},{"style":76},[5696],{"type":44,"value":5293},{"type":29,"tag":63,"props":5698,"children":5699},{"class":65,"line":942},[5700,5705,5710],{"type":29,"tag":63,"props":5701,"children":5702},{"style":76},[5703],{"type":44,"value":5704},"    webkit: { guid: ",{"type":29,"tag":63,"props":5706,"children":5707},{"style":87},[5708],{"type":44,"value":5709},"\"browser-type@ed1c30ab794ec863fe5b9b208c3635e1\"",{"type":29,"tag":63,"props":5711,"children":5712},{"style":76},[5713],{"type":44,"value":5293},{"type":29,"tag":63,"props":5715,"children":5716},{"class":65,"line":987},[5717,5722,5727],{"type":29,"tag":63,"props":5718,"children":5719},{"style":76},[5720],{"type":44,"value":5721},"    android: { guid: ",{"type":29,"tag":63,"props":5723,"children":5724},{"style":87},[5725],{"type":44,"value":5726},"\"android@832582c466c24c6933d3a5587059e1be\"",{"type":29,"tag":63,"props":5728,"children":5729},{"style":76},[5730],{"type":44,"value":5293},{"type":29,"tag":63,"props":5732,"children":5733},{"class":65,"line":995},[5734,5739,5744],{"type":29,"tag":63,"props":5735,"children":5736},{"style":76},[5737],{"type":44,"value":5738},"    electron: { guid: ",{"type":29,"tag":63,"props":5740,"children":5741},{"style":87},[5742],{"type":44,"value":5743},"\"electron@3829a7608477101154e15c1e25bca9ca\"",{"type":29,"tag":63,"props":5745,"children":5746},{"style":76},[5747],{"type":44,"value":5293},{"type":29,"tag":63,"props":5749,"children":5750},{"class":65,"line":1004},[5751],{"type":29,"tag":63,"props":5752,"children":5753},{"style":76},[5754],{"type":44,"value":2123},{"type":29,"tag":63,"props":5756,"children":5757},{"class":65,"line":23},[5758],{"type":29,"tag":63,"props":5759,"children":5760},{"style":76},[5761],{"type":44,"value":429},{"type":29,"tag":30,"props":5763,"children":5764},{},[5765,5766,5771,5773,5779],{"type":44,"value":4212},{"type":29,"tag":59,"props":5767,"children":5769},{"className":5768},[],[5770],{"type":44,"value":5568},{"type":44,"value":5772}," function there is a transformation of the data and then a large ",{"type":29,"tag":59,"props":5774,"children":5776},{"className":5775},[],[5777],{"type":44,"value":5778},"switch-case",{"type":44,"value":5780}," function instantiating the corresponding client class.",{"type":29,"tag":52,"props":5782,"children":5784},{"className":54,"code":5783,"filename":1946,"language":56,"meta":7,"style":7},"_createRemoteObject(parentGuid: string, type: string, guid: string, initializer: any) {\n  const parent = this._objects.get(parentGuid); // here the parentGuid is ''\n  if (!parent)\n    throw new Error(`Cannot find parent object ${parentGuid} to create ${guid}`);\n  let result: ChannelOwner\u003Cany>;\n  const validator = findValidator(type, '', 'Initializer');\n  initializer = validator(\n    initializer,\n    '',\n    {\n      tChannelImpl: this._tChannelImplFromWire.bind(this),\n      binary: this._rawBuffers ? 'buffer' : 'fromBase64'\n    }\n  );\n  switch (type) {\n    // ...\n    case 'Playwright':\n      result = new Playwright(parent, type, guid, initializer);\n      break;\n    // ...\n  }\n  return result;\n}\n",[5785],{"type":29,"tag":59,"props":5786,"children":5787},{"__ignoreMap":7},[5788,5800,5838,5859,5908,5944,5983,6002,6010,6022,6030,6064,6098,6106,6113,6126,6134,6152,6177,6189,6196,6203,6215],{"type":29,"tag":63,"props":5789,"children":5790},{"class":65,"line":66},[5791,5795],{"type":29,"tag":63,"props":5792,"children":5793},{"style":117},[5794],{"type":44,"value":5077},{"type":29,"tag":63,"props":5796,"children":5797},{"style":76},[5798],{"type":44,"value":5799},"(parentGuid: string, type: string, guid: string, initializer: any) {\n",{"type":29,"tag":63,"props":5801,"children":5802},{"class":65,"line":93},[5803,5807,5812,5816,5820,5824,5828,5833],{"type":29,"tag":63,"props":5804,"children":5805},{"style":70},[5806],{"type":44,"value":144},{"type":29,"tag":63,"props":5808,"children":5809},{"style":394},[5810],{"type":44,"value":5811}," parent",{"type":29,"tag":63,"props":5813,"children":5814},{"style":70},[5815],{"type":44,"value":155},{"type":29,"tag":63,"props":5817,"children":5818},{"style":394},[5819],{"type":44,"value":2093},{"type":29,"tag":63,"props":5821,"children":5822},{"style":76},[5823],{"type":44,"value":2098},{"type":29,"tag":63,"props":5825,"children":5826},{"style":117},[5827],{"type":44,"value":1619},{"type":29,"tag":63,"props":5829,"children":5830},{"style":76},[5831],{"type":44,"value":5832},"(parentGuid); ",{"type":29,"tag":63,"props":5834,"children":5835},{"style":977},[5836],{"type":44,"value":5837},"// here the parentGuid is ''\n",{"type":29,"tag":63,"props":5839,"children":5840},{"class":65,"line":103},[5841,5846,5850,5854],{"type":29,"tag":63,"props":5842,"children":5843},{"style":70},[5844],{"type":44,"value":5845},"  if",{"type":29,"tag":63,"props":5847,"children":5848},{"style":76},[5849],{"type":44,"value":1024},{"type":29,"tag":63,"props":5851,"children":5852},{"style":70},[5853],{"type":44,"value":1629},{"type":29,"tag":63,"props":5855,"children":5856},{"style":76},[5857],{"type":44,"value":5858},"parent)\n",{"type":29,"tag":63,"props":5860,"children":5861},{"class":65,"line":138},[5862,5867,5871,5876,5880,5885,5890,5895,5899,5904],{"type":29,"tag":63,"props":5863,"children":5864},{"style":70},[5865],{"type":44,"value":5866},"    throw",{"type":29,"tag":63,"props":5868,"children":5869},{"style":70},[5870],{"type":44,"value":893},{"type":29,"tag":63,"props":5872,"children":5873},{"style":117},[5874],{"type":44,"value":5875}," Error",{"type":29,"tag":63,"props":5877,"children":5878},{"style":76},[5879],{"type":44,"value":238},{"type":29,"tag":63,"props":5881,"children":5882},{"style":87},[5883],{"type":44,"value":5884},"`Cannot find parent object ${",{"type":29,"tag":63,"props":5886,"children":5887},{"style":76},[5888],{"type":44,"value":5889},"parentGuid",{"type":29,"tag":63,"props":5891,"children":5892},{"style":87},[5893],{"type":44,"value":5894},"} to create ${",{"type":29,"tag":63,"props":5896,"children":5897},{"style":76},[5898],{"type":44,"value":2054},{"type":29,"tag":63,"props":5900,"children":5901},{"style":87},[5902],{"type":44,"value":5903},"}`",{"type":29,"tag":63,"props":5905,"children":5906},{"style":76},[5907],{"type":44,"value":429},{"type":29,"tag":63,"props":5909,"children":5910},{"class":65,"line":178},[5911,5916,5921,5925,5930,5934,5939],{"type":29,"tag":63,"props":5912,"children":5913},{"style":70},[5914],{"type":44,"value":5915},"  let",{"type":29,"tag":63,"props":5917,"children":5918},{"style":76},[5919],{"type":44,"value":5920}," result",{"type":29,"tag":63,"props":5922,"children":5923},{"style":70},[5924],{"type":44,"value":761},{"type":29,"tag":63,"props":5926,"children":5927},{"style":117},[5928],{"type":44,"value":5929}," ChannelOwner",{"type":29,"tag":63,"props":5931,"children":5932},{"style":76},[5933],{"type":44,"value":2011},{"type":29,"tag":63,"props":5935,"children":5936},{"style":394},[5937],{"type":44,"value":5938},"any",{"type":29,"tag":63,"props":5940,"children":5941},{"style":76},[5942],{"type":44,"value":5943},">;\n",{"type":29,"tag":63,"props":5945,"children":5946},{"class":65,"line":213},[5947,5951,5955,5959,5963,5967,5971,5975,5979],{"type":29,"tag":63,"props":5948,"children":5949},{"style":70},[5950],{"type":44,"value":144},{"type":29,"tag":63,"props":5952,"children":5953},{"style":394},[5954],{"type":44,"value":4892},{"type":29,"tag":63,"props":5956,"children":5957},{"style":70},[5958],{"type":44,"value":155},{"type":29,"tag":63,"props":5960,"children":5961},{"style":117},[5962],{"type":44,"value":4901},{"type":29,"tag":63,"props":5964,"children":5965},{"style":76},[5966],{"type":44,"value":4906},{"type":29,"tag":63,"props":5968,"children":5969},{"style":87},[5970],{"type":44,"value":4911},{"type":29,"tag":63,"props":5972,"children":5973},{"style":76},[5974],{"type":44,"value":912},{"type":29,"tag":63,"props":5976,"children":5977},{"style":87},[5978],{"type":44,"value":4920},{"type":29,"tag":63,"props":5980,"children":5981},{"style":76},[5982],{"type":44,"value":429},{"type":29,"tag":63,"props":5984,"children":5985},{"class":65,"line":251},[5986,5990,5994,5998],{"type":29,"tag":63,"props":5987,"children":5988},{"style":76},[5989],{"type":44,"value":4932},{"type":29,"tag":63,"props":5991,"children":5992},{"style":70},[5993],{"type":44,"value":1258},{"type":29,"tag":63,"props":5995,"children":5996},{"style":117},[5997],{"type":44,"value":4892},{"type":29,"tag":63,"props":5999,"children":6000},{"style":76},[6001],{"type":44,"value":1212},{"type":29,"tag":63,"props":6003,"children":6004},{"class":65,"line":923},[6005],{"type":29,"tag":63,"props":6006,"children":6007},{"style":76},[6008],{"type":44,"value":6009},"    initializer,\n",{"type":29,"tag":63,"props":6011,"children":6012},{"class":65,"line":942},[6013,6018],{"type":29,"tag":63,"props":6014,"children":6015},{"style":87},[6016],{"type":44,"value":6017},"    ''",{"type":29,"tag":63,"props":6019,"children":6020},{"style":76},[6021],{"type":44,"value":857},{"type":29,"tag":63,"props":6023,"children":6024},{"class":65,"line":987},[6025],{"type":29,"tag":63,"props":6026,"children":6027},{"style":76},[6028],{"type":44,"value":6029},"    {\n",{"type":29,"tag":63,"props":6031,"children":6032},{"class":65,"line":995},[6033,6038,6042,6047,6051,6055,6059],{"type":29,"tag":63,"props":6034,"children":6035},{"style":76},[6036],{"type":44,"value":6037},"      tChannelImpl: ",{"type":29,"tag":63,"props":6039,"children":6040},{"style":394},[6041],{"type":44,"value":3198},{"type":29,"tag":63,"props":6043,"children":6044},{"style":76},[6045],{"type":44,"value":6046},"._tChannelImplFromWire.",{"type":29,"tag":63,"props":6048,"children":6049},{"style":117},[6050],{"type":44,"value":4968},{"type":29,"tag":63,"props":6052,"children":6053},{"style":76},[6054],{"type":44,"value":238},{"type":29,"tag":63,"props":6056,"children":6057},{"style":394},[6058],{"type":44,"value":3198},{"type":29,"tag":63,"props":6060,"children":6061},{"style":76},[6062],{"type":44,"value":6063},"),\n",{"type":29,"tag":63,"props":6065,"children":6066},{"class":65,"line":1004},[6067,6072,6076,6081,6085,6089,6093],{"type":29,"tag":63,"props":6068,"children":6069},{"style":76},[6070],{"type":44,"value":6071},"      binary: ",{"type":29,"tag":63,"props":6073,"children":6074},{"style":394},[6075],{"type":44,"value":3198},{"type":29,"tag":63,"props":6077,"children":6078},{"style":76},[6079],{"type":44,"value":6080},"._rawBuffers ",{"type":29,"tag":63,"props":6082,"children":6083},{"style":70},[6084],{"type":44,"value":4995},{"type":29,"tag":63,"props":6086,"children":6087},{"style":87},[6088],{"type":44,"value":5000},{"type":29,"tag":63,"props":6090,"children":6091},{"style":70},[6092],{"type":44,"value":3976},{"type":29,"tag":63,"props":6094,"children":6095},{"style":87},[6096],{"type":44,"value":6097}," 'fromBase64'\n",{"type":29,"tag":63,"props":6099,"children":6100},{"class":65,"line":23},[6101],{"type":29,"tag":63,"props":6102,"children":6103},{"style":76},[6104],{"type":44,"value":6105},"    }\n",{"type":29,"tag":63,"props":6107,"children":6108},{"class":65,"line":1059},[6109],{"type":29,"tag":63,"props":6110,"children":6111},{"style":76},[6112],{"type":44,"value":1289},{"type":29,"tag":63,"props":6114,"children":6115},{"class":65,"line":1091},[6116,6121],{"type":29,"tag":63,"props":6117,"children":6118},{"style":70},[6119],{"type":44,"value":6120},"  switch",{"type":29,"tag":63,"props":6122,"children":6123},{"style":76},[6124],{"type":44,"value":6125}," (type) {\n",{"type":29,"tag":63,"props":6127,"children":6128},{"class":65,"line":1108},[6129],{"type":29,"tag":63,"props":6130,"children":6131},{"style":977},[6132],{"type":44,"value":6133},"    // ...\n",{"type":29,"tag":63,"props":6135,"children":6136},{"class":65,"line":1116},[6137,6142,6147],{"type":29,"tag":63,"props":6138,"children":6139},{"style":70},[6140],{"type":44,"value":6141},"    case",{"type":29,"tag":63,"props":6143,"children":6144},{"style":87},[6145],{"type":44,"value":6146}," 'Playwright'",{"type":29,"tag":63,"props":6148,"children":6149},{"style":76},[6150],{"type":44,"value":6151},":\n",{"type":29,"tag":63,"props":6153,"children":6154},{"class":65,"line":1147},[6155,6160,6164,6168,6172],{"type":29,"tag":63,"props":6156,"children":6157},{"style":76},[6158],{"type":44,"value":6159},"      result ",{"type":29,"tag":63,"props":6161,"children":6162},{"style":70},[6163],{"type":44,"value":1258},{"type":29,"tag":63,"props":6165,"children":6166},{"style":70},[6167],{"type":44,"value":893},{"type":29,"tag":63,"props":6169,"children":6170},{"style":117},[6171],{"type":44,"value":2823},{"type":29,"tag":63,"props":6173,"children":6174},{"style":76},[6175],{"type":44,"value":6176},"(parent, type, guid, initializer);\n",{"type":29,"tag":63,"props":6178,"children":6179},{"class":65,"line":1155},[6180,6185],{"type":29,"tag":63,"props":6181,"children":6182},{"style":70},[6183],{"type":44,"value":6184},"      break",{"type":29,"tag":63,"props":6186,"children":6187},{"style":76},[6188],{"type":44,"value":1244},{"type":29,"tag":63,"props":6190,"children":6191},{"class":65,"line":1164},[6192],{"type":29,"tag":63,"props":6193,"children":6194},{"style":977},[6195],{"type":44,"value":6133},{"type":29,"tag":63,"props":6197,"children":6198},{"class":65,"line":1183},[6199],{"type":29,"tag":63,"props":6200,"children":6201},{"style":76},[6202],{"type":44,"value":2123},{"type":29,"tag":63,"props":6204,"children":6205},{"class":65,"line":1215},[6206,6210],{"type":29,"tag":63,"props":6207,"children":6208},{"style":70},[6209],{"type":44,"value":1704},{"type":29,"tag":63,"props":6211,"children":6212},{"style":76},[6213],{"type":44,"value":6214}," result;\n",{"type":29,"tag":63,"props":6216,"children":6217},{"class":65,"line":1224},[6218],{"type":29,"tag":63,"props":6219,"children":6220},{"style":76},[6221],{"type":44,"value":257},{"type":29,"tag":30,"props":6223,"children":6224},{},[6225,6227,6233,6234,6240,6242,6247,6249,6254,6256,6261,6263,6268,6270,6275,6277,6283,6285,6290,6292,6297,6299,6305],{"type":44,"value":6226},"The parameter ",{"type":29,"tag":59,"props":6228,"children":6230},{"className":6229},[],[6231],{"type":44,"value":6232},"tChannelImpl: _tChannelImplFromWire",{"type":44,"value":4578},{"type":29,"tag":59,"props":6235,"children":6237},{"className":6236},[],[6238],{"type":44,"value":6239},"validator",{"type":44,"value":6241}," function is responsible for taking the initializer object above, which contains a guid for each browser, and convert it to the corresponding object stored in the ",{"type":29,"tag":59,"props":6243,"children":6245},{"className":6244},[],[6246],{"type":44,"value":2148},{"type":44,"value":6248}," variable in the ",{"type":29,"tag":59,"props":6250,"children":6252},{"className":6251},[],[6253],{"type":44,"value":679},{"type":44,"value":6255}," class. If you look at the type definition in ",{"type":29,"tag":59,"props":6257,"children":6259},{"className":6258},[],[6260],{"type":44,"value":679},{"type":44,"value":6262}," the ",{"type":29,"tag":59,"props":6264,"children":6266},{"className":6265},[],[6267],{"type":44,"value":2148},{"type":44,"value":6269}," variable is a map returning one of the ",{"type":29,"tag":59,"props":6271,"children":6273},{"className":6272},[],[6274],{"type":44,"value":604},{"type":44,"value":6276}," subclasses. So in the result above for the ",{"type":29,"tag":59,"props":6278,"children":6280},{"className":6279},[],[6281],{"type":44,"value":6282},"case: 'Playwright'",{"type":44,"value":6284},", it returns a ",{"type":29,"tag":59,"props":6286,"children":6288},{"className":6287},[],[6289],{"type":44,"value":12},{"type":44,"value":6291}," instance, which is a subclass of ",{"type":29,"tag":59,"props":6293,"children":6295},{"className":6294},[],[6296],{"type":44,"value":604},{"type":44,"value":6298},", defined in ",{"type":29,"tag":59,"props":6300,"children":6302},{"className":6301},[],[6303],{"type":44,"value":6304},"client/playwright.ts",{"type":44,"value":228},{"type":29,"tag":39,"props":6307,"children":6309},{"id":6308},"launching-the-browser-instance",[6310],{"type":44,"value":6311},"Launching the browser instance",{"type":29,"tag":30,"props":6313,"children":6314},{},[6315,6317,6322,6324,6330],{"type":44,"value":6316},"The final bit of code in ",{"type":29,"tag":59,"props":6318,"children":6320},{"className":6319},[],[6321],{"type":44,"value":504},{"type":44,"value":6323}," to consider is the ",{"type":29,"tag":59,"props":6325,"children":6327},{"className":6326},[],[6328],{"type":44,"value":6329},"_serverLauncher",{"type":44,"value":6331}," variables being set in each of the drivers. This is written as",{"type":29,"tag":52,"props":6333,"children":6335},{"className":54,"code":6334,"filename":730,"language":56,"meta":7,"style":7},"playwrightAPI.chromium._serverLauncher = new BrowserServerLauncherImpl(\n  \"chromium\"\n);\nplaywrightAPI.firefox._serverLauncher = new BrowserServerLauncherImpl(\n  \"firefox\"\n);\nplaywrightAPI.webkit._serverLauncher = new BrowserServerLauncherImpl(\"webkit\");\n",[6336],{"type":29,"tag":59,"props":6337,"children":6338},{"__ignoreMap":7},[6339,6363,6371,6378,6402,6410,6417],{"type":29,"tag":63,"props":6340,"children":6341},{"class":65,"line":66},[6342,6347,6351,6355,6359],{"type":29,"tag":63,"props":6343,"children":6344},{"style":76},[6345],{"type":44,"value":6346},"playwrightAPI.chromium._serverLauncher ",{"type":29,"tag":63,"props":6348,"children":6349},{"style":70},[6350],{"type":44,"value":1258},{"type":29,"tag":63,"props":6352,"children":6353},{"style":70},[6354],{"type":44,"value":893},{"type":29,"tag":63,"props":6356,"children":6357},{"style":117},[6358],{"type":44,"value":1267},{"type":29,"tag":63,"props":6360,"children":6361},{"style":76},[6362],{"type":44,"value":1212},{"type":29,"tag":63,"props":6364,"children":6365},{"class":65,"line":93},[6366],{"type":29,"tag":63,"props":6367,"children":6368},{"style":87},[6369],{"type":44,"value":6370},"  \"chromium\"\n",{"type":29,"tag":63,"props":6372,"children":6373},{"class":65,"line":103},[6374],{"type":29,"tag":63,"props":6375,"children":6376},{"style":76},[6377],{"type":44,"value":429},{"type":29,"tag":63,"props":6379,"children":6380},{"class":65,"line":138},[6381,6386,6390,6394,6398],{"type":29,"tag":63,"props":6382,"children":6383},{"style":76},[6384],{"type":44,"value":6385},"playwrightAPI.firefox._serverLauncher ",{"type":29,"tag":63,"props":6387,"children":6388},{"style":70},[6389],{"type":44,"value":1258},{"type":29,"tag":63,"props":6391,"children":6392},{"style":70},[6393],{"type":44,"value":893},{"type":29,"tag":63,"props":6395,"children":6396},{"style":117},[6397],{"type":44,"value":1267},{"type":29,"tag":63,"props":6399,"children":6400},{"style":76},[6401],{"type":44,"value":1212},{"type":29,"tag":63,"props":6403,"children":6404},{"class":65,"line":178},[6405],{"type":29,"tag":63,"props":6406,"children":6407},{"style":87},[6408],{"type":44,"value":6409},"  \"firefox\"\n",{"type":29,"tag":63,"props":6411,"children":6412},{"class":65,"line":213},[6413],{"type":29,"tag":63,"props":6414,"children":6415},{"style":76},[6416],{"type":44,"value":429},{"type":29,"tag":63,"props":6418,"children":6419},{"class":65,"line":251},[6420,6425,6429,6433,6437,6441,6446],{"type":29,"tag":63,"props":6421,"children":6422},{"style":76},[6423],{"type":44,"value":6424},"playwrightAPI.webkit._serverLauncher ",{"type":29,"tag":63,"props":6426,"children":6427},{"style":70},[6428],{"type":44,"value":1258},{"type":29,"tag":63,"props":6430,"children":6431},{"style":70},[6432],{"type":44,"value":893},{"type":29,"tag":63,"props":6434,"children":6435},{"style":117},[6436],{"type":44,"value":1267},{"type":29,"tag":63,"props":6438,"children":6439},{"style":76},[6440],{"type":44,"value":238},{"type":29,"tag":63,"props":6442,"children":6443},{"style":87},[6444],{"type":44,"value":6445},"\"webkit\"",{"type":29,"tag":63,"props":6447,"children":6448},{"style":76},[6449],{"type":44,"value":429},{"type":29,"tag":30,"props":6451,"children":6452},{},[6453,6454,6460,6462,6467,6469,6475,6477,6483],{"type":44,"value":3475},{"type":29,"tag":59,"props":6455,"children":6457},{"className":6456},[],[6458],{"type":44,"value":6459},"BrowserServerLauncherImpl",{"type":44,"value":6461}," class is defined next to the ",{"type":29,"tag":59,"props":6463,"children":6465},{"className":6464},[],[6466],{"type":44,"value":496},{"type":44,"value":6468}," file in ",{"type":29,"tag":59,"props":6470,"children":6472},{"className":6471},[],[6473],{"type":44,"value":6474},"browserServerLauncherImpl.ts",{"type":44,"value":6476},". The main functionality in this class lies in the ",{"type":29,"tag":59,"props":6478,"children":6480},{"className":6479},[],[6481],{"type":44,"value":6482},"launchServer",{"type":44,"value":6484}," function, and is only called when you use the",{"type":29,"tag":52,"props":6486,"children":6489},{"className":54,"code":6487,"filename":6488,"language":56,"meta":7,"style":7},"import playwright from \"playwright-core\";\n\nplaywright.chromium.launchServer(serverOptions);\n","my-script.ts",[6490],{"type":29,"tag":59,"props":6491,"children":6492},{"__ignoreMap":7},[6493,6517,6524],{"type":29,"tag":63,"props":6494,"children":6495},{"class":65,"line":66},[6496,6500,6505,6509,6513],{"type":29,"tag":63,"props":6497,"children":6498},{"style":70},[6499],{"type":44,"value":73},{"type":29,"tag":63,"props":6501,"children":6502},{"style":76},[6503],{"type":44,"value":6504}," playwright ",{"type":29,"tag":63,"props":6506,"children":6507},{"style":70},[6508],{"type":44,"value":84},{"type":29,"tag":63,"props":6510,"children":6511},{"style":87},[6512],{"type":44,"value":1779},{"type":29,"tag":63,"props":6514,"children":6515},{"style":76},[6516],{"type":44,"value":1244},{"type":29,"tag":63,"props":6518,"children":6519},{"class":65,"line":93},[6520],{"type":29,"tag":63,"props":6521,"children":6522},{"emptyLinePlaceholder":97},[6523],{"type":44,"value":100},{"type":29,"tag":63,"props":6525,"children":6526},{"class":65,"line":103},[6527,6532,6536],{"type":29,"tag":63,"props":6528,"children":6529},{"style":76},[6530],{"type":44,"value":6531},"playwright.chromium.",{"type":29,"tag":63,"props":6533,"children":6534},{"style":117},[6535],{"type":44,"value":6482},{"type":29,"tag":63,"props":6537,"children":6538},{"style":76},[6539],{"type":44,"value":6540},"(serverOptions);\n",{"type":29,"tag":30,"props":6542,"children":6543},{},[6544,6546,6552],{"type":44,"value":6545},"function. This is for launching a server which exposes a websocket for other programs to interact with the playwright API. This is not used if you are just writing a node script which accesses the ",{"type":29,"tag":59,"props":6547,"children":6549},{"className":6548},[],[6550],{"type":44,"value":6551},"'playwright-core'",{"type":44,"value":6553}," library, something like",{"type":29,"tag":52,"props":6555,"children":6557},{"className":54,"code":6556,"filename":6488,"language":56,"meta":7,"style":7},"import playwright from \"playwright-core\";\n\n(async function () {\n  const browser = await playwright.chromium.launch({ headless: false });\n  const page = await browser.newPage();\n  await page.goto(\"https://playwright.dev\");\n  // ... automate page interactions here\n})();\n",[6558],{"type":29,"tag":59,"props":6559,"children":6560},{"__ignoreMap":7},[6561,6584,6591,6611,6653,6684,6713,6721],{"type":29,"tag":63,"props":6562,"children":6563},{"class":65,"line":66},[6564,6568,6572,6576,6580],{"type":29,"tag":63,"props":6565,"children":6566},{"style":70},[6567],{"type":44,"value":73},{"type":29,"tag":63,"props":6569,"children":6570},{"style":76},[6571],{"type":44,"value":6504},{"type":29,"tag":63,"props":6573,"children":6574},{"style":70},[6575],{"type":44,"value":84},{"type":29,"tag":63,"props":6577,"children":6578},{"style":87},[6579],{"type":44,"value":1779},{"type":29,"tag":63,"props":6581,"children":6582},{"style":76},[6583],{"type":44,"value":1244},{"type":29,"tag":63,"props":6585,"children":6586},{"class":65,"line":93},[6587],{"type":29,"tag":63,"props":6588,"children":6589},{"emptyLinePlaceholder":97},[6590],{"type":44,"value":100},{"type":29,"tag":63,"props":6592,"children":6593},{"class":65,"line":103},[6594,6598,6602,6606],{"type":29,"tag":63,"props":6595,"children":6596},{"style":76},[6597],{"type":44,"value":238},{"type":29,"tag":63,"props":6599,"children":6600},{"style":70},[6601],{"type":44,"value":109},{"type":29,"tag":63,"props":6603,"children":6604},{"style":70},[6605],{"type":44,"value":114},{"type":29,"tag":63,"props":6607,"children":6608},{"style":76},[6609],{"type":44,"value":6610}," () {\n",{"type":29,"tag":63,"props":6612,"children":6613},{"class":65,"line":138},[6614,6618,6622,6626,6630,6635,6639,6644,6649],{"type":29,"tag":63,"props":6615,"children":6616},{"style":70},[6617],{"type":44,"value":144},{"type":29,"tag":63,"props":6619,"children":6620},{"style":394},[6621],{"type":44,"value":150},{"type":29,"tag":63,"props":6623,"children":6624},{"style":70},[6625],{"type":44,"value":155},{"type":29,"tag":63,"props":6627,"children":6628},{"style":70},[6629],{"type":44,"value":160},{"type":29,"tag":63,"props":6631,"children":6632},{"style":76},[6633],{"type":44,"value":6634}," playwright.chromium.",{"type":29,"tag":63,"props":6636,"children":6637},{"style":117},[6638],{"type":44,"value":170},{"type":29,"tag":63,"props":6640,"children":6641},{"style":76},[6642],{"type":44,"value":6643},"({ headless: ",{"type":29,"tag":63,"props":6645,"children":6646},{"style":394},[6647],{"type":44,"value":6648},"false",{"type":29,"tag":63,"props":6650,"children":6651},{"style":76},[6652],{"type":44,"value":5014},{"type":29,"tag":63,"props":6654,"children":6655},{"class":65,"line":178},[6656,6660,6664,6668,6672,6676,6680],{"type":29,"tag":63,"props":6657,"children":6658},{"style":70},[6659],{"type":44,"value":144},{"type":29,"tag":63,"props":6661,"children":6662},{"style":394},[6663],{"type":44,"value":188},{"type":29,"tag":63,"props":6665,"children":6666},{"style":70},[6667],{"type":44,"value":155},{"type":29,"tag":63,"props":6669,"children":6670},{"style":70},[6671],{"type":44,"value":160},{"type":29,"tag":63,"props":6673,"children":6674},{"style":76},[6675],{"type":44,"value":201},{"type":29,"tag":63,"props":6677,"children":6678},{"style":117},[6679],{"type":44,"value":206},{"type":29,"tag":63,"props":6681,"children":6682},{"style":76},[6683],{"type":44,"value":939},{"type":29,"tag":63,"props":6685,"children":6686},{"class":65,"line":213},[6687,6691,6696,6700,6704,6709],{"type":29,"tag":63,"props":6688,"children":6689},{"style":70},[6690],{"type":44,"value":219},{"type":29,"tag":63,"props":6692,"children":6693},{"style":76},[6694],{"type":44,"value":6695}," page.",{"type":29,"tag":63,"props":6697,"children":6698},{"style":117},[6699],{"type":44,"value":233},{"type":29,"tag":63,"props":6701,"children":6702},{"style":76},[6703],{"type":44,"value":238},{"type":29,"tag":63,"props":6705,"children":6706},{"style":87},[6707],{"type":44,"value":6708},"\"https://playwright.dev\"",{"type":29,"tag":63,"props":6710,"children":6711},{"style":76},[6712],{"type":44,"value":429},{"type":29,"tag":63,"props":6714,"children":6715},{"class":65,"line":251},[6716],{"type":29,"tag":63,"props":6717,"children":6718},{"style":977},[6719],{"type":44,"value":6720},"  // ... automate page interactions here\n",{"type":29,"tag":63,"props":6722,"children":6723},{"class":65,"line":923},[6724],{"type":29,"tag":63,"props":6725,"children":6726},{"style":76},[6727],{"type":44,"value":6728},"})();\n",{"type":29,"tag":30,"props":6730,"children":6731},{},[6732,6734,6739],{"type":44,"value":6733},"so for now we skip giving an overview of the ",{"type":29,"tag":59,"props":6735,"children":6737},{"className":6736},[],[6738],{"type":44,"value":6459},{"type":44,"value":6740}," code and defer it to a later post.",{"type":29,"tag":39,"props":6742,"children":6744},{"id":6743},"recap",[6745],{"type":44,"value":6746},"Recap",{"type":29,"tag":30,"props":6748,"children":6749},{},[6750],{"type":44,"value":6751},"Whew! That was quite the journey, so let's recap the main points we covered in this post:",{"type":29,"tag":6753,"props":6754,"children":6755},"ul",{},[6756,6780,6798,6822,6833,6859,6882,6894,6939],{"type":29,"tag":6757,"props":6758,"children":6759},"li",{},[6760,6765,6767,6772,6774,6779],{"type":29,"tag":59,"props":6761,"children":6763},{"className":6762},[],[6764],{"type":44,"value":298},{"type":44,"value":6766}," is a wrapper around the test runner package ",{"type":29,"tag":59,"props":6768,"children":6770},{"className":6769},[],[6771],{"type":44,"value":313},{"type":44,"value":6773}," and the browser automation package ",{"type":29,"tag":59,"props":6775,"children":6777},{"className":6776},[],[6778],{"type":44,"value":306},{"type":44,"value":228},{"type":29,"tag":6757,"props":6781,"children":6782},{},[6783,6785,6790,6792,6797],{"type":44,"value":6784},"Importing from ",{"type":29,"tag":59,"props":6786,"children":6788},{"className":6787},[],[6789],{"type":44,"value":287},{"type":44,"value":6791}," is a dynamically generated process under the hood, which is done in ",{"type":29,"tag":59,"props":6793,"children":6795},{"className":6794},[],[6796],{"type":44,"value":730},{"type":44,"value":228},{"type":29,"tag":6757,"props":6799,"children":6800},{},[6801,6802,6807,6809,6814,6815,6820],{"type":44,"value":570},{"type":29,"tag":59,"props":6803,"children":6805},{"className":6804},[],[6806],{"type":44,"value":287},{"type":44,"value":6808}," there are two main libraries, the ",{"type":29,"tag":59,"props":6810,"children":6812},{"className":6811},[],[6813],{"type":44,"value":519},{"type":44,"value":281},{"type":29,"tag":59,"props":6816,"children":6818},{"className":6817},[],[6819],{"type":44,"value":527},{"type":44,"value":6821}," libraries.",{"type":29,"tag":6757,"props":6823,"children":6824},{},[6825,6827,6832],{"type":44,"value":6826},"This separation exists so other programming languages can easily build a client library which communicates with the ",{"type":29,"tag":59,"props":6828,"children":6830},{"className":6829},[],[6831],{"type":44,"value":527},{"type":44,"value":559},{"type":29,"tag":6757,"props":6834,"children":6835},{},[6836,6838,6843,6845,6850,6852,6857],{"type":44,"value":6837},"The client-side API and server-side API communicate with each other over a client-side ",{"type":29,"tag":59,"props":6839,"children":6841},{"className":6840},[],[6842],{"type":44,"value":679},{"type":44,"value":6844}," object and a server-side ",{"type":29,"tag":59,"props":6846,"children":6848},{"className":6847},[],[6849],{"type":44,"value":687},{"type":44,"value":6851}," object. These pass messages with one another through their runtime-defined ",{"type":29,"tag":59,"props":6853,"children":6855},{"className":6854},[],[6856],{"type":44,"value":1015},{"type":44,"value":6858}," callback.",{"type":29,"tag":6757,"props":6860,"children":6861},{},[6862,6867,6869,6874,6875,6880],{"type":29,"tag":59,"props":6863,"children":6865},{"className":6864},[],[6866],{"type":44,"value":679},{"type":44,"value":6868}," is responsible for constructing client side API's, the API methods you import from ",{"type":29,"tag":59,"props":6870,"children":6872},{"className":6871},[],[6873],{"type":44,"value":287},{"type":44,"value":4732},{"type":29,"tag":59,"props":6876,"children":6878},{"className":6877},[],[6879],{"type":44,"value":687},{"type":44,"value":6881}," is responsible for keeping track of the dispatcher objects on the server side.",{"type":29,"tag":6757,"props":6883,"children":6884},{},[6885,6887,6892],{"type":44,"value":6886},"The instances of the ",{"type":29,"tag":59,"props":6888,"children":6890},{"className":6889},[],[6891],{"type":44,"value":619},{"type":44,"value":6893}," subclasses are responsible for communicating with the browser. They will send automation commands for their specific scope of functionality.",{"type":29,"tag":6757,"props":6895,"children":6896},{},[6897,6902,6904,6909,6911,6916,6918,6923,6925,6930,6932,6937],{"type":29,"tag":59,"props":6898,"children":6900},{"className":6899},[],[6901],{"type":44,"value":679},{"type":44,"value":6903}," is wrapped by ",{"type":29,"tag":59,"props":6905,"children":6907},{"className":6906},[],[6908],{"type":44,"value":604},{"type":44,"value":6910}," subclasses, which all point to the same instance of ",{"type":29,"tag":59,"props":6912,"children":6914},{"className":6913},[],[6915],{"type":44,"value":679},{"type":44,"value":6917}," and are responsible for the client-side APIs. Each of which corresponds to a specific component of the browser, e.g. ",{"type":29,"tag":59,"props":6919,"children":6921},{"className":6920},[],[6922],{"type":44,"value":642},{"type":44,"value":6924},". Similarly, ",{"type":29,"tag":59,"props":6926,"children":6928},{"className":6927},[],[6929],{"type":44,"value":687},{"type":44,"value":6931}," is wrapped by a subclass of ",{"type":29,"tag":59,"props":6933,"children":6935},{"className":6934},[],[6936],{"type":44,"value":619},{"type":44,"value":6938}," which is responsible for a part of the automated browser.",{"type":29,"tag":6757,"props":6940,"children":6941},{},[6942,6944,6949,6950,6955,6957,6963],{"type":44,"value":6943},"Both the ",{"type":29,"tag":59,"props":6945,"children":6947},{"className":6946},[],[6948],{"type":44,"value":679},{"type":44,"value":281},{"type":29,"tag":59,"props":6951,"children":6953},{"className":6952},[],[6954],{"type":44,"value":687},{"type":44,"value":6956}," classes keep track of the same object on each side of the client/server side of the divide with a unique ",{"type":29,"tag":59,"props":6958,"children":6960},{"className":6959},[],[6961],{"type":44,"value":6962},"GUID",{"type":44,"value":228},{"type":29,"tag":30,"props":6965,"children":6966},{},[6967,6969,6974,6975,6980],{"type":44,"value":6968},"Once you have parsed the functionality of ",{"type":29,"tag":59,"props":6970,"children":6972},{"className":6971},[],[6973],{"type":44,"value":679},{"type":44,"value":281},{"type":29,"tag":59,"props":6976,"children":6978},{"className":6977},[],[6979],{"type":44,"value":687},{"type":44,"value":6981},", and their wrapper APIs, you are at an excellent spot for understanding the whole architecture of Playwright. These core components are essential for providing the client-facing interface used by test-engineers and the facade provided by the server, giving a unified API to automate browser actions.",{"type":29,"tag":6983,"props":6984,"children":6985},"style",{},[6986],{"type":44,"value":6987},"html .default .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}",{"title":7,"searchDepth":93,"depth":93,"links":6989},[6990,6995,6996,7002,7003],{"id":41,"depth":93,"text":45,"children":6991},[6992,6994],{"id":271,"depth":103,"text":6993},"Merging playwright and playwright-core",{"id":562,"depth":103,"text":565},{"id":704,"depth":93,"text":707},{"id":2168,"depth":93,"text":2171,"children":6997},[6998,6999,7000,7001],{"id":2633,"depth":103,"text":2636},{"id":3374,"depth":103,"text":3377},{"id":4626,"depth":103,"text":4629},{"id":4806,"depth":103,"text":4809},{"id":6308,"depth":93,"text":6311},{"id":6743,"depth":93,"text":6746},"markdown","content:playwright:how-playwright-initializes.md","content","playwright/how-playwright-initializes.md","md",1720565270347]