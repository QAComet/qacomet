[{"data":1,"prerenderedAt":6293},["Reactive",2],{"blog-post-playwright/how-playwright-initializes":3},{"_path":4,"_dir":5,"_draft":6,"_partial":6,"_locale":7,"title":8,"description":9,"breadcrumbs":10,"image":17,"shortDescription":18,"created":19,"link":4,"body":25,"_type":6288,"_id":6289,"_source":6290,"_file":6291,"_extension":6292},"/playwright/how-playwright-initializes","playwright",false,"","How importing from Playwright works","In this post we dive into how Playwright initializes itself when you import anything from the library. If you look under the hood there is some complex machinery generating the API making it difficult for someone unfamiliar to get started with Playwright's internals.",[11,14],{"name":12,"path":13},"Playwright","/playwright/",{"name":15,"path":16},"How Playwright Initializes","/playwright/how-playwright-initializes/","img","Importing from playwright is a complex process with many interacting components. Let's look under the hood to discover how playwright-core is structured.",{"string":20,"number":21,"month":22,"day":23,"year":24},"March 13, 2024",1710309600000,"Mar",13,2024,{"type":26,"children":27,"toc":6273},"root",[28,38,46,51,258,263,268,288,359,379,430,530,560,566,697,702,708,727,1718,1752,1784,1804,1865,1870,1931,1943,2131,2166,2172,2247,2442,2447,2547,2604,2610,2638,2703,2765,2777,3445,3528,3535,3547,3776,3855,3861,3982,3988,4029,4231,4279,4321,4340,4626,4675,4866,4886,5327,5411,5485,5564,5628,5634,5647,5765,5800,5825,5838,6014,6026,6032,6037,6249,6267],{"type":29,"tag":30,"props":31,"children":32},"element","p",{},[33],{"type":29,"tag":17,"props":34,"children":37},{"alt":35,"src":36},"Diagram of playwright-core initialization process","/img/playwright/playwright-core_initialization_diagram.jpg",[],{"type":29,"tag":39,"props":40,"children":42},"h2",{"id":41},"peering-into-playwrights-import-process",[43],{"type":44,"value":45},"text","Peering into Playwright's import process",{"type":29,"tag":30,"props":47,"children":48},{},[49],{"type":44,"value":50},"Whenever you import playwright, there's a lot of code being executed before you can actually execute anything with its APIs. In the following short snippet",{"type":29,"tag":52,"props":53,"children":57},"pre",{"className":54,"code":55,"language":56,"meta":7,"style":7},"language-ts shiki shiki-themes github-dark","import { chromium } from '@playwright/test'\n\nasync function main () => {\n  const browser = await chromium.launch()\n  const page = await browser.newPage()\n  await page.goto(\"https://qacomet.com\")\n}\n","ts",[58],{"type":29,"tag":59,"props":60,"children":61},"code",{"__ignoreMap":7},[62,91,101,136,176,211,249],{"type":29,"tag":63,"props":64,"children":67},"span",{"class":65,"line":66},"line",1,[68,74,80,85],{"type":29,"tag":63,"props":69,"children":71},{"style":70},"--shiki-default:#F97583",[72],{"type":44,"value":73},"import",{"type":29,"tag":63,"props":75,"children":77},{"style":76},"--shiki-default:#E1E4E8",[78],{"type":44,"value":79}," { chromium } ",{"type":29,"tag":63,"props":81,"children":82},{"style":70},[83],{"type":44,"value":84},"from",{"type":29,"tag":63,"props":86,"children":88},{"style":87},"--shiki-default:#9ECBFF",[89],{"type":44,"value":90}," '@playwright/test'\n",{"type":29,"tag":63,"props":92,"children":94},{"class":65,"line":93},2,[95],{"type":29,"tag":63,"props":96,"children":98},{"emptyLinePlaceholder":97},true,[99],{"type":44,"value":100},"\n",{"type":29,"tag":63,"props":102,"children":104},{"class":65,"line":103},3,[105,110,115,121,126,131],{"type":29,"tag":63,"props":106,"children":107},{"style":70},[108],{"type":44,"value":109},"async",{"type":29,"tag":63,"props":111,"children":112},{"style":70},[113],{"type":44,"value":114}," function",{"type":29,"tag":63,"props":116,"children":118},{"style":117},"--shiki-default:#B392F0",[119],{"type":44,"value":120}," main",{"type":29,"tag":63,"props":122,"children":123},{"style":76},[124],{"type":44,"value":125}," () ",{"type":29,"tag":63,"props":127,"children":128},{"style":70},[129],{"type":44,"value":130},"=>",{"type":29,"tag":63,"props":132,"children":133},{"style":76},[134],{"type":44,"value":135}," {\n",{"type":29,"tag":63,"props":137,"children":139},{"class":65,"line":138},4,[140,145,151,156,161,166,171],{"type":29,"tag":63,"props":141,"children":142},{"style":117},[143],{"type":44,"value":144},"  const",{"type":29,"tag":63,"props":146,"children":148},{"style":147},"--shiki-default:#FFAB70",[149],{"type":44,"value":150}," browser",{"type":29,"tag":63,"props":152,"children":153},{"style":70},[154],{"type":44,"value":155}," =",{"type":29,"tag":63,"props":157,"children":158},{"style":70},[159],{"type":44,"value":160}," await",{"type":29,"tag":63,"props":162,"children":163},{"style":76},[164],{"type":44,"value":165}," chromium.",{"type":29,"tag":63,"props":167,"children":168},{"style":117},[169],{"type":44,"value":170},"launch",{"type":29,"tag":63,"props":172,"children":173},{"style":76},[174],{"type":44,"value":175},"()\n",{"type":29,"tag":63,"props":177,"children":179},{"class":65,"line":178},5,[180,184,189,193,197,202,207],{"type":29,"tag":63,"props":181,"children":182},{"style":117},[183],{"type":44,"value":144},{"type":29,"tag":63,"props":185,"children":186},{"style":147},[187],{"type":44,"value":188}," page",{"type":29,"tag":63,"props":190,"children":191},{"style":70},[192],{"type":44,"value":155},{"type":29,"tag":63,"props":194,"children":195},{"style":70},[196],{"type":44,"value":160},{"type":29,"tag":63,"props":198,"children":199},{"style":76},[200],{"type":44,"value":201}," browser.",{"type":29,"tag":63,"props":203,"children":204},{"style":117},[205],{"type":44,"value":206},"newPage",{"type":29,"tag":63,"props":208,"children":209},{"style":76},[210],{"type":44,"value":175},{"type":29,"tag":63,"props":212,"children":214},{"class":65,"line":213},6,[215,220,224,229,234,239,244],{"type":29,"tag":63,"props":216,"children":217},{"style":117},[218],{"type":44,"value":219},"  await",{"type":29,"tag":63,"props":221,"children":222},{"style":117},[223],{"type":44,"value":188},{"type":29,"tag":63,"props":225,"children":226},{"style":76},[227],{"type":44,"value":228},".",{"type":29,"tag":63,"props":230,"children":231},{"style":117},[232],{"type":44,"value":233},"goto",{"type":29,"tag":63,"props":235,"children":236},{"style":76},[237],{"type":44,"value":238},"(",{"type":29,"tag":63,"props":240,"children":241},{"style":87},[242],{"type":44,"value":243},"\"https://qacomet.com\"",{"type":29,"tag":63,"props":245,"children":246},{"style":76},[247],{"type":44,"value":248},")\n",{"type":29,"tag":63,"props":250,"children":252},{"class":65,"line":251},7,[253],{"type":29,"tag":63,"props":254,"children":255},{"style":76},[256],{"type":44,"value":257},"}\n",{"type":29,"tag":30,"props":259,"children":260},{},[261],{"type":44,"value":262},"Playwright is initializing a server controlling the browser instance, building a connection between its underlying client and server library, and using a factory method to create a client-facing API for manipulating the browser. This long seemingly roundabout process is actually Playwright's secret sauce for much of its functionality. Because of this architectural decision, it is now possible to create client API's for Playwright in multiple languages, all which use the same underlying software architecture. This gives a consistent developer experience across projects spanning multiple languages, such as Javascript, Python, Java, and .NET. In addition, it's now easier to build future community supported clients in other languages, such as in Ruby, because of the replicability of Playwright's core interfaces.",{"type":29,"tag":30,"props":264,"children":265},{},[266],{"type":44,"value":267},"In order to see how the general project is structured, and how its design patterns can be replicated across clients, we trace through Playwright's initialization process in its core Typescript project, on which every other client library depends. By doing this, we will view its internals giving a clear picture of its internal architecture.",{"type":29,"tag":269,"props":270,"children":272},"h3",{"id":271},"merging-playwright-and-playwright-core",[273,275,280,282],{"type":44,"value":274},"Merging ",{"type":29,"tag":59,"props":276,"children":278},{"className":277},[],[279],{"type":44,"value":5},{"type":44,"value":281}," and ",{"type":29,"tag":59,"props":283,"children":285},{"className":284},[],[286],{"type":44,"value":287},"playwright-core",{"type":29,"tag":30,"props":289,"children":290},{},[291,293,299,301,307,308,314,316,322,324,329,331,337,339,344,346,351,353,358],{"type":44,"value":292},"Internally, when you import from ",{"type":29,"tag":59,"props":294,"children":296},{"className":295},[],[297],{"type":44,"value":298},"@playwright/test",{"type":44,"value":300},", there is an underlying call to import from two merged packages, ",{"type":29,"tag":59,"props":302,"children":304},{"className":303},[],[305],{"type":44,"value":306},"packages/playwright-core",{"type":44,"value":281},{"type":29,"tag":59,"props":309,"children":311},{"className":310},[],[312],{"type":44,"value":313},"packages/playwright",{"type":44,"value":315},". This merge happens in ",{"type":29,"tag":59,"props":317,"children":319},{"className":318},[],[320],{"type":44,"value":321},"packages/playwright/test",{"type":44,"value":323},", since ",{"type":29,"tag":59,"props":325,"children":327},{"className":326},[],[328],{"type":44,"value":298},{"type":44,"value":330}," is just an outward facinging export of ",{"type":29,"tag":59,"props":332,"children":334},{"className":333},[],[335],{"type":44,"value":336},"require('playwright/test')",{"type":44,"value":338},", an alias for ",{"type":29,"tag":59,"props":340,"children":342},{"className":341},[],[343],{"type":44,"value":321},{"type":44,"value":345},". This is where the test execution API's from ",{"type":29,"tag":59,"props":347,"children":349},{"className":348},[],[350],{"type":44,"value":313},{"type":44,"value":352}," are combined with the browser automation API's from ",{"type":29,"tag":59,"props":354,"children":356},{"className":355},[],[357],{"type":44,"value":306},{"type":44,"value":228},{"type":29,"tag":30,"props":360,"children":361},{},[362,364,369,371,377],{"type":44,"value":363},"We will focus on the import from ",{"type":29,"tag":59,"props":365,"children":367},{"className":366},[],[368],{"type":44,"value":287},{"type":44,"value":370},", since it provides the core browser automation and is the code every other client library wraps. Looking at its ",{"type":29,"tag":59,"props":372,"children":374},{"className":373},[],[375],{"type":44,"value":376},"index.js",{"type":44,"value":378}," file",{"type":29,"tag":52,"props":380,"children":385},{"className":381,"code":382,"filename":383,"language":384,"meta":7,"style":7},"language-js shiki shiki-themes github-dark","module.exports = require(\"./lib/inprocess\");\n","packages/playwright-core/index.js","js",[386],{"type":29,"tag":59,"props":387,"children":388},{"__ignoreMap":7},[389],{"type":29,"tag":63,"props":390,"children":391},{"class":65,"line":66},[392,398,402,407,411,416,420,425],{"type":29,"tag":63,"props":393,"children":395},{"style":394},"--shiki-default:#79B8FF",[396],{"type":44,"value":397},"module",{"type":29,"tag":63,"props":399,"children":400},{"style":76},[401],{"type":44,"value":228},{"type":29,"tag":63,"props":403,"children":404},{"style":394},[405],{"type":44,"value":406},"exports",{"type":29,"tag":63,"props":408,"children":409},{"style":70},[410],{"type":44,"value":155},{"type":29,"tag":63,"props":412,"children":413},{"style":117},[414],{"type":44,"value":415}," require",{"type":29,"tag":63,"props":417,"children":418},{"style":76},[419],{"type":44,"value":238},{"type":29,"tag":63,"props":421,"children":422},{"style":87},[423],{"type":44,"value":424},"\"./lib/inprocess\"",{"type":29,"tag":63,"props":426,"children":427},{"style":76},[428],{"type":44,"value":429},");\n",{"type":29,"tag":30,"props":431,"children":432},{},[433,435,441,443,449,451,457,459,465,467,473,475,481,483,489,491,497,499,505,507,512,514,520,522,528],{"type":44,"value":434},"gives an export from its ",{"type":29,"tag":59,"props":436,"children":438},{"className":437},[],[439],{"type":44,"value":440},"lib/inprocess.ts",{"type":44,"value":442}," file (note the ",{"type":29,"tag":59,"props":444,"children":446},{"className":445},[],[447],{"type":44,"value":448},"src",{"type":44,"value":450}," directory is compiled to the ",{"type":29,"tag":59,"props":452,"children":454},{"className":453},[],[455],{"type":44,"value":456},"lib",{"type":44,"value":458}," directory after playwright runs its build script, and is what's found in ",{"type":29,"tag":59,"props":460,"children":462},{"className":461},[],[463],{"type":44,"value":464},"node_modules/playwright-core",{"type":44,"value":466},", hence the require imports from ",{"type":29,"tag":59,"props":468,"children":470},{"className":469},[],[471],{"type":44,"value":472},"./lib/",{"type":44,"value":474}," and not ",{"type":29,"tag":59,"props":476,"children":478},{"className":477},[],[479],{"type":44,"value":480},"./src/",{"type":44,"value":482},"). The ",{"type":29,"tag":59,"props":484,"children":486},{"className":485},[],[487],{"type":44,"value":488},"inprocess.ts",{"type":44,"value":490}," file just imports from the adjacent ",{"type":29,"tag":59,"props":492,"children":494},{"className":493},[],[495],{"type":44,"value":496},"inProcessFactory.ts",{"type":44,"value":498}," and executes the function from there, called ",{"type":29,"tag":59,"props":500,"children":502},{"className":501},[],[503],{"type":44,"value":504},"createInProcessPlaywright",{"type":44,"value":506},". We include the source below in its own section but note ",{"type":29,"tag":59,"props":508,"children":510},{"className":509},[],[511],{"type":44,"value":504},{"type":44,"value":513}," dynamically intiailizes the interface between the client library, defined in ",{"type":29,"tag":59,"props":515,"children":517},{"className":516},[],[518],{"type":44,"value":519},"src/client",{"type":44,"value":521},", and the server library, defined in ",{"type":29,"tag":59,"props":523,"children":525},{"className":524},[],[526],{"type":44,"value":527},"src/server",{"type":44,"value":529},". The server library is responsible for dispatching browser automation actions over a browser automation protocol, such as the Chrome Devtools Protocol, abbreviated as CDP, while the client library gives a public API for playwright users to interact with the server library.",{"type":29,"tag":30,"props":531,"children":532},{},[533,535,544,546,551,553,558],{"type":44,"value":534},"This separation of logic between client and server is what gives implementations of the client library in multiple languages. For example, if you look in the ",{"type":29,"tag":536,"props":537,"children":541},"a",{"href":538,"rel":539},"https://github.com/microsoft/playwright-python",[540],"nofollow",[542],{"type":44,"value":543},"playwright-python",{"type":44,"value":545}," source code, you will find the same design patterns and classes defined in ",{"type":29,"tag":59,"props":547,"children":549},{"className":548},[],[550],{"type":44,"value":287},{"type":44,"value":552},"'s ",{"type":29,"tag":59,"props":554,"children":556},{"className":555},[],[557],{"type":44,"value":519},{"type":44,"value":559}," library.",{"type":29,"tag":269,"props":561,"children":563},{"id":562},"rapid-overview-of-the-client-and-server-libraries",[564],{"type":44,"value":565},"Rapid overview of the client and server libraries",{"type":29,"tag":30,"props":567,"children":568},{},[569,571,576,578,583,584,589,591,597,599,605,607,612,614,620,622,628,630,635,637,643,645,651,653,658,659,665,667,672,674,680,682,688,690,695],{"type":44,"value":570},"In ",{"type":29,"tag":59,"props":572,"children":574},{"className":573},[],[575],{"type":44,"value":287},{"type":44,"value":577}," the main functionality can be found in the ",{"type":29,"tag":59,"props":579,"children":581},{"className":580},[],[582],{"type":44,"value":519},{"type":44,"value":281},{"type":29,"tag":59,"props":585,"children":587},{"className":586},[],[588],{"type":44,"value":527},{"type":44,"value":590}," folders. The ",{"type":29,"tag":59,"props":592,"children":594},{"className":593},[],[595],{"type":44,"value":596},"client",{"type":44,"value":598}," folder contains classes, many of which are subclasses of the ",{"type":29,"tag":59,"props":600,"children":602},{"className":601},[],[603],{"type":44,"value":604},"ChannelOwner",{"type":44,"value":606}," class. This ",{"type":29,"tag":59,"props":608,"children":610},{"className":609},[],[611],{"type":44,"value":604},{"type":44,"value":613}," class is a client-side representation of a corresponding server-side ",{"type":29,"tag":59,"props":615,"children":617},{"className":616},[],[618],{"type":44,"value":619},"Dispatcher",{"type":44,"value":621}," class in the ",{"type":29,"tag":59,"props":623,"children":625},{"className":624},[],[626],{"type":44,"value":627},"src/server/dispatchers",{"type":44,"value":629}," folder. These dispatcher classes manage communication from the server library to the browser being automated. So for a ",{"type":29,"tag":59,"props":631,"children":633},{"className":632},[],[634],{"type":44,"value":604},{"type":44,"value":636}," subclass called ",{"type":29,"tag":59,"props":638,"children":640},{"className":639},[],[641],{"type":44,"value":642},"Page",{"type":44,"value":644},", containing the client side APIs (such as ",{"type":29,"tag":59,"props":646,"children":648},{"className":647},[],[649],{"type":44,"value":650},"page.goto",{"type":44,"value":652},"), there is a corresponding ",{"type":29,"tag":59,"props":654,"children":656},{"className":655},[],[657],{"type":44,"value":619},{"type":44,"value":636},{"type":29,"tag":59,"props":660,"children":662},{"className":661},[],[663],{"type":44,"value":664},"PageDispatcher",{"type":44,"value":666},". When we call ",{"type":29,"tag":59,"props":668,"children":670},{"className":669},[],[671],{"type":44,"value":650},{"type":44,"value":673}," a message is send over the unique client ",{"type":29,"tag":59,"props":675,"children":677},{"className":676},[],[678],{"type":44,"value":679},"Connection",{"type":44,"value":681}," instance to the unique ",{"type":29,"tag":59,"props":683,"children":685},{"className":684},[],[686],{"type":44,"value":687},"DispatcherConnection",{"type":44,"value":689}," instance, which calls the corresponding ",{"type":29,"tag":59,"props":691,"children":693},{"className":692},[],[694],{"type":44,"value":664},{"type":44,"value":696},", which then marshalls the automation command to the running browser process. This is a repeated pattern for many of the client-facing APIs you use while writing browser automation scripts with Playwright.",{"type":29,"tag":30,"props":698,"children":699},{},[700],{"type":44,"value":701},"Understanding the inner workings of these abstractions is essential for grokking the architecture of Playwright, which we touch on soon. But first, let's go back to tracing the import process from Playwright and see how that works.",{"type":29,"tag":39,"props":703,"children":705},{"id":704},"playwrights-core-api-factory-createinprocessplaywright",[706],{"type":44,"value":707},"Playwright's core API factory, createInProcessPlaywright",{"type":29,"tag":30,"props":709,"children":710},{},[711,713,718,720,725],{"type":44,"value":712},"This file, ",{"type":29,"tag":59,"props":714,"children":716},{"className":715},[],[717],{"type":44,"value":496},{"type":44,"value":719},", contains only one function called ",{"type":29,"tag":59,"props":721,"children":723},{"className":722},[],[724],{"type":44,"value":504},{"type":44,"value":726},". We include it here as a reference:",{"type":29,"tag":52,"props":728,"children":731},{"className":54,"code":729,"filename":730,"language":56,"meta":7,"style":7},"export function createInProcessPlaywright(): PlaywrightAPI {\n  const playwright = createPlaywright({\n    sdkLanguage:\n      (process.env.PW_LANG_NAME as Language | undefined) || \"javascript\",\n  });\n\n  const clientConnection = new Connection(undefined, undefined);\n  clientConnection.useRawBuffers();\n  const dispatcherConnection = new DispatcherConnection(true /* local */);\n\n  // Dispatch synchronously at first.\n  dispatcherConnection.onmessage = (message) =>\n    clientConnection.dispatch(message);\n  clientConnection.onmessage = (message) =>\n    dispatcherConnection.dispatch(message);\n\n  const rootScope = new RootDispatcher(dispatcherConnection);\n\n  // Initialize Playwright channel.\n  new PlaywrightDispatcher(rootScope, playwright);\n  const playwrightAPI = clientConnection.getObjectWithKnownName(\n    \"Playwright\"\n  ) as PlaywrightAPI;\n  playwrightAPI.chromium._serverLauncher = new BrowserServerLauncherImpl(\n    \"chromium\"\n  );\n  playwrightAPI.firefox._serverLauncher = new BrowserServerLauncherImpl(\n    \"firefox\"\n  );\n  playwrightAPI.webkit._serverLauncher = new BrowserServerLauncherImpl(\n    \"webkit\"\n  );\n  playwrightAPI._android._serverLauncher = new AndroidServerLauncherImpl();\n\n  // Switch to async dispatch after we got Playwright object.\n  dispatcherConnection.onmessage = (message) =>\n    setImmediate(() => clientConnection.dispatch(message));\n  clientConnection.onmessage = (message) =>\n    setImmediate(() => dispatcherConnection.dispatch(message));\n\n  clientConnection.toImpl = (x: any) =>\n    x\n      ? dispatcherConnection._dispatchers.get(x._guid)!._object\n      : dispatcherConnection._dispatchers.get(\"\");\n  (playwrightAPI as any)._toImpl = clientConnection.toImpl;\n  return playwrightAPI;\n}\n","packages/playwright-core/src/inProcessFactory.ts",[732],{"type":29,"tag":59,"props":733,"children":734},{"__ignoreMap":7},[735,771,797,805,858,866,873,921,940,985,993,1002,1039,1057,1089,1106,1114,1145,1153,1162,1181,1213,1222,1245,1272,1281,1290,1315,1324,1332,1357,1366,1374,1400,1408,1417,1449,1480,1512,1541,1549,1592,1601,1635,1665,1696,1710],{"type":29,"tag":63,"props":736,"children":737},{"class":65,"line":66},[738,743,747,752,757,762,767],{"type":29,"tag":63,"props":739,"children":740},{"style":70},[741],{"type":44,"value":742},"export",{"type":29,"tag":63,"props":744,"children":745},{"style":70},[746],{"type":44,"value":114},{"type":29,"tag":63,"props":748,"children":749},{"style":117},[750],{"type":44,"value":751}," createInProcessPlaywright",{"type":29,"tag":63,"props":753,"children":754},{"style":76},[755],{"type":44,"value":756},"()",{"type":29,"tag":63,"props":758,"children":759},{"style":70},[760],{"type":44,"value":761},":",{"type":29,"tag":63,"props":763,"children":764},{"style":117},[765],{"type":44,"value":766}," PlaywrightAPI",{"type":29,"tag":63,"props":768,"children":769},{"style":76},[770],{"type":44,"value":135},{"type":29,"tag":63,"props":772,"children":773},{"class":65,"line":93},[774,778,783,787,792],{"type":29,"tag":63,"props":775,"children":776},{"style":70},[777],{"type":44,"value":144},{"type":29,"tag":63,"props":779,"children":780},{"style":394},[781],{"type":44,"value":782}," playwright",{"type":29,"tag":63,"props":784,"children":785},{"style":70},[786],{"type":44,"value":155},{"type":29,"tag":63,"props":788,"children":789},{"style":117},[790],{"type":44,"value":791}," createPlaywright",{"type":29,"tag":63,"props":793,"children":794},{"style":76},[795],{"type":44,"value":796},"({\n",{"type":29,"tag":63,"props":798,"children":799},{"class":65,"line":103},[800],{"type":29,"tag":63,"props":801,"children":802},{"style":76},[803],{"type":44,"value":804},"    sdkLanguage:\n",{"type":29,"tag":63,"props":806,"children":807},{"class":65,"line":138},[808,813,818,823,828,833,838,843,848,853],{"type":29,"tag":63,"props":809,"children":810},{"style":76},[811],{"type":44,"value":812},"      (process.env.",{"type":29,"tag":63,"props":814,"children":815},{"style":394},[816],{"type":44,"value":817},"PW_LANG_NAME",{"type":29,"tag":63,"props":819,"children":820},{"style":70},[821],{"type":44,"value":822}," as",{"type":29,"tag":63,"props":824,"children":825},{"style":117},[826],{"type":44,"value":827}," Language",{"type":29,"tag":63,"props":829,"children":830},{"style":70},[831],{"type":44,"value":832}," |",{"type":29,"tag":63,"props":834,"children":835},{"style":394},[836],{"type":44,"value":837}," undefined",{"type":29,"tag":63,"props":839,"children":840},{"style":76},[841],{"type":44,"value":842},") ",{"type":29,"tag":63,"props":844,"children":845},{"style":70},[846],{"type":44,"value":847},"||",{"type":29,"tag":63,"props":849,"children":850},{"style":87},[851],{"type":44,"value":852}," \"javascript\"",{"type":29,"tag":63,"props":854,"children":855},{"style":76},[856],{"type":44,"value":857},",\n",{"type":29,"tag":63,"props":859,"children":860},{"class":65,"line":178},[861],{"type":29,"tag":63,"props":862,"children":863},{"style":76},[864],{"type":44,"value":865},"  });\n",{"type":29,"tag":63,"props":867,"children":868},{"class":65,"line":213},[869],{"type":29,"tag":63,"props":870,"children":871},{"emptyLinePlaceholder":97},[872],{"type":44,"value":100},{"type":29,"tag":63,"props":874,"children":875},{"class":65,"line":251},[876,880,885,889,894,899,903,908,913,917],{"type":29,"tag":63,"props":877,"children":878},{"style":70},[879],{"type":44,"value":144},{"type":29,"tag":63,"props":881,"children":882},{"style":394},[883],{"type":44,"value":884}," clientConnection",{"type":29,"tag":63,"props":886,"children":887},{"style":70},[888],{"type":44,"value":155},{"type":29,"tag":63,"props":890,"children":891},{"style":70},[892],{"type":44,"value":893}," new",{"type":29,"tag":63,"props":895,"children":896},{"style":117},[897],{"type":44,"value":898}," Connection",{"type":29,"tag":63,"props":900,"children":901},{"style":76},[902],{"type":44,"value":238},{"type":29,"tag":63,"props":904,"children":905},{"style":394},[906],{"type":44,"value":907},"undefined",{"type":29,"tag":63,"props":909,"children":910},{"style":76},[911],{"type":44,"value":912},", ",{"type":29,"tag":63,"props":914,"children":915},{"style":394},[916],{"type":44,"value":907},{"type":29,"tag":63,"props":918,"children":919},{"style":76},[920],{"type":44,"value":429},{"type":29,"tag":63,"props":922,"children":924},{"class":65,"line":923},8,[925,930,935],{"type":29,"tag":63,"props":926,"children":927},{"style":76},[928],{"type":44,"value":929},"  clientConnection.",{"type":29,"tag":63,"props":931,"children":932},{"style":117},[933],{"type":44,"value":934},"useRawBuffers",{"type":29,"tag":63,"props":936,"children":937},{"style":76},[938],{"type":44,"value":939},"();\n",{"type":29,"tag":63,"props":941,"children":943},{"class":65,"line":942},9,[944,948,953,957,961,966,970,975,981],{"type":29,"tag":63,"props":945,"children":946},{"style":70},[947],{"type":44,"value":144},{"type":29,"tag":63,"props":949,"children":950},{"style":394},[951],{"type":44,"value":952}," dispatcherConnection",{"type":29,"tag":63,"props":954,"children":955},{"style":70},[956],{"type":44,"value":155},{"type":29,"tag":63,"props":958,"children":959},{"style":70},[960],{"type":44,"value":893},{"type":29,"tag":63,"props":962,"children":963},{"style":117},[964],{"type":44,"value":965}," DispatcherConnection",{"type":29,"tag":63,"props":967,"children":968},{"style":76},[969],{"type":44,"value":238},{"type":29,"tag":63,"props":971,"children":972},{"style":394},[973],{"type":44,"value":974},"true",{"type":29,"tag":63,"props":976,"children":978},{"style":977},"--shiki-default:#6A737D",[979],{"type":44,"value":980}," /* local */",{"type":29,"tag":63,"props":982,"children":983},{"style":76},[984],{"type":44,"value":429},{"type":29,"tag":63,"props":986,"children":988},{"class":65,"line":987},10,[989],{"type":29,"tag":63,"props":990,"children":991},{"emptyLinePlaceholder":97},[992],{"type":44,"value":100},{"type":29,"tag":63,"props":994,"children":996},{"class":65,"line":995},11,[997],{"type":29,"tag":63,"props":998,"children":999},{"style":977},[1000],{"type":44,"value":1001},"  // Dispatch synchronously at first.\n",{"type":29,"tag":63,"props":1003,"children":1005},{"class":65,"line":1004},12,[1006,1011,1016,1020,1025,1030,1034],{"type":29,"tag":63,"props":1007,"children":1008},{"style":76},[1009],{"type":44,"value":1010},"  dispatcherConnection.",{"type":29,"tag":63,"props":1012,"children":1013},{"style":117},[1014],{"type":44,"value":1015},"onmessage",{"type":29,"tag":63,"props":1017,"children":1018},{"style":70},[1019],{"type":44,"value":155},{"type":29,"tag":63,"props":1021,"children":1022},{"style":76},[1023],{"type":44,"value":1024}," (",{"type":29,"tag":63,"props":1026,"children":1027},{"style":147},[1028],{"type":44,"value":1029},"message",{"type":29,"tag":63,"props":1031,"children":1032},{"style":76},[1033],{"type":44,"value":842},{"type":29,"tag":63,"props":1035,"children":1036},{"style":70},[1037],{"type":44,"value":1038},"=>\n",{"type":29,"tag":63,"props":1040,"children":1041},{"class":65,"line":23},[1042,1047,1052],{"type":29,"tag":63,"props":1043,"children":1044},{"style":76},[1045],{"type":44,"value":1046},"    clientConnection.",{"type":29,"tag":63,"props":1048,"children":1049},{"style":117},[1050],{"type":44,"value":1051},"dispatch",{"type":29,"tag":63,"props":1053,"children":1054},{"style":76},[1055],{"type":44,"value":1056},"(message);\n",{"type":29,"tag":63,"props":1058,"children":1060},{"class":65,"line":1059},14,[1061,1065,1069,1073,1077,1081,1085],{"type":29,"tag":63,"props":1062,"children":1063},{"style":76},[1064],{"type":44,"value":929},{"type":29,"tag":63,"props":1066,"children":1067},{"style":117},[1068],{"type":44,"value":1015},{"type":29,"tag":63,"props":1070,"children":1071},{"style":70},[1072],{"type":44,"value":155},{"type":29,"tag":63,"props":1074,"children":1075},{"style":76},[1076],{"type":44,"value":1024},{"type":29,"tag":63,"props":1078,"children":1079},{"style":147},[1080],{"type":44,"value":1029},{"type":29,"tag":63,"props":1082,"children":1083},{"style":76},[1084],{"type":44,"value":842},{"type":29,"tag":63,"props":1086,"children":1087},{"style":70},[1088],{"type":44,"value":1038},{"type":29,"tag":63,"props":1090,"children":1092},{"class":65,"line":1091},15,[1093,1098,1102],{"type":29,"tag":63,"props":1094,"children":1095},{"style":76},[1096],{"type":44,"value":1097},"    dispatcherConnection.",{"type":29,"tag":63,"props":1099,"children":1100},{"style":117},[1101],{"type":44,"value":1051},{"type":29,"tag":63,"props":1103,"children":1104},{"style":76},[1105],{"type":44,"value":1056},{"type":29,"tag":63,"props":1107,"children":1109},{"class":65,"line":1108},16,[1110],{"type":29,"tag":63,"props":1111,"children":1112},{"emptyLinePlaceholder":97},[1113],{"type":44,"value":100},{"type":29,"tag":63,"props":1115,"children":1117},{"class":65,"line":1116},17,[1118,1122,1127,1131,1135,1140],{"type":29,"tag":63,"props":1119,"children":1120},{"style":70},[1121],{"type":44,"value":144},{"type":29,"tag":63,"props":1123,"children":1124},{"style":394},[1125],{"type":44,"value":1126}," rootScope",{"type":29,"tag":63,"props":1128,"children":1129},{"style":70},[1130],{"type":44,"value":155},{"type":29,"tag":63,"props":1132,"children":1133},{"style":70},[1134],{"type":44,"value":893},{"type":29,"tag":63,"props":1136,"children":1137},{"style":117},[1138],{"type":44,"value":1139}," RootDispatcher",{"type":29,"tag":63,"props":1141,"children":1142},{"style":76},[1143],{"type":44,"value":1144},"(dispatcherConnection);\n",{"type":29,"tag":63,"props":1146,"children":1148},{"class":65,"line":1147},18,[1149],{"type":29,"tag":63,"props":1150,"children":1151},{"emptyLinePlaceholder":97},[1152],{"type":44,"value":100},{"type":29,"tag":63,"props":1154,"children":1156},{"class":65,"line":1155},19,[1157],{"type":29,"tag":63,"props":1158,"children":1159},{"style":977},[1160],{"type":44,"value":1161},"  // Initialize Playwright channel.\n",{"type":29,"tag":63,"props":1163,"children":1165},{"class":65,"line":1164},20,[1166,1171,1176],{"type":29,"tag":63,"props":1167,"children":1168},{"style":70},[1169],{"type":44,"value":1170},"  new",{"type":29,"tag":63,"props":1172,"children":1173},{"style":117},[1174],{"type":44,"value":1175}," PlaywrightDispatcher",{"type":29,"tag":63,"props":1177,"children":1178},{"style":76},[1179],{"type":44,"value":1180},"(rootScope, playwright);\n",{"type":29,"tag":63,"props":1182,"children":1184},{"class":65,"line":1183},21,[1185,1189,1194,1198,1203,1208],{"type":29,"tag":63,"props":1186,"children":1187},{"style":70},[1188],{"type":44,"value":144},{"type":29,"tag":63,"props":1190,"children":1191},{"style":394},[1192],{"type":44,"value":1193}," playwrightAPI",{"type":29,"tag":63,"props":1195,"children":1196},{"style":70},[1197],{"type":44,"value":155},{"type":29,"tag":63,"props":1199,"children":1200},{"style":76},[1201],{"type":44,"value":1202}," clientConnection.",{"type":29,"tag":63,"props":1204,"children":1205},{"style":117},[1206],{"type":44,"value":1207},"getObjectWithKnownName",{"type":29,"tag":63,"props":1209,"children":1210},{"style":76},[1211],{"type":44,"value":1212},"(\n",{"type":29,"tag":63,"props":1214,"children":1216},{"class":65,"line":1215},22,[1217],{"type":29,"tag":63,"props":1218,"children":1219},{"style":87},[1220],{"type":44,"value":1221},"    \"Playwright\"\n",{"type":29,"tag":63,"props":1223,"children":1225},{"class":65,"line":1224},23,[1226,1231,1236,1240],{"type":29,"tag":63,"props":1227,"children":1228},{"style":76},[1229],{"type":44,"value":1230},"  ) ",{"type":29,"tag":63,"props":1232,"children":1233},{"style":70},[1234],{"type":44,"value":1235},"as",{"type":29,"tag":63,"props":1237,"children":1238},{"style":117},[1239],{"type":44,"value":766},{"type":29,"tag":63,"props":1241,"children":1242},{"style":76},[1243],{"type":44,"value":1244},";\n",{"type":29,"tag":63,"props":1246,"children":1248},{"class":65,"line":1247},24,[1249,1254,1259,1263,1268],{"type":29,"tag":63,"props":1250,"children":1251},{"style":76},[1252],{"type":44,"value":1253},"  playwrightAPI.chromium._serverLauncher ",{"type":29,"tag":63,"props":1255,"children":1256},{"style":70},[1257],{"type":44,"value":1258},"=",{"type":29,"tag":63,"props":1260,"children":1261},{"style":70},[1262],{"type":44,"value":893},{"type":29,"tag":63,"props":1264,"children":1265},{"style":117},[1266],{"type":44,"value":1267}," BrowserServerLauncherImpl",{"type":29,"tag":63,"props":1269,"children":1270},{"style":76},[1271],{"type":44,"value":1212},{"type":29,"tag":63,"props":1273,"children":1275},{"class":65,"line":1274},25,[1276],{"type":29,"tag":63,"props":1277,"children":1278},{"style":87},[1279],{"type":44,"value":1280},"    \"chromium\"\n",{"type":29,"tag":63,"props":1282,"children":1284},{"class":65,"line":1283},26,[1285],{"type":29,"tag":63,"props":1286,"children":1287},{"style":76},[1288],{"type":44,"value":1289},"  );\n",{"type":29,"tag":63,"props":1291,"children":1293},{"class":65,"line":1292},27,[1294,1299,1303,1307,1311],{"type":29,"tag":63,"props":1295,"children":1296},{"style":76},[1297],{"type":44,"value":1298},"  playwrightAPI.firefox._serverLauncher ",{"type":29,"tag":63,"props":1300,"children":1301},{"style":70},[1302],{"type":44,"value":1258},{"type":29,"tag":63,"props":1304,"children":1305},{"style":70},[1306],{"type":44,"value":893},{"type":29,"tag":63,"props":1308,"children":1309},{"style":117},[1310],{"type":44,"value":1267},{"type":29,"tag":63,"props":1312,"children":1313},{"style":76},[1314],{"type":44,"value":1212},{"type":29,"tag":63,"props":1316,"children":1318},{"class":65,"line":1317},28,[1319],{"type":29,"tag":63,"props":1320,"children":1321},{"style":87},[1322],{"type":44,"value":1323},"    \"firefox\"\n",{"type":29,"tag":63,"props":1325,"children":1327},{"class":65,"line":1326},29,[1328],{"type":29,"tag":63,"props":1329,"children":1330},{"style":76},[1331],{"type":44,"value":1289},{"type":29,"tag":63,"props":1333,"children":1335},{"class":65,"line":1334},30,[1336,1341,1345,1349,1353],{"type":29,"tag":63,"props":1337,"children":1338},{"style":76},[1339],{"type":44,"value":1340},"  playwrightAPI.webkit._serverLauncher ",{"type":29,"tag":63,"props":1342,"children":1343},{"style":70},[1344],{"type":44,"value":1258},{"type":29,"tag":63,"props":1346,"children":1347},{"style":70},[1348],{"type":44,"value":893},{"type":29,"tag":63,"props":1350,"children":1351},{"style":117},[1352],{"type":44,"value":1267},{"type":29,"tag":63,"props":1354,"children":1355},{"style":76},[1356],{"type":44,"value":1212},{"type":29,"tag":63,"props":1358,"children":1360},{"class":65,"line":1359},31,[1361],{"type":29,"tag":63,"props":1362,"children":1363},{"style":87},[1364],{"type":44,"value":1365},"    \"webkit\"\n",{"type":29,"tag":63,"props":1367,"children":1369},{"class":65,"line":1368},32,[1370],{"type":29,"tag":63,"props":1371,"children":1372},{"style":76},[1373],{"type":44,"value":1289},{"type":29,"tag":63,"props":1375,"children":1377},{"class":65,"line":1376},33,[1378,1383,1387,1391,1396],{"type":29,"tag":63,"props":1379,"children":1380},{"style":76},[1381],{"type":44,"value":1382},"  playwrightAPI._android._serverLauncher ",{"type":29,"tag":63,"props":1384,"children":1385},{"style":70},[1386],{"type":44,"value":1258},{"type":29,"tag":63,"props":1388,"children":1389},{"style":70},[1390],{"type":44,"value":893},{"type":29,"tag":63,"props":1392,"children":1393},{"style":117},[1394],{"type":44,"value":1395}," AndroidServerLauncherImpl",{"type":29,"tag":63,"props":1397,"children":1398},{"style":76},[1399],{"type":44,"value":939},{"type":29,"tag":63,"props":1401,"children":1403},{"class":65,"line":1402},34,[1404],{"type":29,"tag":63,"props":1405,"children":1406},{"emptyLinePlaceholder":97},[1407],{"type":44,"value":100},{"type":29,"tag":63,"props":1409,"children":1411},{"class":65,"line":1410},35,[1412],{"type":29,"tag":63,"props":1413,"children":1414},{"style":977},[1415],{"type":44,"value":1416},"  // Switch to async dispatch after we got Playwright object.\n",{"type":29,"tag":63,"props":1418,"children":1420},{"class":65,"line":1419},36,[1421,1425,1429,1433,1437,1441,1445],{"type":29,"tag":63,"props":1422,"children":1423},{"style":76},[1424],{"type":44,"value":1010},{"type":29,"tag":63,"props":1426,"children":1427},{"style":117},[1428],{"type":44,"value":1015},{"type":29,"tag":63,"props":1430,"children":1431},{"style":70},[1432],{"type":44,"value":155},{"type":29,"tag":63,"props":1434,"children":1435},{"style":76},[1436],{"type":44,"value":1024},{"type":29,"tag":63,"props":1438,"children":1439},{"style":147},[1440],{"type":44,"value":1029},{"type":29,"tag":63,"props":1442,"children":1443},{"style":76},[1444],{"type":44,"value":842},{"type":29,"tag":63,"props":1446,"children":1447},{"style":70},[1448],{"type":44,"value":1038},{"type":29,"tag":63,"props":1450,"children":1452},{"class":65,"line":1451},37,[1453,1458,1463,1467,1471,1475],{"type":29,"tag":63,"props":1454,"children":1455},{"style":117},[1456],{"type":44,"value":1457},"    setImmediate",{"type":29,"tag":63,"props":1459,"children":1460},{"style":76},[1461],{"type":44,"value":1462},"(() ",{"type":29,"tag":63,"props":1464,"children":1465},{"style":70},[1466],{"type":44,"value":130},{"type":29,"tag":63,"props":1468,"children":1469},{"style":76},[1470],{"type":44,"value":1202},{"type":29,"tag":63,"props":1472,"children":1473},{"style":117},[1474],{"type":44,"value":1051},{"type":29,"tag":63,"props":1476,"children":1477},{"style":76},[1478],{"type":44,"value":1479},"(message));\n",{"type":29,"tag":63,"props":1481,"children":1483},{"class":65,"line":1482},38,[1484,1488,1492,1496,1500,1504,1508],{"type":29,"tag":63,"props":1485,"children":1486},{"style":76},[1487],{"type":44,"value":929},{"type":29,"tag":63,"props":1489,"children":1490},{"style":117},[1491],{"type":44,"value":1015},{"type":29,"tag":63,"props":1493,"children":1494},{"style":70},[1495],{"type":44,"value":155},{"type":29,"tag":63,"props":1497,"children":1498},{"style":76},[1499],{"type":44,"value":1024},{"type":29,"tag":63,"props":1501,"children":1502},{"style":147},[1503],{"type":44,"value":1029},{"type":29,"tag":63,"props":1505,"children":1506},{"style":76},[1507],{"type":44,"value":842},{"type":29,"tag":63,"props":1509,"children":1510},{"style":70},[1511],{"type":44,"value":1038},{"type":29,"tag":63,"props":1513,"children":1515},{"class":65,"line":1514},39,[1516,1520,1524,1528,1533,1537],{"type":29,"tag":63,"props":1517,"children":1518},{"style":117},[1519],{"type":44,"value":1457},{"type":29,"tag":63,"props":1521,"children":1522},{"style":76},[1523],{"type":44,"value":1462},{"type":29,"tag":63,"props":1525,"children":1526},{"style":70},[1527],{"type":44,"value":130},{"type":29,"tag":63,"props":1529,"children":1530},{"style":76},[1531],{"type":44,"value":1532}," dispatcherConnection.",{"type":29,"tag":63,"props":1534,"children":1535},{"style":117},[1536],{"type":44,"value":1051},{"type":29,"tag":63,"props":1538,"children":1539},{"style":76},[1540],{"type":44,"value":1479},{"type":29,"tag":63,"props":1542,"children":1544},{"class":65,"line":1543},40,[1545],{"type":29,"tag":63,"props":1546,"children":1547},{"emptyLinePlaceholder":97},[1548],{"type":44,"value":100},{"type":29,"tag":63,"props":1550,"children":1552},{"class":65,"line":1551},41,[1553,1557,1562,1566,1570,1575,1579,1584,1588],{"type":29,"tag":63,"props":1554,"children":1555},{"style":76},[1556],{"type":44,"value":929},{"type":29,"tag":63,"props":1558,"children":1559},{"style":117},[1560],{"type":44,"value":1561},"toImpl",{"type":29,"tag":63,"props":1563,"children":1564},{"style":70},[1565],{"type":44,"value":155},{"type":29,"tag":63,"props":1567,"children":1568},{"style":76},[1569],{"type":44,"value":1024},{"type":29,"tag":63,"props":1571,"children":1572},{"style":147},[1573],{"type":44,"value":1574},"x",{"type":29,"tag":63,"props":1576,"children":1577},{"style":70},[1578],{"type":44,"value":761},{"type":29,"tag":63,"props":1580,"children":1581},{"style":394},[1582],{"type":44,"value":1583}," any",{"type":29,"tag":63,"props":1585,"children":1586},{"style":76},[1587],{"type":44,"value":842},{"type":29,"tag":63,"props":1589,"children":1590},{"style":70},[1591],{"type":44,"value":1038},{"type":29,"tag":63,"props":1593,"children":1595},{"class":65,"line":1594},42,[1596],{"type":29,"tag":63,"props":1597,"children":1598},{"style":76},[1599],{"type":44,"value":1600},"    x\n",{"type":29,"tag":63,"props":1602,"children":1604},{"class":65,"line":1603},43,[1605,1610,1615,1620,1625,1630],{"type":29,"tag":63,"props":1606,"children":1607},{"style":70},[1608],{"type":44,"value":1609},"      ?",{"type":29,"tag":63,"props":1611,"children":1612},{"style":76},[1613],{"type":44,"value":1614}," dispatcherConnection._dispatchers.",{"type":29,"tag":63,"props":1616,"children":1617},{"style":117},[1618],{"type":44,"value":1619},"get",{"type":29,"tag":63,"props":1621,"children":1622},{"style":76},[1623],{"type":44,"value":1624},"(x._guid)",{"type":29,"tag":63,"props":1626,"children":1627},{"style":70},[1628],{"type":44,"value":1629},"!",{"type":29,"tag":63,"props":1631,"children":1632},{"style":76},[1633],{"type":44,"value":1634},"._object\n",{"type":29,"tag":63,"props":1636,"children":1638},{"class":65,"line":1637},44,[1639,1644,1648,1652,1656,1661],{"type":29,"tag":63,"props":1640,"children":1641},{"style":70},[1642],{"type":44,"value":1643},"      :",{"type":29,"tag":63,"props":1645,"children":1646},{"style":76},[1647],{"type":44,"value":1614},{"type":29,"tag":63,"props":1649,"children":1650},{"style":117},[1651],{"type":44,"value":1619},{"type":29,"tag":63,"props":1653,"children":1654},{"style":76},[1655],{"type":44,"value":238},{"type":29,"tag":63,"props":1657,"children":1658},{"style":87},[1659],{"type":44,"value":1660},"\"\"",{"type":29,"tag":63,"props":1662,"children":1663},{"style":76},[1664],{"type":44,"value":429},{"type":29,"tag":63,"props":1666,"children":1668},{"class":65,"line":1667},45,[1669,1674,1678,1682,1687,1691],{"type":29,"tag":63,"props":1670,"children":1671},{"style":76},[1672],{"type":44,"value":1673},"  (playwrightAPI ",{"type":29,"tag":63,"props":1675,"children":1676},{"style":70},[1677],{"type":44,"value":1235},{"type":29,"tag":63,"props":1679,"children":1680},{"style":394},[1681],{"type":44,"value":1583},{"type":29,"tag":63,"props":1683,"children":1684},{"style":76},[1685],{"type":44,"value":1686},")._toImpl ",{"type":29,"tag":63,"props":1688,"children":1689},{"style":70},[1690],{"type":44,"value":1258},{"type":29,"tag":63,"props":1692,"children":1693},{"style":76},[1694],{"type":44,"value":1695}," clientConnection.toImpl;\n",{"type":29,"tag":63,"props":1697,"children":1699},{"class":65,"line":1698},46,[1700,1705],{"type":29,"tag":63,"props":1701,"children":1702},{"style":70},[1703],{"type":44,"value":1704},"  return",{"type":29,"tag":63,"props":1706,"children":1707},{"style":76},[1708],{"type":44,"value":1709}," playwrightAPI;\n",{"type":29,"tag":63,"props":1711,"children":1713},{"class":65,"line":1712},47,[1714],{"type":29,"tag":63,"props":1715,"children":1716},{"style":76},[1717],{"type":44,"value":257},{"type":29,"tag":30,"props":1719,"children":1720},{},[1721,1723,1729,1731,1737,1739,1745,1747],{"type":44,"value":1722},"If you scan through the script and look at the return value, you'll see Playwright is returning the ",{"type":29,"tag":59,"props":1724,"children":1726},{"className":1725},[],[1727],{"type":44,"value":1728},"PlaywrightAPI",{"type":44,"value":1730}," instance ",{"type":29,"tag":59,"props":1732,"children":1734},{"className":1733},[],[1735],{"type":44,"value":1736},"playwrightAPI",{"type":44,"value":1738},", which is defined somewhere within the client library ",{"type":29,"tag":59,"props":1740,"children":1742},{"className":1741},[],[1743],{"type":44,"value":1744},"playwright-core/src/client/",{"type":44,"value":1746}," (which we find from our type hints). So when we write a script using ",{"type":29,"tag":59,"props":1748,"children":1750},{"className":1749},[],[1751],{"type":44,"value":287},{"type":29,"tag":52,"props":1753,"children":1756},{"className":54,"code":1754,"filename":1755,"language":56,"meta":7,"style":7},"import { chromium } from \"playwright-core\";\n","my-automation-script.ts",[1757],{"type":29,"tag":59,"props":1758,"children":1759},{"__ignoreMap":7},[1760],{"type":29,"tag":63,"props":1761,"children":1762},{"class":65,"line":66},[1763,1767,1771,1775,1780],{"type":29,"tag":63,"props":1764,"children":1765},{"style":70},[1766],{"type":44,"value":73},{"type":29,"tag":63,"props":1768,"children":1769},{"style":76},[1770],{"type":44,"value":79},{"type":29,"tag":63,"props":1772,"children":1773},{"style":70},[1774],{"type":44,"value":84},{"type":29,"tag":63,"props":1776,"children":1777},{"style":87},[1778],{"type":44,"value":1779}," \"playwright-core\"",{"type":29,"tag":63,"props":1781,"children":1782},{"style":76},[1783],{"type":44,"value":1244},{"type":29,"tag":30,"props":1785,"children":1786},{},[1787,1789,1794,1796,1802],{"type":44,"value":1788},"really we are making an import of the ",{"type":29,"tag":59,"props":1790,"children":1792},{"className":1791},[],[1793],{"type":44,"value":1736},{"type":44,"value":1795}," object and accessing its ",{"type":29,"tag":59,"props":1797,"children":1799},{"className":1798},[],[1800],{"type":44,"value":1801},"chromium",{"type":44,"value":1803}," property, so our script is secretly",{"type":29,"tag":52,"props":1805,"children":1807},{"className":54,"code":1806,"filename":1755,"language":56,"meta":7,"style":7},"import playwrightAPI from \"playwright-core\";\nconst { chromium } = playwrightAPI;\n",[1808],{"type":29,"tag":59,"props":1809,"children":1810},{"__ignoreMap":7},[1811,1835],{"type":29,"tag":63,"props":1812,"children":1813},{"class":65,"line":66},[1814,1818,1823,1827,1831],{"type":29,"tag":63,"props":1815,"children":1816},{"style":70},[1817],{"type":44,"value":73},{"type":29,"tag":63,"props":1819,"children":1820},{"style":76},[1821],{"type":44,"value":1822}," playwrightAPI ",{"type":29,"tag":63,"props":1824,"children":1825},{"style":70},[1826],{"type":44,"value":84},{"type":29,"tag":63,"props":1828,"children":1829},{"style":87},[1830],{"type":44,"value":1779},{"type":29,"tag":63,"props":1832,"children":1833},{"style":76},[1834],{"type":44,"value":1244},{"type":29,"tag":63,"props":1836,"children":1837},{"class":65,"line":93},[1838,1843,1848,1852,1857,1861],{"type":29,"tag":63,"props":1839,"children":1840},{"style":70},[1841],{"type":44,"value":1842},"const",{"type":29,"tag":63,"props":1844,"children":1845},{"style":76},[1846],{"type":44,"value":1847}," { ",{"type":29,"tag":63,"props":1849,"children":1850},{"style":394},[1851],{"type":44,"value":1801},{"type":29,"tag":63,"props":1853,"children":1854},{"style":76},[1855],{"type":44,"value":1856}," } ",{"type":29,"tag":63,"props":1858,"children":1859},{"style":70},[1860],{"type":44,"value":1258},{"type":29,"tag":63,"props":1862,"children":1863},{"style":76},[1864],{"type":44,"value":1709},{"type":29,"tag":30,"props":1866,"children":1867},{},[1868],{"type":44,"value":1869},"Tracing where this object is instantiated, we find the call",{"type":29,"tag":52,"props":1871,"children":1873},{"className":54,"code":1872,"filename":730,"language":56,"meta":7,"style":7},"const playwrightAPI = clientConnection.getObjectWithKnownName(\n  \"Playwright\"\n) as PlaywrightAPI;\n",[1874],{"type":29,"tag":59,"props":1875,"children":1876},{"__ignoreMap":7},[1877,1904,1912],{"type":29,"tag":63,"props":1878,"children":1879},{"class":65,"line":66},[1880,1884,1888,1892,1896,1900],{"type":29,"tag":63,"props":1881,"children":1882},{"style":70},[1883],{"type":44,"value":1842},{"type":29,"tag":63,"props":1885,"children":1886},{"style":394},[1887],{"type":44,"value":1193},{"type":29,"tag":63,"props":1889,"children":1890},{"style":70},[1891],{"type":44,"value":155},{"type":29,"tag":63,"props":1893,"children":1894},{"style":76},[1895],{"type":44,"value":1202},{"type":29,"tag":63,"props":1897,"children":1898},{"style":117},[1899],{"type":44,"value":1207},{"type":29,"tag":63,"props":1901,"children":1902},{"style":76},[1903],{"type":44,"value":1212},{"type":29,"tag":63,"props":1905,"children":1906},{"class":65,"line":93},[1907],{"type":29,"tag":63,"props":1908,"children":1909},{"style":87},[1910],{"type":44,"value":1911},"  \"Playwright\"\n",{"type":29,"tag":63,"props":1913,"children":1914},{"class":65,"line":103},[1915,1919,1923,1927],{"type":29,"tag":63,"props":1916,"children":1917},{"style":76},[1918],{"type":44,"value":842},{"type":29,"tag":63,"props":1920,"children":1921},{"style":70},[1922],{"type":44,"value":1235},{"type":29,"tag":63,"props":1924,"children":1925},{"style":117},[1926],{"type":44,"value":766},{"type":29,"tag":63,"props":1928,"children":1929},{"style":76},[1930],{"type":44,"value":1244},{"type":29,"tag":30,"props":1932,"children":1933},{},[1934,1936,1941],{"type":44,"value":1935},"which is not very descriptive. If you try looking in the ",{"type":29,"tag":59,"props":1937,"children":1939},{"className":1938},[],[1940],{"type":44,"value":679},{"type":44,"value":1942}," class definition, you won't get very far either, you'll just see",{"type":29,"tag":52,"props":1944,"children":1947},{"className":54,"code":1945,"filename":1946,"language":56,"meta":7,"style":7},"export class Connection extends EventEmitter {\n  readonly _objects = new Map\u003Cstring, ChannelOwner>();\n  // ...\n  getObjectWithKnownName(guid: string): any {\n    return this._objects.get(guid)!;\n  }\n}\n","packages/playwright-core/src/client/connection.ts",[1948],{"type":29,"tag":59,"props":1949,"children":1950},{"__ignoreMap":7},[1951,1981,2030,2038,2081,2116,2124],{"type":29,"tag":63,"props":1952,"children":1953},{"class":65,"line":66},[1954,1958,1963,1967,1972,1977],{"type":29,"tag":63,"props":1955,"children":1956},{"style":70},[1957],{"type":44,"value":742},{"type":29,"tag":63,"props":1959,"children":1960},{"style":70},[1961],{"type":44,"value":1962}," class",{"type":29,"tag":63,"props":1964,"children":1965},{"style":117},[1966],{"type":44,"value":898},{"type":29,"tag":63,"props":1968,"children":1969},{"style":70},[1970],{"type":44,"value":1971}," extends",{"type":29,"tag":63,"props":1973,"children":1974},{"style":117},[1975],{"type":44,"value":1976}," EventEmitter",{"type":29,"tag":63,"props":1978,"children":1979},{"style":76},[1980],{"type":44,"value":135},{"type":29,"tag":63,"props":1982,"children":1983},{"class":65,"line":93},[1984,1989,1994,1998,2002,2007,2012,2017,2021,2025],{"type":29,"tag":63,"props":1985,"children":1986},{"style":70},[1987],{"type":44,"value":1988},"  readonly",{"type":29,"tag":63,"props":1990,"children":1991},{"style":147},[1992],{"type":44,"value":1993}," _objects",{"type":29,"tag":63,"props":1995,"children":1996},{"style":70},[1997],{"type":44,"value":155},{"type":29,"tag":63,"props":1999,"children":2000},{"style":70},[2001],{"type":44,"value":893},{"type":29,"tag":63,"props":2003,"children":2004},{"style":117},[2005],{"type":44,"value":2006}," Map",{"type":29,"tag":63,"props":2008,"children":2009},{"style":76},[2010],{"type":44,"value":2011},"\u003C",{"type":29,"tag":63,"props":2013,"children":2014},{"style":394},[2015],{"type":44,"value":2016},"string",{"type":29,"tag":63,"props":2018,"children":2019},{"style":76},[2020],{"type":44,"value":912},{"type":29,"tag":63,"props":2022,"children":2023},{"style":117},[2024],{"type":44,"value":604},{"type":29,"tag":63,"props":2026,"children":2027},{"style":76},[2028],{"type":44,"value":2029},">();\n",{"type":29,"tag":63,"props":2031,"children":2032},{"class":65,"line":103},[2033],{"type":29,"tag":63,"props":2034,"children":2035},{"style":977},[2036],{"type":44,"value":2037},"  // ...\n",{"type":29,"tag":63,"props":2039,"children":2040},{"class":65,"line":138},[2041,2046,2050,2055,2059,2064,2069,2073,2077],{"type":29,"tag":63,"props":2042,"children":2043},{"style":117},[2044],{"type":44,"value":2045},"  getObjectWithKnownName",{"type":29,"tag":63,"props":2047,"children":2048},{"style":76},[2049],{"type":44,"value":238},{"type":29,"tag":63,"props":2051,"children":2052},{"style":147},[2053],{"type":44,"value":2054},"guid",{"type":29,"tag":63,"props":2056,"children":2057},{"style":70},[2058],{"type":44,"value":761},{"type":29,"tag":63,"props":2060,"children":2061},{"style":394},[2062],{"type":44,"value":2063}," string",{"type":29,"tag":63,"props":2065,"children":2066},{"style":76},[2067],{"type":44,"value":2068},")",{"type":29,"tag":63,"props":2070,"children":2071},{"style":70},[2072],{"type":44,"value":761},{"type":29,"tag":63,"props":2074,"children":2075},{"style":394},[2076],{"type":44,"value":1583},{"type":29,"tag":63,"props":2078,"children":2079},{"style":76},[2080],{"type":44,"value":135},{"type":29,"tag":63,"props":2082,"children":2083},{"class":65,"line":178},[2084,2089,2094,2099,2103,2108,2112],{"type":29,"tag":63,"props":2085,"children":2086},{"style":70},[2087],{"type":44,"value":2088},"    return",{"type":29,"tag":63,"props":2090,"children":2091},{"style":394},[2092],{"type":44,"value":2093}," this",{"type":29,"tag":63,"props":2095,"children":2096},{"style":76},[2097],{"type":44,"value":2098},"._objects.",{"type":29,"tag":63,"props":2100,"children":2101},{"style":117},[2102],{"type":44,"value":1619},{"type":29,"tag":63,"props":2104,"children":2105},{"style":76},[2106],{"type":44,"value":2107},"(guid)",{"type":29,"tag":63,"props":2109,"children":2110},{"style":70},[2111],{"type":44,"value":1629},{"type":29,"tag":63,"props":2113,"children":2114},{"style":76},[2115],{"type":44,"value":1244},{"type":29,"tag":63,"props":2117,"children":2118},{"class":65,"line":213},[2119],{"type":29,"tag":63,"props":2120,"children":2121},{"style":76},[2122],{"type":44,"value":2123},"  }\n",{"type":29,"tag":63,"props":2125,"children":2126},{"class":65,"line":251},[2127],{"type":29,"tag":63,"props":2128,"children":2129},{"style":76},[2130],{"type":44,"value":257},{"type":29,"tag":30,"props":2132,"children":2133},{},[2134,2136,2141,2143,2149,2151,2156,2158,2164],{"type":44,"value":2135},"which is even more opaque. From this all we know is the ",{"type":29,"tag":59,"props":2137,"children":2139},{"className":2138},[],[2140],{"type":44,"value":679},{"type":44,"value":2142}," class keeps an ",{"type":29,"tag":59,"props":2144,"children":2146},{"className":2145},[],[2147],{"type":44,"value":2148},"_objects",{"type":44,"value":2150}," map which at some point contains an instance of ",{"type":29,"tag":59,"props":2152,"children":2154},{"className":2153},[],[2155],{"type":44,"value":1728},{"type":44,"value":2157},", so tracing the calls directly is not the most helpful choice for understanding Playwright's initialization. Instead, going through the logic within ",{"type":29,"tag":59,"props":2159,"children":2161},{"className":2160},[],[2162],{"type":44,"value":2163},"inProcessFactory",{"type":44,"value":2165}," will give us a clear picture of how this library is wrapped together.",{"type":29,"tag":39,"props":2167,"children":2169},{"id":2168},"cross-communication-between-client-and-server",[2170],{"type":44,"value":2171},"Cross communication between client and server",{"type":29,"tag":30,"props":2173,"children":2174},{},[2175,2177,2182,2184,2190,2192,2197,2199,2204,2205,2210,2212,2217,2219,2224,2226,2231,2233,2239,2240,2245],{"type":44,"value":2176},"If you look through the script's imports, anything with ",{"type":29,"tag":59,"props":2178,"children":2180},{"className":2179},[],[2181],{"type":44,"value":619},{"type":44,"value":2183}," in its name, and ",{"type":29,"tag":59,"props":2185,"children":2187},{"className":2186},[],[2188],{"type":44,"value":2189},"createPlaywright",{"type":44,"value":2191},", come from the ",{"type":29,"tag":59,"props":2193,"children":2195},{"className":2194},[],[2196],{"type":44,"value":527},{"type":44,"value":2198}," directory. Similarly, the imports for ",{"type":29,"tag":59,"props":2200,"children":2202},{"className":2201},[],[2203],{"type":44,"value":679},{"type":44,"value":281},{"type":29,"tag":59,"props":2206,"children":2208},{"className":2207},[],[2209],{"type":44,"value":1728},{"type":44,"value":2211}," come from the ",{"type":29,"tag":59,"props":2213,"children":2215},{"className":2214},[],[2216],{"type":44,"value":519},{"type":44,"value":2218}," directory. Looking through the first lines of ",{"type":29,"tag":59,"props":2220,"children":2222},{"className":2221},[],[2223],{"type":44,"value":2163},{"type":44,"value":2225},", there is an instantiation of the server ",{"type":29,"tag":59,"props":2227,"children":2229},{"className":2228},[],[2230],{"type":44,"value":12},{"type":44,"value":2232}," class and instantiation of objects for the ",{"type":29,"tag":59,"props":2234,"children":2236},{"className":2235},[],[2237],{"type":44,"value":2238},"ClientConnection",{"type":44,"value":281},{"type":29,"tag":59,"props":2241,"children":2243},{"className":2242},[],[2244],{"type":44,"value":687},{"type":44,"value":2246}," classes",{"type":29,"tag":52,"props":2248,"children":2250},{"className":54,"code":2249,"filename":730,"language":56,"meta":7,"style":7},"const playwright = createPlaywright({\n  sdkLanguage:\n    (process.env.PW_LANG_NAME as Language | undefined) || \"javascript\",\n});\n\nconst clientConnection = new Connection(undefined, undefined);\nclientConnection.useRawBuffers();\nconst dispatcherConnection = new DispatcherConnection(true /* local */);\n",[2251],{"type":29,"tag":59,"props":2252,"children":2253},{"__ignoreMap":7},[2254,2277,2285,2329,2337,2344,2387,2403],{"type":29,"tag":63,"props":2255,"children":2256},{"class":65,"line":66},[2257,2261,2265,2269,2273],{"type":29,"tag":63,"props":2258,"children":2259},{"style":70},[2260],{"type":44,"value":1842},{"type":29,"tag":63,"props":2262,"children":2263},{"style":394},[2264],{"type":44,"value":782},{"type":29,"tag":63,"props":2266,"children":2267},{"style":70},[2268],{"type":44,"value":155},{"type":29,"tag":63,"props":2270,"children":2271},{"style":117},[2272],{"type":44,"value":791},{"type":29,"tag":63,"props":2274,"children":2275},{"style":76},[2276],{"type":44,"value":796},{"type":29,"tag":63,"props":2278,"children":2279},{"class":65,"line":93},[2280],{"type":29,"tag":63,"props":2281,"children":2282},{"style":76},[2283],{"type":44,"value":2284},"  sdkLanguage:\n",{"type":29,"tag":63,"props":2286,"children":2287},{"class":65,"line":103},[2288,2293,2297,2301,2305,2309,2313,2317,2321,2325],{"type":29,"tag":63,"props":2289,"children":2290},{"style":76},[2291],{"type":44,"value":2292},"    (process.env.",{"type":29,"tag":63,"props":2294,"children":2295},{"style":394},[2296],{"type":44,"value":817},{"type":29,"tag":63,"props":2298,"children":2299},{"style":70},[2300],{"type":44,"value":822},{"type":29,"tag":63,"props":2302,"children":2303},{"style":117},[2304],{"type":44,"value":827},{"type":29,"tag":63,"props":2306,"children":2307},{"style":70},[2308],{"type":44,"value":832},{"type":29,"tag":63,"props":2310,"children":2311},{"style":394},[2312],{"type":44,"value":837},{"type":29,"tag":63,"props":2314,"children":2315},{"style":76},[2316],{"type":44,"value":842},{"type":29,"tag":63,"props":2318,"children":2319},{"style":70},[2320],{"type":44,"value":847},{"type":29,"tag":63,"props":2322,"children":2323},{"style":87},[2324],{"type":44,"value":852},{"type":29,"tag":63,"props":2326,"children":2327},{"style":76},[2328],{"type":44,"value":857},{"type":29,"tag":63,"props":2330,"children":2331},{"class":65,"line":138},[2332],{"type":29,"tag":63,"props":2333,"children":2334},{"style":76},[2335],{"type":44,"value":2336},"});\n",{"type":29,"tag":63,"props":2338,"children":2339},{"class":65,"line":178},[2340],{"type":29,"tag":63,"props":2341,"children":2342},{"emptyLinePlaceholder":97},[2343],{"type":44,"value":100},{"type":29,"tag":63,"props":2345,"children":2346},{"class":65,"line":213},[2347,2351,2355,2359,2363,2367,2371,2375,2379,2383],{"type":29,"tag":63,"props":2348,"children":2349},{"style":70},[2350],{"type":44,"value":1842},{"type":29,"tag":63,"props":2352,"children":2353},{"style":394},[2354],{"type":44,"value":884},{"type":29,"tag":63,"props":2356,"children":2357},{"style":70},[2358],{"type":44,"value":155},{"type":29,"tag":63,"props":2360,"children":2361},{"style":70},[2362],{"type":44,"value":893},{"type":29,"tag":63,"props":2364,"children":2365},{"style":117},[2366],{"type":44,"value":898},{"type":29,"tag":63,"props":2368,"children":2369},{"style":76},[2370],{"type":44,"value":238},{"type":29,"tag":63,"props":2372,"children":2373},{"style":394},[2374],{"type":44,"value":907},{"type":29,"tag":63,"props":2376,"children":2377},{"style":76},[2378],{"type":44,"value":912},{"type":29,"tag":63,"props":2380,"children":2381},{"style":394},[2382],{"type":44,"value":907},{"type":29,"tag":63,"props":2384,"children":2385},{"style":76},[2386],{"type":44,"value":429},{"type":29,"tag":63,"props":2388,"children":2389},{"class":65,"line":251},[2390,2395,2399],{"type":29,"tag":63,"props":2391,"children":2392},{"style":76},[2393],{"type":44,"value":2394},"clientConnection.",{"type":29,"tag":63,"props":2396,"children":2397},{"style":117},[2398],{"type":44,"value":934},{"type":29,"tag":63,"props":2400,"children":2401},{"style":76},[2402],{"type":44,"value":939},{"type":29,"tag":63,"props":2404,"children":2405},{"class":65,"line":923},[2406,2410,2414,2418,2422,2426,2430,2434,2438],{"type":29,"tag":63,"props":2407,"children":2408},{"style":70},[2409],{"type":44,"value":1842},{"type":29,"tag":63,"props":2411,"children":2412},{"style":394},[2413],{"type":44,"value":952},{"type":29,"tag":63,"props":2415,"children":2416},{"style":70},[2417],{"type":44,"value":155},{"type":29,"tag":63,"props":2419,"children":2420},{"style":70},[2421],{"type":44,"value":893},{"type":29,"tag":63,"props":2423,"children":2424},{"style":117},[2425],{"type":44,"value":965},{"type":29,"tag":63,"props":2427,"children":2428},{"style":76},[2429],{"type":44,"value":238},{"type":29,"tag":63,"props":2431,"children":2432},{"style":394},[2433],{"type":44,"value":974},{"type":29,"tag":63,"props":2435,"children":2436},{"style":977},[2437],{"type":44,"value":980},{"type":29,"tag":63,"props":2439,"children":2440},{"style":76},[2441],{"type":44,"value":429},{"type":29,"tag":30,"props":2443,"children":2444},{},[2445],{"type":44,"value":2446},"The next lines of code are the bridge between the internal client and server libraries",{"type":29,"tag":52,"props":2448,"children":2450},{"className":54,"code":2449,"filename":730,"language":56,"meta":7,"style":7},"dispatcherConnection.onmessage = (message) =>\n  clientConnection.dispatch(message);\nclientConnection.onmessage = (message) =>\n  dispatcherConnection.dispatch(message);\n",[2451],{"type":29,"tag":59,"props":2452,"children":2453},{"__ignoreMap":7},[2454,2486,2501,2532],{"type":29,"tag":63,"props":2455,"children":2456},{"class":65,"line":66},[2457,2462,2466,2470,2474,2478,2482],{"type":29,"tag":63,"props":2458,"children":2459},{"style":76},[2460],{"type":44,"value":2461},"dispatcherConnection.",{"type":29,"tag":63,"props":2463,"children":2464},{"style":117},[2465],{"type":44,"value":1015},{"type":29,"tag":63,"props":2467,"children":2468},{"style":70},[2469],{"type":44,"value":155},{"type":29,"tag":63,"props":2471,"children":2472},{"style":76},[2473],{"type":44,"value":1024},{"type":29,"tag":63,"props":2475,"children":2476},{"style":147},[2477],{"type":44,"value":1029},{"type":29,"tag":63,"props":2479,"children":2480},{"style":76},[2481],{"type":44,"value":842},{"type":29,"tag":63,"props":2483,"children":2484},{"style":70},[2485],{"type":44,"value":1038},{"type":29,"tag":63,"props":2487,"children":2488},{"class":65,"line":93},[2489,2493,2497],{"type":29,"tag":63,"props":2490,"children":2491},{"style":76},[2492],{"type":44,"value":929},{"type":29,"tag":63,"props":2494,"children":2495},{"style":117},[2496],{"type":44,"value":1051},{"type":29,"tag":63,"props":2498,"children":2499},{"style":76},[2500],{"type":44,"value":1056},{"type":29,"tag":63,"props":2502,"children":2503},{"class":65,"line":103},[2504,2508,2512,2516,2520,2524,2528],{"type":29,"tag":63,"props":2505,"children":2506},{"style":76},[2507],{"type":44,"value":2394},{"type":29,"tag":63,"props":2509,"children":2510},{"style":117},[2511],{"type":44,"value":1015},{"type":29,"tag":63,"props":2513,"children":2514},{"style":70},[2515],{"type":44,"value":155},{"type":29,"tag":63,"props":2517,"children":2518},{"style":76},[2519],{"type":44,"value":1024},{"type":29,"tag":63,"props":2521,"children":2522},{"style":147},[2523],{"type":44,"value":1029},{"type":29,"tag":63,"props":2525,"children":2526},{"style":76},[2527],{"type":44,"value":842},{"type":29,"tag":63,"props":2529,"children":2530},{"style":70},[2531],{"type":44,"value":1038},{"type":29,"tag":63,"props":2533,"children":2534},{"class":65,"line":138},[2535,2539,2543],{"type":29,"tag":63,"props":2536,"children":2537},{"style":76},[2538],{"type":44,"value":1010},{"type":29,"tag":63,"props":2540,"children":2541},{"style":117},[2542],{"type":44,"value":1051},{"type":29,"tag":63,"props":2544,"children":2545},{"style":76},[2546],{"type":44,"value":1056},{"type":29,"tag":30,"props":2548,"children":2549},{},[2550,2552,2557,2559,2564,2566,2571,2573,2579,2581,2587,2589,2594,2596,2602],{"type":44,"value":2551},"given by setting the ",{"type":29,"tag":59,"props":2553,"children":2555},{"className":2554},[],[2556],{"type":44,"value":1015},{"type":44,"value":2558}," properties for each of these objects. Notice each ",{"type":29,"tag":59,"props":2560,"children":2562},{"className":2561},[],[2563],{"type":44,"value":1015},{"type":44,"value":2565}," calls the other's ",{"type":29,"tag":59,"props":2567,"children":2569},{"className":2568},[],[2570],{"type":44,"value":1051},{"type":44,"value":2572}," method; i.e., ",{"type":29,"tag":59,"props":2574,"children":2576},{"className":2575},[],[2577],{"type":44,"value":2578},"dispatcherConnection",{"type":44,"value":2580}," calls the ",{"type":29,"tag":59,"props":2582,"children":2584},{"className":2583},[],[2585],{"type":44,"value":2586},"clientConnection.dispatch",{"type":44,"value":2588}," through ",{"type":29,"tag":59,"props":2590,"children":2592},{"className":2591},[],[2593],{"type":44,"value":1015},{"type":44,"value":2595}," and vice versa. This gives us the hint somehow ",{"type":29,"tag":59,"props":2597,"children":2599},{"className":2598},[],[2600],{"type":44,"value":2601},"dispatcherConnection.onmessage",{"type":44,"value":2603}," will be called somewhere in the codebase.",{"type":29,"tag":269,"props":2605,"children":2607},{"id":2606},"rootdispatcher-and-server-side-playwright",[2608],{"type":44,"value":2609},"RootDispatcher and server-side Playwright",{"type":29,"tag":30,"props":2611,"children":2612},{},[2613,2615,2620,2622,2628,2630,2636],{"type":44,"value":2614},"Continuing down ",{"type":29,"tag":59,"props":2616,"children":2618},{"className":2617},[],[2619],{"type":44,"value":504},{"type":44,"value":2621},", we see there's the construction of a ",{"type":29,"tag":59,"props":2623,"children":2625},{"className":2624},[],[2626],{"type":44,"value":2627},"RootDispatcher",{"type":44,"value":2629}," instance, and a ",{"type":29,"tag":59,"props":2631,"children":2633},{"className":2632},[],[2634],{"type":44,"value":2635},"PlaywrightDispatcher",{"type":44,"value":2637}," instance.",{"type":29,"tag":52,"props":2639,"children":2641},{"className":54,"code":2640,"filename":730,"language":56,"meta":7,"style":7},"const rootScope = new RootDispatcher(dispatcherConnection);\n\n// Initialize Playwright channel.\nnew PlaywrightDispatcher(rootScope, playwright);\n",[2642],{"type":29,"tag":59,"props":2643,"children":2644},{"__ignoreMap":7},[2645,2672,2679,2687],{"type":29,"tag":63,"props":2646,"children":2647},{"class":65,"line":66},[2648,2652,2656,2660,2664,2668],{"type":29,"tag":63,"props":2649,"children":2650},{"style":70},[2651],{"type":44,"value":1842},{"type":29,"tag":63,"props":2653,"children":2654},{"style":394},[2655],{"type":44,"value":1126},{"type":29,"tag":63,"props":2657,"children":2658},{"style":70},[2659],{"type":44,"value":155},{"type":29,"tag":63,"props":2661,"children":2662},{"style":70},[2663],{"type":44,"value":893},{"type":29,"tag":63,"props":2665,"children":2666},{"style":117},[2667],{"type":44,"value":1139},{"type":29,"tag":63,"props":2669,"children":2670},{"style":76},[2671],{"type":44,"value":1144},{"type":29,"tag":63,"props":2673,"children":2674},{"class":65,"line":93},[2675],{"type":29,"tag":63,"props":2676,"children":2677},{"emptyLinePlaceholder":97},[2678],{"type":44,"value":100},{"type":29,"tag":63,"props":2680,"children":2681},{"class":65,"line":103},[2682],{"type":29,"tag":63,"props":2683,"children":2684},{"style":977},[2685],{"type":44,"value":2686},"// Initialize Playwright channel.\n",{"type":29,"tag":63,"props":2688,"children":2689},{"class":65,"line":138},[2690,2695,2699],{"type":29,"tag":63,"props":2691,"children":2692},{"style":70},[2693],{"type":44,"value":2694},"new",{"type":29,"tag":63,"props":2696,"children":2697},{"style":117},[2698],{"type":44,"value":1175},{"type":29,"tag":63,"props":2700,"children":2701},{"style":76},[2702],{"type":44,"value":1180},{"type":29,"tag":30,"props":2704,"children":2705},{},[2706,2708,2714,2716,2721,2723,2728,2730,2735,2737,2742,2744,2749,2751,2756,2758,2763],{"type":44,"value":2707},"Note the ",{"type":29,"tag":59,"props":2709,"children":2711},{"className":2710},[],[2712],{"type":44,"value":2713},"rootScope",{"type":44,"value":2715}," object is referenced throughout the dispatcher classes, and acts as a wrapper around the ",{"type":29,"tag":59,"props":2717,"children":2719},{"className":2718},[],[2720],{"type":44,"value":2578},{"type":44,"value":2722}," object instantiated above, so that each of the child ",{"type":29,"tag":59,"props":2724,"children":2726},{"className":2725},[],[2727],{"type":44,"value":619},{"type":44,"value":2729}," classes will have access to the ",{"type":29,"tag":59,"props":2731,"children":2733},{"className":2732},[],[2734],{"type":44,"value":2578},{"type":44,"value":2736}," through the ",{"type":29,"tag":59,"props":2738,"children":2740},{"className":2739},[],[2741],{"type":44,"value":2713},{"type":44,"value":2743}," object. This wrapping functionality will become clearer when we dive into ",{"type":29,"tag":59,"props":2745,"children":2747},{"className":2746},[],[2748],{"type":44,"value":2635},{"type":44,"value":2750},"'s constructor, where it passes the ",{"type":29,"tag":59,"props":2752,"children":2754},{"className":2753},[],[2755],{"type":44,"value":2713},{"type":44,"value":2757}," to all of the child ",{"type":29,"tag":59,"props":2759,"children":2761},{"className":2760},[],[2762],{"type":44,"value":619},{"type":44,"value":2764}," classes.",{"type":29,"tag":30,"props":2766,"children":2767},{},[2768,2770,2776],{"type":44,"value":2769},"Here's a simplified version of what's happening in the constructor for ",{"type":29,"tag":59,"props":2771,"children":2773},{"className":2772},[],[2774],{"type":44,"value":2775},"Rootscope",{"type":44,"value":761},{"type":29,"tag":52,"props":2778,"children":2781},{"className":54,"code":2779,"filename":2780,"language":56,"meta":7,"style":7},"class RootDispatcher extends Dispatcher {\n  constructor(connection: DispatcherConnection) {\n    super(connection, { guid: \"\" }, \"Root\", {});\n  }\n}\n\nclass Dispatcher extends EventEmitter {\n  _connection: DispatcherConnection;\n  _parent: DispatcherConnection | undefined;\n\n  constructor(\n    parent: ParentScopeType | DispatcherConnection,\n    object: Type,\n    type: string,\n    initializer: channels.InitializerTraits\u003CType>\n  ) {\n    super();\n\n    this._connection =\n      parent instanceof DispatcherConnection ? parent : parent._connection;\n    this._parent = parent instanceof DispatcherConnection ? undefined : parent;\n\n    this._guid = object.guid;\n    this._type = type;\n    this._object = object;\n\n    this._connection.registerDispatcher(this);\n\n    if (this._parent)\n      this._connection.sendCreate(\n        this._parent,\n        type,\n        guid,\n        initializer,\n        this._parent._object\n      );\n  }\n}\n","playwright-core/src/server/dispatchers/dispatcher.ts",[2782],{"type":29,"tag":59,"props":2783,"children":2784},{"__ignoreMap":7},[2785,2810,2840,2872,2879,2886,2893,2916,2936,2964,2971,2982,3011,3032,3052,3092,3100,3111,3118,3136,3172,3218,3225,3246,3267,3288,3295,3325,3332,3353,3374,3387,3395,3403,3411,3423,3431,3438],{"type":29,"tag":63,"props":2786,"children":2787},{"class":65,"line":66},[2788,2793,2797,2801,2806],{"type":29,"tag":63,"props":2789,"children":2790},{"style":70},[2791],{"type":44,"value":2792},"class",{"type":29,"tag":63,"props":2794,"children":2795},{"style":117},[2796],{"type":44,"value":1139},{"type":29,"tag":63,"props":2798,"children":2799},{"style":70},[2800],{"type":44,"value":1971},{"type":29,"tag":63,"props":2802,"children":2803},{"style":117},[2804],{"type":44,"value":2805}," Dispatcher",{"type":29,"tag":63,"props":2807,"children":2808},{"style":76},[2809],{"type":44,"value":135},{"type":29,"tag":63,"props":2811,"children":2812},{"class":65,"line":93},[2813,2818,2822,2827,2831,2835],{"type":29,"tag":63,"props":2814,"children":2815},{"style":70},[2816],{"type":44,"value":2817},"  constructor",{"type":29,"tag":63,"props":2819,"children":2820},{"style":76},[2821],{"type":44,"value":238},{"type":29,"tag":63,"props":2823,"children":2824},{"style":147},[2825],{"type":44,"value":2826},"connection",{"type":29,"tag":63,"props":2828,"children":2829},{"style":70},[2830],{"type":44,"value":761},{"type":29,"tag":63,"props":2832,"children":2833},{"style":117},[2834],{"type":44,"value":965},{"type":29,"tag":63,"props":2836,"children":2837},{"style":76},[2838],{"type":44,"value":2839},") {\n",{"type":29,"tag":63,"props":2841,"children":2842},{"class":65,"line":103},[2843,2848,2853,2857,2862,2867],{"type":29,"tag":63,"props":2844,"children":2845},{"style":394},[2846],{"type":44,"value":2847},"    super",{"type":29,"tag":63,"props":2849,"children":2850},{"style":76},[2851],{"type":44,"value":2852},"(connection, { guid: ",{"type":29,"tag":63,"props":2854,"children":2855},{"style":87},[2856],{"type":44,"value":1660},{"type":29,"tag":63,"props":2858,"children":2859},{"style":76},[2860],{"type":44,"value":2861}," }, ",{"type":29,"tag":63,"props":2863,"children":2864},{"style":87},[2865],{"type":44,"value":2866},"\"Root\"",{"type":29,"tag":63,"props":2868,"children":2869},{"style":76},[2870],{"type":44,"value":2871},", {});\n",{"type":29,"tag":63,"props":2873,"children":2874},{"class":65,"line":138},[2875],{"type":29,"tag":63,"props":2876,"children":2877},{"style":76},[2878],{"type":44,"value":2123},{"type":29,"tag":63,"props":2880,"children":2881},{"class":65,"line":178},[2882],{"type":29,"tag":63,"props":2883,"children":2884},{"style":76},[2885],{"type":44,"value":257},{"type":29,"tag":63,"props":2887,"children":2888},{"class":65,"line":213},[2889],{"type":29,"tag":63,"props":2890,"children":2891},{"emptyLinePlaceholder":97},[2892],{"type":44,"value":100},{"type":29,"tag":63,"props":2894,"children":2895},{"class":65,"line":251},[2896,2900,2904,2908,2912],{"type":29,"tag":63,"props":2897,"children":2898},{"style":70},[2899],{"type":44,"value":2792},{"type":29,"tag":63,"props":2901,"children":2902},{"style":117},[2903],{"type":44,"value":2805},{"type":29,"tag":63,"props":2905,"children":2906},{"style":70},[2907],{"type":44,"value":1971},{"type":29,"tag":63,"props":2909,"children":2910},{"style":117},[2911],{"type":44,"value":1976},{"type":29,"tag":63,"props":2913,"children":2914},{"style":76},[2915],{"type":44,"value":135},{"type":29,"tag":63,"props":2917,"children":2918},{"class":65,"line":923},[2919,2924,2928,2932],{"type":29,"tag":63,"props":2920,"children":2921},{"style":147},[2922],{"type":44,"value":2923},"  _connection",{"type":29,"tag":63,"props":2925,"children":2926},{"style":70},[2927],{"type":44,"value":761},{"type":29,"tag":63,"props":2929,"children":2930},{"style":117},[2931],{"type":44,"value":965},{"type":29,"tag":63,"props":2933,"children":2934},{"style":76},[2935],{"type":44,"value":1244},{"type":29,"tag":63,"props":2937,"children":2938},{"class":65,"line":942},[2939,2944,2948,2952,2956,2960],{"type":29,"tag":63,"props":2940,"children":2941},{"style":147},[2942],{"type":44,"value":2943},"  _parent",{"type":29,"tag":63,"props":2945,"children":2946},{"style":70},[2947],{"type":44,"value":761},{"type":29,"tag":63,"props":2949,"children":2950},{"style":117},[2951],{"type":44,"value":965},{"type":29,"tag":63,"props":2953,"children":2954},{"style":70},[2955],{"type":44,"value":832},{"type":29,"tag":63,"props":2957,"children":2958},{"style":394},[2959],{"type":44,"value":837},{"type":29,"tag":63,"props":2961,"children":2962},{"style":76},[2963],{"type":44,"value":1244},{"type":29,"tag":63,"props":2965,"children":2966},{"class":65,"line":987},[2967],{"type":29,"tag":63,"props":2968,"children":2969},{"emptyLinePlaceholder":97},[2970],{"type":44,"value":100},{"type":29,"tag":63,"props":2972,"children":2973},{"class":65,"line":995},[2974,2978],{"type":29,"tag":63,"props":2975,"children":2976},{"style":70},[2977],{"type":44,"value":2817},{"type":29,"tag":63,"props":2979,"children":2980},{"style":76},[2981],{"type":44,"value":1212},{"type":29,"tag":63,"props":2983,"children":2984},{"class":65,"line":1004},[2985,2990,2994,2999,3003,3007],{"type":29,"tag":63,"props":2986,"children":2987},{"style":147},[2988],{"type":44,"value":2989},"    parent",{"type":29,"tag":63,"props":2991,"children":2992},{"style":70},[2993],{"type":44,"value":761},{"type":29,"tag":63,"props":2995,"children":2996},{"style":117},[2997],{"type":44,"value":2998}," ParentScopeType",{"type":29,"tag":63,"props":3000,"children":3001},{"style":70},[3002],{"type":44,"value":832},{"type":29,"tag":63,"props":3004,"children":3005},{"style":117},[3006],{"type":44,"value":965},{"type":29,"tag":63,"props":3008,"children":3009},{"style":76},[3010],{"type":44,"value":857},{"type":29,"tag":63,"props":3012,"children":3013},{"class":65,"line":23},[3014,3019,3023,3028],{"type":29,"tag":63,"props":3015,"children":3016},{"style":147},[3017],{"type":44,"value":3018},"    object",{"type":29,"tag":63,"props":3020,"children":3021},{"style":70},[3022],{"type":44,"value":761},{"type":29,"tag":63,"props":3024,"children":3025},{"style":117},[3026],{"type":44,"value":3027}," Type",{"type":29,"tag":63,"props":3029,"children":3030},{"style":76},[3031],{"type":44,"value":857},{"type":29,"tag":63,"props":3033,"children":3034},{"class":65,"line":1059},[3035,3040,3044,3048],{"type":29,"tag":63,"props":3036,"children":3037},{"style":147},[3038],{"type":44,"value":3039},"    type",{"type":29,"tag":63,"props":3041,"children":3042},{"style":70},[3043],{"type":44,"value":761},{"type":29,"tag":63,"props":3045,"children":3046},{"style":394},[3047],{"type":44,"value":2063},{"type":29,"tag":63,"props":3049,"children":3050},{"style":76},[3051],{"type":44,"value":857},{"type":29,"tag":63,"props":3053,"children":3054},{"class":65,"line":1091},[3055,3060,3064,3069,3073,3078,3082,3087],{"type":29,"tag":63,"props":3056,"children":3057},{"style":147},[3058],{"type":44,"value":3059},"    initializer",{"type":29,"tag":63,"props":3061,"children":3062},{"style":70},[3063],{"type":44,"value":761},{"type":29,"tag":63,"props":3065,"children":3066},{"style":117},[3067],{"type":44,"value":3068}," channels",{"type":29,"tag":63,"props":3070,"children":3071},{"style":76},[3072],{"type":44,"value":228},{"type":29,"tag":63,"props":3074,"children":3075},{"style":117},[3076],{"type":44,"value":3077},"InitializerTraits",{"type":29,"tag":63,"props":3079,"children":3080},{"style":76},[3081],{"type":44,"value":2011},{"type":29,"tag":63,"props":3083,"children":3084},{"style":117},[3085],{"type":44,"value":3086},"Type",{"type":29,"tag":63,"props":3088,"children":3089},{"style":76},[3090],{"type":44,"value":3091},">\n",{"type":29,"tag":63,"props":3093,"children":3094},{"class":65,"line":1108},[3095],{"type":29,"tag":63,"props":3096,"children":3097},{"style":76},[3098],{"type":44,"value":3099},"  ) {\n",{"type":29,"tag":63,"props":3101,"children":3102},{"class":65,"line":1116},[3103,3107],{"type":29,"tag":63,"props":3104,"children":3105},{"style":394},[3106],{"type":44,"value":2847},{"type":29,"tag":63,"props":3108,"children":3109},{"style":76},[3110],{"type":44,"value":939},{"type":29,"tag":63,"props":3112,"children":3113},{"class":65,"line":1147},[3114],{"type":29,"tag":63,"props":3115,"children":3116},{"emptyLinePlaceholder":97},[3117],{"type":44,"value":100},{"type":29,"tag":63,"props":3119,"children":3120},{"class":65,"line":1155},[3121,3126,3131],{"type":29,"tag":63,"props":3122,"children":3123},{"style":394},[3124],{"type":44,"value":3125},"    this",{"type":29,"tag":63,"props":3127,"children":3128},{"style":76},[3129],{"type":44,"value":3130},"._connection ",{"type":29,"tag":63,"props":3132,"children":3133},{"style":70},[3134],{"type":44,"value":3135},"=\n",{"type":29,"tag":63,"props":3137,"children":3138},{"class":65,"line":1164},[3139,3144,3149,3153,3158,3163,3167],{"type":29,"tag":63,"props":3140,"children":3141},{"style":76},[3142],{"type":44,"value":3143},"      parent ",{"type":29,"tag":63,"props":3145,"children":3146},{"style":70},[3147],{"type":44,"value":3148},"instanceof",{"type":29,"tag":63,"props":3150,"children":3151},{"style":117},[3152],{"type":44,"value":965},{"type":29,"tag":63,"props":3154,"children":3155},{"style":70},[3156],{"type":44,"value":3157}," ?",{"type":29,"tag":63,"props":3159,"children":3160},{"style":76},[3161],{"type":44,"value":3162}," parent ",{"type":29,"tag":63,"props":3164,"children":3165},{"style":70},[3166],{"type":44,"value":761},{"type":29,"tag":63,"props":3168,"children":3169},{"style":76},[3170],{"type":44,"value":3171}," parent._connection;\n",{"type":29,"tag":63,"props":3173,"children":3174},{"class":65,"line":1183},[3175,3179,3184,3188,3192,3196,3200,3204,3208,3213],{"type":29,"tag":63,"props":3176,"children":3177},{"style":394},[3178],{"type":44,"value":3125},{"type":29,"tag":63,"props":3180,"children":3181},{"style":76},[3182],{"type":44,"value":3183},"._parent ",{"type":29,"tag":63,"props":3185,"children":3186},{"style":70},[3187],{"type":44,"value":1258},{"type":29,"tag":63,"props":3189,"children":3190},{"style":76},[3191],{"type":44,"value":3162},{"type":29,"tag":63,"props":3193,"children":3194},{"style":70},[3195],{"type":44,"value":3148},{"type":29,"tag":63,"props":3197,"children":3198},{"style":117},[3199],{"type":44,"value":965},{"type":29,"tag":63,"props":3201,"children":3202},{"style":70},[3203],{"type":44,"value":3157},{"type":29,"tag":63,"props":3205,"children":3206},{"style":394},[3207],{"type":44,"value":837},{"type":29,"tag":63,"props":3209,"children":3210},{"style":70},[3211],{"type":44,"value":3212}," :",{"type":29,"tag":63,"props":3214,"children":3215},{"style":76},[3216],{"type":44,"value":3217}," parent;\n",{"type":29,"tag":63,"props":3219,"children":3220},{"class":65,"line":1215},[3221],{"type":29,"tag":63,"props":3222,"children":3223},{"emptyLinePlaceholder":97},[3224],{"type":44,"value":100},{"type":29,"tag":63,"props":3226,"children":3227},{"class":65,"line":1224},[3228,3232,3237,3241],{"type":29,"tag":63,"props":3229,"children":3230},{"style":394},[3231],{"type":44,"value":3125},{"type":29,"tag":63,"props":3233,"children":3234},{"style":76},[3235],{"type":44,"value":3236},"._guid ",{"type":29,"tag":63,"props":3238,"children":3239},{"style":70},[3240],{"type":44,"value":1258},{"type":29,"tag":63,"props":3242,"children":3243},{"style":76},[3244],{"type":44,"value":3245}," object.guid;\n",{"type":29,"tag":63,"props":3247,"children":3248},{"class":65,"line":1247},[3249,3253,3258,3262],{"type":29,"tag":63,"props":3250,"children":3251},{"style":394},[3252],{"type":44,"value":3125},{"type":29,"tag":63,"props":3254,"children":3255},{"style":76},[3256],{"type":44,"value":3257},"._type ",{"type":29,"tag":63,"props":3259,"children":3260},{"style":70},[3261],{"type":44,"value":1258},{"type":29,"tag":63,"props":3263,"children":3264},{"style":76},[3265],{"type":44,"value":3266}," type;\n",{"type":29,"tag":63,"props":3268,"children":3269},{"class":65,"line":1274},[3270,3274,3279,3283],{"type":29,"tag":63,"props":3271,"children":3272},{"style":394},[3273],{"type":44,"value":3125},{"type":29,"tag":63,"props":3275,"children":3276},{"style":76},[3277],{"type":44,"value":3278},"._object ",{"type":29,"tag":63,"props":3280,"children":3281},{"style":70},[3282],{"type":44,"value":1258},{"type":29,"tag":63,"props":3284,"children":3285},{"style":76},[3286],{"type":44,"value":3287}," object;\n",{"type":29,"tag":63,"props":3289,"children":3290},{"class":65,"line":1283},[3291],{"type":29,"tag":63,"props":3292,"children":3293},{"emptyLinePlaceholder":97},[3294],{"type":44,"value":100},{"type":29,"tag":63,"props":3296,"children":3297},{"class":65,"line":1292},[3298,3302,3307,3312,3316,3321],{"type":29,"tag":63,"props":3299,"children":3300},{"style":394},[3301],{"type":44,"value":3125},{"type":29,"tag":63,"props":3303,"children":3304},{"style":76},[3305],{"type":44,"value":3306},"._connection.",{"type":29,"tag":63,"props":3308,"children":3309},{"style":117},[3310],{"type":44,"value":3311},"registerDispatcher",{"type":29,"tag":63,"props":3313,"children":3314},{"style":76},[3315],{"type":44,"value":238},{"type":29,"tag":63,"props":3317,"children":3318},{"style":394},[3319],{"type":44,"value":3320},"this",{"type":29,"tag":63,"props":3322,"children":3323},{"style":76},[3324],{"type":44,"value":429},{"type":29,"tag":63,"props":3326,"children":3327},{"class":65,"line":1317},[3328],{"type":29,"tag":63,"props":3329,"children":3330},{"emptyLinePlaceholder":97},[3331],{"type":44,"value":100},{"type":29,"tag":63,"props":3333,"children":3334},{"class":65,"line":1326},[3335,3340,3344,3348],{"type":29,"tag":63,"props":3336,"children":3337},{"style":70},[3338],{"type":44,"value":3339},"    if",{"type":29,"tag":63,"props":3341,"children":3342},{"style":76},[3343],{"type":44,"value":1024},{"type":29,"tag":63,"props":3345,"children":3346},{"style":394},[3347],{"type":44,"value":3320},{"type":29,"tag":63,"props":3349,"children":3350},{"style":76},[3351],{"type":44,"value":3352},"._parent)\n",{"type":29,"tag":63,"props":3354,"children":3355},{"class":65,"line":1334},[3356,3361,3365,3370],{"type":29,"tag":63,"props":3357,"children":3358},{"style":394},[3359],{"type":44,"value":3360},"      this",{"type":29,"tag":63,"props":3362,"children":3363},{"style":76},[3364],{"type":44,"value":3306},{"type":29,"tag":63,"props":3366,"children":3367},{"style":117},[3368],{"type":44,"value":3369},"sendCreate",{"type":29,"tag":63,"props":3371,"children":3372},{"style":76},[3373],{"type":44,"value":1212},{"type":29,"tag":63,"props":3375,"children":3376},{"class":65,"line":1359},[3377,3382],{"type":29,"tag":63,"props":3378,"children":3379},{"style":394},[3380],{"type":44,"value":3381},"        this",{"type":29,"tag":63,"props":3383,"children":3384},{"style":76},[3385],{"type":44,"value":3386},"._parent,\n",{"type":29,"tag":63,"props":3388,"children":3389},{"class":65,"line":1368},[3390],{"type":29,"tag":63,"props":3391,"children":3392},{"style":76},[3393],{"type":44,"value":3394},"        type,\n",{"type":29,"tag":63,"props":3396,"children":3397},{"class":65,"line":1376},[3398],{"type":29,"tag":63,"props":3399,"children":3400},{"style":76},[3401],{"type":44,"value":3402},"        guid,\n",{"type":29,"tag":63,"props":3404,"children":3405},{"class":65,"line":1402},[3406],{"type":29,"tag":63,"props":3407,"children":3408},{"style":76},[3409],{"type":44,"value":3410},"        initializer,\n",{"type":29,"tag":63,"props":3412,"children":3413},{"class":65,"line":1410},[3414,3418],{"type":29,"tag":63,"props":3415,"children":3416},{"style":394},[3417],{"type":44,"value":3381},{"type":29,"tag":63,"props":3419,"children":3420},{"style":76},[3421],{"type":44,"value":3422},"._parent._object\n",{"type":29,"tag":63,"props":3424,"children":3425},{"class":65,"line":1419},[3426],{"type":29,"tag":63,"props":3427,"children":3428},{"style":76},[3429],{"type":44,"value":3430},"      );\n",{"type":29,"tag":63,"props":3432,"children":3433},{"class":65,"line":1451},[3434],{"type":29,"tag":63,"props":3435,"children":3436},{"style":76},[3437],{"type":44,"value":2123},{"type":29,"tag":63,"props":3439,"children":3440},{"class":65,"line":1482},[3441],{"type":29,"tag":63,"props":3442,"children":3443},{"style":76},[3444],{"type":44,"value":257},{"type":29,"tag":30,"props":3446,"children":3447},{},[3448,3450,3455,3457,3462,3464,3469,3471,3477,3479,3484,3486,3491,3493,3498,3500,3505,3507,3512,3514,3519,3521,3526],{"type":44,"value":3449},"In the ",{"type":29,"tag":59,"props":3451,"children":3453},{"className":3452},[],[3454],{"type":44,"value":619},{"type":44,"value":3456}," constructor we see the connection always comes from either the inherited parent ",{"type":29,"tag":59,"props":3458,"children":3460},{"className":3459},[],[3461],{"type":44,"value":619},{"type":44,"value":3463},", or from the ",{"type":29,"tag":59,"props":3465,"children":3467},{"className":3466},[],[3468],{"type":44,"value":687},{"type":44,"value":3470}," passed into the ",{"type":29,"tag":59,"props":3472,"children":3474},{"className":3473},[],[3475],{"type":44,"value":3476},"parent",{"type":44,"value":3478}," parameter. This, coupled with ",{"type":29,"tag":59,"props":3480,"children":3482},{"className":3481},[],[3483],{"type":44,"value":2713},{"type":44,"value":3485}," having the name ",{"type":29,"tag":59,"props":3487,"children":3489},{"className":3488},[],[3490],{"type":44,"value":26},{"type":44,"value":3492},", gives us the hint that every dispatcher in the server library will have access to the ",{"type":29,"tag":59,"props":3494,"children":3496},{"className":3495},[],[3497],{"type":44,"value":2578},{"type":44,"value":3499},". Furthermore, the ",{"type":29,"tag":59,"props":3501,"children":3503},{"className":3502},[],[3504],{"type":44,"value":2578},{"type":44,"value":3506}," will register every instance of a subclass of ",{"type":29,"tag":59,"props":3508,"children":3510},{"className":3509},[],[3511],{"type":44,"value":619},{"type":44,"value":3513},", hinting that it will communicate with each of the ",{"type":29,"tag":59,"props":3515,"children":3517},{"className":3516},[],[3518],{"type":44,"value":619},{"type":44,"value":3520}," objects. These points will become more clear after looking at the ",{"type":29,"tag":59,"props":3522,"children":3524},{"className":3523},[],[3525],{"type":44,"value":2635},{"type":44,"value":3527},"'s constructor.",{"type":29,"tag":3529,"props":3530,"children":3532},"h4",{"id":3531},"playwrightdispatcher-and-its-constructor",[3533],{"type":44,"value":3534},"PlaywrightDispatcher and its constructor",{"type":29,"tag":30,"props":3536,"children":3537},{},[3538,3540,3545],{"type":44,"value":3539},"Let's look closer at a slightly simplified version of ",{"type":29,"tag":59,"props":3541,"children":3543},{"className":3542},[],[3544],{"type":44,"value":2635},{"type":44,"value":3546},"'s constructor",{"type":29,"tag":52,"props":3548,"children":3551},{"className":54,"code":3549,"filename":3550,"language":56,"meta":7,"style":7},"import type { Playwright } from \"playwright-core/src/server/playwright\";\n\nclass PlaywrightDispatcher extends Dispatcher {\n  constructor(scope: RootDispatcher, playwright: Playwright) {\n    super(scope, playwright, \"Playwright\", {\n      chromium: new BrowserTypeDispatcher(scope, playwright.chromium),\n      firefox: new BrowserTypeDispatcher(scope, playwright.firefox),\n      webkit: new BrowserTypeDispatcher(scope, playwright.webkit),\n      // ...\n    });\n  }\n}\n","packages/playwright-core/src/server/dispatchers/playwrightDispatcher.ts",[3552],{"type":29,"tag":59,"props":3553,"children":3554},{"__ignoreMap":7},[3555,3585,3592,3615,3660,3682,3704,3725,3746,3754,3762,3769],{"type":29,"tag":63,"props":3556,"children":3557},{"class":65,"line":66},[3558,3562,3567,3572,3576,3581],{"type":29,"tag":63,"props":3559,"children":3560},{"style":70},[3561],{"type":44,"value":73},{"type":29,"tag":63,"props":3563,"children":3564},{"style":70},[3565],{"type":44,"value":3566}," type",{"type":29,"tag":63,"props":3568,"children":3569},{"style":76},[3570],{"type":44,"value":3571}," { Playwright } ",{"type":29,"tag":63,"props":3573,"children":3574},{"style":70},[3575],{"type":44,"value":84},{"type":29,"tag":63,"props":3577,"children":3578},{"style":87},[3579],{"type":44,"value":3580}," \"playwright-core/src/server/playwright\"",{"type":29,"tag":63,"props":3582,"children":3583},{"style":76},[3584],{"type":44,"value":1244},{"type":29,"tag":63,"props":3586,"children":3587},{"class":65,"line":93},[3588],{"type":29,"tag":63,"props":3589,"children":3590},{"emptyLinePlaceholder":97},[3591],{"type":44,"value":100},{"type":29,"tag":63,"props":3593,"children":3594},{"class":65,"line":103},[3595,3599,3603,3607,3611],{"type":29,"tag":63,"props":3596,"children":3597},{"style":70},[3598],{"type":44,"value":2792},{"type":29,"tag":63,"props":3600,"children":3601},{"style":117},[3602],{"type":44,"value":1175},{"type":29,"tag":63,"props":3604,"children":3605},{"style":70},[3606],{"type":44,"value":1971},{"type":29,"tag":63,"props":3608,"children":3609},{"style":117},[3610],{"type":44,"value":2805},{"type":29,"tag":63,"props":3612,"children":3613},{"style":76},[3614],{"type":44,"value":135},{"type":29,"tag":63,"props":3616,"children":3617},{"class":65,"line":138},[3618,3622,3626,3631,3635,3639,3643,3647,3651,3656],{"type":29,"tag":63,"props":3619,"children":3620},{"style":70},[3621],{"type":44,"value":2817},{"type":29,"tag":63,"props":3623,"children":3624},{"style":76},[3625],{"type":44,"value":238},{"type":29,"tag":63,"props":3627,"children":3628},{"style":147},[3629],{"type":44,"value":3630},"scope",{"type":29,"tag":63,"props":3632,"children":3633},{"style":70},[3634],{"type":44,"value":761},{"type":29,"tag":63,"props":3636,"children":3637},{"style":117},[3638],{"type":44,"value":1139},{"type":29,"tag":63,"props":3640,"children":3641},{"style":76},[3642],{"type":44,"value":912},{"type":29,"tag":63,"props":3644,"children":3645},{"style":147},[3646],{"type":44,"value":5},{"type":29,"tag":63,"props":3648,"children":3649},{"style":70},[3650],{"type":44,"value":761},{"type":29,"tag":63,"props":3652,"children":3653},{"style":117},[3654],{"type":44,"value":3655}," Playwright",{"type":29,"tag":63,"props":3657,"children":3658},{"style":76},[3659],{"type":44,"value":2839},{"type":29,"tag":63,"props":3661,"children":3662},{"class":65,"line":178},[3663,3667,3672,3677],{"type":29,"tag":63,"props":3664,"children":3665},{"style":394},[3666],{"type":44,"value":2847},{"type":29,"tag":63,"props":3668,"children":3669},{"style":76},[3670],{"type":44,"value":3671},"(scope, playwright, ",{"type":29,"tag":63,"props":3673,"children":3674},{"style":87},[3675],{"type":44,"value":3676},"\"Playwright\"",{"type":29,"tag":63,"props":3678,"children":3679},{"style":76},[3680],{"type":44,"value":3681},", {\n",{"type":29,"tag":63,"props":3683,"children":3684},{"class":65,"line":213},[3685,3690,3694,3699],{"type":29,"tag":63,"props":3686,"children":3687},{"style":76},[3688],{"type":44,"value":3689},"      chromium: ",{"type":29,"tag":63,"props":3691,"children":3692},{"style":70},[3693],{"type":44,"value":2694},{"type":29,"tag":63,"props":3695,"children":3696},{"style":117},[3697],{"type":44,"value":3698}," BrowserTypeDispatcher",{"type":29,"tag":63,"props":3700,"children":3701},{"style":76},[3702],{"type":44,"value":3703},"(scope, playwright.chromium),\n",{"type":29,"tag":63,"props":3705,"children":3706},{"class":65,"line":251},[3707,3712,3716,3720],{"type":29,"tag":63,"props":3708,"children":3709},{"style":76},[3710],{"type":44,"value":3711},"      firefox: ",{"type":29,"tag":63,"props":3713,"children":3714},{"style":70},[3715],{"type":44,"value":2694},{"type":29,"tag":63,"props":3717,"children":3718},{"style":117},[3719],{"type":44,"value":3698},{"type":29,"tag":63,"props":3721,"children":3722},{"style":76},[3723],{"type":44,"value":3724},"(scope, playwright.firefox),\n",{"type":29,"tag":63,"props":3726,"children":3727},{"class":65,"line":923},[3728,3733,3737,3741],{"type":29,"tag":63,"props":3729,"children":3730},{"style":76},[3731],{"type":44,"value":3732},"      webkit: ",{"type":29,"tag":63,"props":3734,"children":3735},{"style":70},[3736],{"type":44,"value":2694},{"type":29,"tag":63,"props":3738,"children":3739},{"style":117},[3740],{"type":44,"value":3698},{"type":29,"tag":63,"props":3742,"children":3743},{"style":76},[3744],{"type":44,"value":3745},"(scope, playwright.webkit),\n",{"type":29,"tag":63,"props":3747,"children":3748},{"class":65,"line":942},[3749],{"type":29,"tag":63,"props":3750,"children":3751},{"style":977},[3752],{"type":44,"value":3753},"      // ...\n",{"type":29,"tag":63,"props":3755,"children":3756},{"class":65,"line":987},[3757],{"type":29,"tag":63,"props":3758,"children":3759},{"style":76},[3760],{"type":44,"value":3761},"    });\n",{"type":29,"tag":63,"props":3763,"children":3764},{"class":65,"line":995},[3765],{"type":29,"tag":63,"props":3766,"children":3767},{"style":76},[3768],{"type":44,"value":2123},{"type":29,"tag":63,"props":3770,"children":3771},{"class":65,"line":1004},[3772],{"type":29,"tag":63,"props":3773,"children":3774},{"style":76},[3775],{"type":44,"value":257},{"type":29,"tag":30,"props":3777,"children":3778},{},[3779,3781,3787,3789,3794,3796,3801,3803,3808,3810,3815,3817,3823,3825,3831,3833,3839,3841,3846,3848,3853],{"type":44,"value":3780},"Notice the ",{"type":29,"tag":59,"props":3782,"children":3784},{"className":3783},[],[3785],{"type":44,"value":3786},"super",{"type":44,"value":3788}," call has parameters for each of the driver types (chromium, firefox, etc.), in its initializers object. And each of the values have the scope the ",{"type":29,"tag":59,"props":3790,"children":3792},{"className":3791},[],[3793],{"type":44,"value":2713},{"type":44,"value":3795}," from ",{"type":29,"tag":59,"props":3797,"children":3799},{"className":3798},[],[3800],{"type":44,"value":504},{"type":44,"value":3802},". Every call to the server will run through the ",{"type":29,"tag":59,"props":3804,"children":3806},{"className":3805},[],[3807],{"type":44,"value":2578},{"type":44,"value":3809}," in the ",{"type":29,"tag":59,"props":3811,"children":3813},{"className":3812},[],[3814],{"type":44,"value":2713},{"type":44,"value":3816},", which then can be traced through calls in each of the dispatcher classes. ",{"type":29,"tag":59,"props":3818,"children":3820},{"className":3819},[],[3821],{"type":44,"value":3822},"BrowserTypeDispatcher",{"type":44,"value":3824}," will launch a ",{"type":29,"tag":59,"props":3826,"children":3828},{"className":3827},[],[3829],{"type":44,"value":3830},"BrowserDispatcher",{"type":44,"value":3832},", which is responsible for creating a ",{"type":29,"tag":59,"props":3834,"children":3836},{"className":3835},[],[3837],{"type":44,"value":3838},"BrowserContextDispatcher",{"type":44,"value":3840},", which can create a ",{"type":29,"tag":59,"props":3842,"children":3844},{"className":3843},[],[3845],{"type":44,"value":664},{"type":44,"value":3847},", and so on. The whole hierarchy of dispatchers directly interacting with the automated browser is contained within these few dispatcher initializations. So now we can trace all calls back to the original ",{"type":29,"tag":59,"props":3849,"children":3851},{"className":3850},[],[3852],{"type":44,"value":2578},{"type":44,"value":3854}," defined in the factory method with confidence!",{"type":29,"tag":269,"props":3856,"children":3858},{"id":3857},"tying-back-to-the-onmessage-communication",[3859],{"type":44,"value":3860},"Tying back to the onmessage communication",{"type":29,"tag":30,"props":3862,"children":3863},{},[3864,3866,3871,3873,3878,3880,3885,3886,3892,3894,3899,3901,3906,3908,3914,3916,3921,3923,3929,3931,3936,3938,3944,3945,3950,3951,3957,3959,3965,3967,3972,3974,3980],{"type":44,"value":3865},"The other important bit to look at is where ",{"type":29,"tag":59,"props":3867,"children":3869},{"className":3868},[],[3870],{"type":44,"value":1015},{"type":44,"value":3872}," is called within the ",{"type":29,"tag":59,"props":3874,"children":3876},{"className":3875},[],[3877],{"type":44,"value":2578},{"type":44,"value":3879},". The two main wrappers around this method are ",{"type":29,"tag":59,"props":3881,"children":3883},{"className":3882},[],[3884],{"type":44,"value":1051},{"type":44,"value":281},{"type":29,"tag":59,"props":3887,"children":3889},{"className":3888},[],[3890],{"type":44,"value":3891},"_sendMessageToClient",{"type":44,"value":3893}," in ",{"type":29,"tag":59,"props":3895,"children":3897},{"className":3896},[],[3898],{"type":44,"value":687},{"type":44,"value":3900},". The ",{"type":29,"tag":59,"props":3902,"children":3904},{"className":3903},[],[3905],{"type":44,"value":1051},{"type":44,"value":3907}," function is called on the client side, from the ",{"type":29,"tag":59,"props":3909,"children":3911},{"className":3910},[],[3912],{"type":44,"value":3913},"clientConnection.onmessage",{"type":44,"value":3915}," function, so you can interpret this as the main interface the client interacts with the server, where the dispatcher finds the corresponding dispatcher, calls the action, and responds back to the listener connected via ",{"type":29,"tag":59,"props":3917,"children":3919},{"className":3918},[],[3920],{"type":44,"value":1015},{"type":44,"value":3922},", which here is the ",{"type":29,"tag":59,"props":3924,"children":3926},{"className":3925},[],[3927],{"type":44,"value":3928},"clientConnection",{"type":44,"value":3930},". The other wrapper, ",{"type":29,"tag":59,"props":3932,"children":3934},{"className":3933},[],[3935],{"type":44,"value":3891},{"type":44,"value":3937},", is called from the ",{"type":29,"tag":59,"props":3939,"children":3941},{"className":3940},[],[3942],{"type":44,"value":3943},"sendEvent",{"type":44,"value":912},{"type":29,"tag":59,"props":3946,"children":3948},{"className":3947},[],[3949],{"type":44,"value":3369},{"type":44,"value":912},{"type":29,"tag":59,"props":3952,"children":3954},{"className":3953},[],[3955],{"type":44,"value":3956},"sendAdopt",{"type":44,"value":3958},", and ",{"type":29,"tag":59,"props":3960,"children":3962},{"className":3961},[],[3963],{"type":44,"value":3964},"sendDestroy",{"type":44,"value":3966}," methods defined within the dispatcher. Calls to these functions are spread throughout the ",{"type":29,"tag":59,"props":3968,"children":3970},{"className":3969},[],[3971],{"type":44,"value":619},{"type":44,"value":3973}," subclasses, which call these functions from their internal ",{"type":29,"tag":59,"props":3975,"children":3977},{"className":3976},[],[3978],{"type":44,"value":3979},"_connection",{"type":44,"value":3981}," variable.",{"type":29,"tag":269,"props":3983,"children":3985},{"id":3984},"synchronizing-objects-between-the-dispatchers-and-client-side-channelowners",[3986],{"type":44,"value":3987},"Synchronizing objects between the Dispatchers and client-side ChannelOwners",{"type":29,"tag":30,"props":3989,"children":3990},{},[3991,3993,3998,4000,4005,4007,4012,4014,4019,4021,4027],{"type":44,"value":3992},"The ",{"type":29,"tag":59,"props":3994,"children":3996},{"className":3995},[],[3997],{"type":44,"value":3369},{"type":44,"value":3999}," function is special because it is only called from within the ",{"type":29,"tag":59,"props":4001,"children":4003},{"className":4002},[],[4004],{"type":44,"value":619},{"type":44,"value":4006}," constructor, hence the constructor of each of its subclasses. This method tells the client connection to create a corresponding client-side class which handles messaging to this dispatcher. Moreover, looking into the ",{"type":29,"tag":59,"props":4008,"children":4010},{"className":4009},[],[4011],{"type":44,"value":3369},{"type":44,"value":4013}," implementation, internally it calls ",{"type":29,"tag":59,"props":4015,"children":4017},{"className":4016},[],[4018],{"type":44,"value":3891},{"type":44,"value":4020}," with the ",{"type":29,"tag":59,"props":4022,"children":4024},{"className":4023},[],[4025],{"type":44,"value":4026},"__create__",{"type":44,"value":4028}," parameter:",{"type":29,"tag":52,"props":4030,"children":4033},{"className":54,"code":4031,"filename":4032,"language":56,"meta":7,"style":7},"sendCreate(parent: DispatcherScope, type: string, guid: string, initializer: any, sdkObject?: SdkObject) {\n  const validator = findValidator(type, '', 'Initializer');\n  initializer = validator(initializer, '', { tChannelImpl: this._tChannelImplToWire.bind(this), binary: this._isLocal ? 'buffer' : 'toBase64' });\n  this._sendMessageToClient(parent._guid, type, '__create__', { type, initializer, guid }, sdkObject);\n}\n","packages/playwright-core/src/server/dispatchers/dispatcher.ts",[4034],{"type":29,"tag":59,"props":4035,"children":4036},{"__ignoreMap":7},[4037,4059,4103,4193,4224],{"type":29,"tag":63,"props":4038,"children":4039},{"class":65,"line":66},[4040,4044,4049,4054],{"type":29,"tag":63,"props":4041,"children":4042},{"style":117},[4043],{"type":44,"value":3369},{"type":29,"tag":63,"props":4045,"children":4046},{"style":76},[4047],{"type":44,"value":4048},"(parent: DispatcherScope, type: string, guid: string, initializer: any, sdkObject",{"type":29,"tag":63,"props":4050,"children":4051},{"style":70},[4052],{"type":44,"value":4053},"?:",{"type":29,"tag":63,"props":4055,"children":4056},{"style":76},[4057],{"type":44,"value":4058}," SdkObject) {\n",{"type":29,"tag":63,"props":4060,"children":4061},{"class":65,"line":93},[4062,4066,4071,4075,4080,4085,4090,4094,4099],{"type":29,"tag":63,"props":4063,"children":4064},{"style":70},[4065],{"type":44,"value":144},{"type":29,"tag":63,"props":4067,"children":4068},{"style":394},[4069],{"type":44,"value":4070}," validator",{"type":29,"tag":63,"props":4072,"children":4073},{"style":70},[4074],{"type":44,"value":155},{"type":29,"tag":63,"props":4076,"children":4077},{"style":117},[4078],{"type":44,"value":4079}," findValidator",{"type":29,"tag":63,"props":4081,"children":4082},{"style":76},[4083],{"type":44,"value":4084},"(type, ",{"type":29,"tag":63,"props":4086,"children":4087},{"style":87},[4088],{"type":44,"value":4089},"''",{"type":29,"tag":63,"props":4091,"children":4092},{"style":76},[4093],{"type":44,"value":912},{"type":29,"tag":63,"props":4095,"children":4096},{"style":87},[4097],{"type":44,"value":4098},"'Initializer'",{"type":29,"tag":63,"props":4100,"children":4101},{"style":76},[4102],{"type":44,"value":429},{"type":29,"tag":63,"props":4104,"children":4105},{"class":65,"line":103},[4106,4111,4115,4119,4124,4128,4133,4137,4142,4147,4151,4155,4160,4164,4169,4174,4179,4183,4188],{"type":29,"tag":63,"props":4107,"children":4108},{"style":76},[4109],{"type":44,"value":4110},"  initializer ",{"type":29,"tag":63,"props":4112,"children":4113},{"style":70},[4114],{"type":44,"value":1258},{"type":29,"tag":63,"props":4116,"children":4117},{"style":117},[4118],{"type":44,"value":4070},{"type":29,"tag":63,"props":4120,"children":4121},{"style":76},[4122],{"type":44,"value":4123},"(initializer, ",{"type":29,"tag":63,"props":4125,"children":4126},{"style":87},[4127],{"type":44,"value":4089},{"type":29,"tag":63,"props":4129,"children":4130},{"style":76},[4131],{"type":44,"value":4132},", { tChannelImpl: ",{"type":29,"tag":63,"props":4134,"children":4135},{"style":394},[4136],{"type":44,"value":3320},{"type":29,"tag":63,"props":4138,"children":4139},{"style":76},[4140],{"type":44,"value":4141},"._tChannelImplToWire.",{"type":29,"tag":63,"props":4143,"children":4144},{"style":117},[4145],{"type":44,"value":4146},"bind",{"type":29,"tag":63,"props":4148,"children":4149},{"style":76},[4150],{"type":44,"value":238},{"type":29,"tag":63,"props":4152,"children":4153},{"style":394},[4154],{"type":44,"value":3320},{"type":29,"tag":63,"props":4156,"children":4157},{"style":76},[4158],{"type":44,"value":4159},"), binary: ",{"type":29,"tag":63,"props":4161,"children":4162},{"style":394},[4163],{"type":44,"value":3320},{"type":29,"tag":63,"props":4165,"children":4166},{"style":76},[4167],{"type":44,"value":4168},"._isLocal ",{"type":29,"tag":63,"props":4170,"children":4171},{"style":70},[4172],{"type":44,"value":4173},"?",{"type":29,"tag":63,"props":4175,"children":4176},{"style":87},[4177],{"type":44,"value":4178}," 'buffer'",{"type":29,"tag":63,"props":4180,"children":4181},{"style":70},[4182],{"type":44,"value":3212},{"type":29,"tag":63,"props":4184,"children":4185},{"style":87},[4186],{"type":44,"value":4187}," 'toBase64'",{"type":29,"tag":63,"props":4189,"children":4190},{"style":76},[4191],{"type":44,"value":4192}," });\n",{"type":29,"tag":63,"props":4194,"children":4195},{"class":65,"line":138},[4196,4201,4205,4209,4214,4219],{"type":29,"tag":63,"props":4197,"children":4198},{"style":394},[4199],{"type":44,"value":4200},"  this",{"type":29,"tag":63,"props":4202,"children":4203},{"style":76},[4204],{"type":44,"value":228},{"type":29,"tag":63,"props":4206,"children":4207},{"style":117},[4208],{"type":44,"value":3891},{"type":29,"tag":63,"props":4210,"children":4211},{"style":76},[4212],{"type":44,"value":4213},"(parent._guid, type, ",{"type":29,"tag":63,"props":4215,"children":4216},{"style":87},[4217],{"type":44,"value":4218},"'__create__'",{"type":29,"tag":63,"props":4220,"children":4221},{"style":76},[4222],{"type":44,"value":4223},", { type, initializer, guid }, sdkObject);\n",{"type":29,"tag":63,"props":4225,"children":4226},{"class":65,"line":178},[4227],{"type":29,"tag":63,"props":4228,"children":4229},{"style":76},[4230],{"type":44,"value":257},{"type":29,"tag":30,"props":4232,"children":4233},{},[4234,4236,4241,4243,4248,4250,4256,4258,4263,4265,4270,4272,4277],{"type":44,"value":4235},"so if we search through the ",{"type":29,"tag":59,"props":4237,"children":4239},{"className":4238},[],[4240],{"type":44,"value":679},{"type":44,"value":4242}," class on the client side, sure enough in its ",{"type":29,"tag":59,"props":4244,"children":4246},{"className":4245},[],[4247],{"type":44,"value":1051},{"type":44,"value":4249}," function it has a call to ",{"type":29,"tag":59,"props":4251,"children":4253},{"className":4252},[],[4254],{"type":44,"value":4255},"_createRemoteObject",{"type":44,"value":4257}," for the associated method ",{"type":29,"tag":59,"props":4259,"children":4261},{"className":4260},[],[4262],{"type":44,"value":4026},{"type":44,"value":4264},". This ",{"type":29,"tag":59,"props":4266,"children":4268},{"className":4267},[],[4269],{"type":44,"value":4255},{"type":44,"value":4271}," is what initializes the client-side ",{"type":29,"tag":59,"props":4273,"children":4275},{"className":4274},[],[4276],{"type":44,"value":12},{"type":44,"value":4278}," instance, and is the reason why we call",{"type":29,"tag":52,"props":4280,"children":4282},{"className":54,"code":4281,"language":56,"meta":7,"style":7},"const playwrightAPI = clientConnection.getObjectWithKnownName(\"Playwright\");\n",[4283],{"type":29,"tag":59,"props":4284,"children":4285},{"__ignoreMap":7},[4286],{"type":29,"tag":63,"props":4287,"children":4288},{"class":65,"line":66},[4289,4293,4297,4301,4305,4309,4313,4317],{"type":29,"tag":63,"props":4290,"children":4291},{"style":70},[4292],{"type":44,"value":1842},{"type":29,"tag":63,"props":4294,"children":4295},{"style":394},[4296],{"type":44,"value":1193},{"type":29,"tag":63,"props":4298,"children":4299},{"style":70},[4300],{"type":44,"value":155},{"type":29,"tag":63,"props":4302,"children":4303},{"style":76},[4304],{"type":44,"value":1202},{"type":29,"tag":63,"props":4306,"children":4307},{"style":117},[4308],{"type":44,"value":1207},{"type":29,"tag":63,"props":4310,"children":4311},{"style":76},[4312],{"type":44,"value":238},{"type":29,"tag":63,"props":4314,"children":4315},{"style":87},[4316],{"type":44,"value":3676},{"type":29,"tag":63,"props":4318,"children":4319},{"style":76},[4320],{"type":44,"value":429},{"type":29,"tag":30,"props":4322,"children":4323},{},[4324,4326,4331,4333,4338],{"type":44,"value":4325},"to access the playwright API. But let's dive a little deeper as to what's happening with the message from the ",{"type":29,"tag":59,"props":4327,"children":4329},{"className":4328},[],[4330],{"type":44,"value":2578},{"type":44,"value":4332}," over to the ",{"type":29,"tag":59,"props":4334,"children":4336},{"className":4335},[],[4337],{"type":44,"value":3928},{"type":44,"value":4339},". For the Playwright create message, the message looks something like",{"type":29,"tag":52,"props":4341,"children":4343},{"className":54,"code":4342,"language":56,"meta":7,"style":7},"{\n  guid: '',\n  method: '__create__',\n  params: {\n    type: 'Playwright',\n    initializer: {\n      chromium: { guid: 'browser-type@024d5a494527ece580841844a9a933a6' },\n      firefox: { guid: 'browser-type@fae8f48651c02682ad3b276f0a046d63' },\n      webkit: { guid: 'browser-type@ed1c30ab794ec863fe5b9b208c3635e1' },\n      android: { guid: 'android@832582c466c24c6933d3a5587059e1be' },\n      electron: { guid: 'electron@3829a7608477101154e15c1e25bca9ca' },\n    },\n    guid: 'Playwright'\n  }\n}\n",[4344],{"type":29,"tag":59,"props":4345,"children":4346},{"__ignoreMap":7},[4347,4355,4376,4396,4409,4429,4440,4471,4500,4529,4558,4587,4595,4612,4619],{"type":29,"tag":63,"props":4348,"children":4349},{"class":65,"line":66},[4350],{"type":29,"tag":63,"props":4351,"children":4352},{"style":76},[4353],{"type":44,"value":4354},"{\n",{"type":29,"tag":63,"props":4356,"children":4357},{"class":65,"line":93},[4358,4363,4368,4372],{"type":29,"tag":63,"props":4359,"children":4360},{"style":117},[4361],{"type":44,"value":4362},"  guid",{"type":29,"tag":63,"props":4364,"children":4365},{"style":76},[4366],{"type":44,"value":4367},": ",{"type":29,"tag":63,"props":4369,"children":4370},{"style":87},[4371],{"type":44,"value":4089},{"type":29,"tag":63,"props":4373,"children":4374},{"style":76},[4375],{"type":44,"value":857},{"type":29,"tag":63,"props":4377,"children":4378},{"class":65,"line":103},[4379,4384,4388,4392],{"type":29,"tag":63,"props":4380,"children":4381},{"style":117},[4382],{"type":44,"value":4383},"  method",{"type":29,"tag":63,"props":4385,"children":4386},{"style":76},[4387],{"type":44,"value":4367},{"type":29,"tag":63,"props":4389,"children":4390},{"style":87},[4391],{"type":44,"value":4218},{"type":29,"tag":63,"props":4393,"children":4394},{"style":76},[4395],{"type":44,"value":857},{"type":29,"tag":63,"props":4397,"children":4398},{"class":65,"line":138},[4399,4404],{"type":29,"tag":63,"props":4400,"children":4401},{"style":117},[4402],{"type":44,"value":4403},"  params",{"type":29,"tag":63,"props":4405,"children":4406},{"style":76},[4407],{"type":44,"value":4408},": {\n",{"type":29,"tag":63,"props":4410,"children":4411},{"class":65,"line":178},[4412,4416,4420,4425],{"type":29,"tag":63,"props":4413,"children":4414},{"style":117},[4415],{"type":44,"value":3039},{"type":29,"tag":63,"props":4417,"children":4418},{"style":76},[4419],{"type":44,"value":4367},{"type":29,"tag":63,"props":4421,"children":4422},{"style":87},[4423],{"type":44,"value":4424},"'Playwright'",{"type":29,"tag":63,"props":4426,"children":4427},{"style":76},[4428],{"type":44,"value":857},{"type":29,"tag":63,"props":4430,"children":4431},{"class":65,"line":213},[4432,4436],{"type":29,"tag":63,"props":4433,"children":4434},{"style":117},[4435],{"type":44,"value":3059},{"type":29,"tag":63,"props":4437,"children":4438},{"style":76},[4439],{"type":44,"value":4408},{"type":29,"tag":63,"props":4441,"children":4442},{"class":65,"line":251},[4443,4448,4453,4457,4461,4466],{"type":29,"tag":63,"props":4444,"children":4445},{"style":117},[4446],{"type":44,"value":4447},"      chromium",{"type":29,"tag":63,"props":4449,"children":4450},{"style":76},[4451],{"type":44,"value":4452},": { ",{"type":29,"tag":63,"props":4454,"children":4455},{"style":117},[4456],{"type":44,"value":2054},{"type":29,"tag":63,"props":4458,"children":4459},{"style":76},[4460],{"type":44,"value":4367},{"type":29,"tag":63,"props":4462,"children":4463},{"style":87},[4464],{"type":44,"value":4465},"'browser-type@024d5a494527ece580841844a9a933a6'",{"type":29,"tag":63,"props":4467,"children":4468},{"style":76},[4469],{"type":44,"value":4470}," },\n",{"type":29,"tag":63,"props":4472,"children":4473},{"class":65,"line":923},[4474,4479,4483,4487,4491,4496],{"type":29,"tag":63,"props":4475,"children":4476},{"style":117},[4477],{"type":44,"value":4478},"      firefox",{"type":29,"tag":63,"props":4480,"children":4481},{"style":76},[4482],{"type":44,"value":4452},{"type":29,"tag":63,"props":4484,"children":4485},{"style":117},[4486],{"type":44,"value":2054},{"type":29,"tag":63,"props":4488,"children":4489},{"style":76},[4490],{"type":44,"value":4367},{"type":29,"tag":63,"props":4492,"children":4493},{"style":87},[4494],{"type":44,"value":4495},"'browser-type@fae8f48651c02682ad3b276f0a046d63'",{"type":29,"tag":63,"props":4497,"children":4498},{"style":76},[4499],{"type":44,"value":4470},{"type":29,"tag":63,"props":4501,"children":4502},{"class":65,"line":942},[4503,4508,4512,4516,4520,4525],{"type":29,"tag":63,"props":4504,"children":4505},{"style":117},[4506],{"type":44,"value":4507},"      webkit",{"type":29,"tag":63,"props":4509,"children":4510},{"style":76},[4511],{"type":44,"value":4452},{"type":29,"tag":63,"props":4513,"children":4514},{"style":117},[4515],{"type":44,"value":2054},{"type":29,"tag":63,"props":4517,"children":4518},{"style":76},[4519],{"type":44,"value":4367},{"type":29,"tag":63,"props":4521,"children":4522},{"style":87},[4523],{"type":44,"value":4524},"'browser-type@ed1c30ab794ec863fe5b9b208c3635e1'",{"type":29,"tag":63,"props":4526,"children":4527},{"style":76},[4528],{"type":44,"value":4470},{"type":29,"tag":63,"props":4530,"children":4531},{"class":65,"line":987},[4532,4537,4541,4545,4549,4554],{"type":29,"tag":63,"props":4533,"children":4534},{"style":117},[4535],{"type":44,"value":4536},"      android",{"type":29,"tag":63,"props":4538,"children":4539},{"style":76},[4540],{"type":44,"value":4452},{"type":29,"tag":63,"props":4542,"children":4543},{"style":117},[4544],{"type":44,"value":2054},{"type":29,"tag":63,"props":4546,"children":4547},{"style":76},[4548],{"type":44,"value":4367},{"type":29,"tag":63,"props":4550,"children":4551},{"style":87},[4552],{"type":44,"value":4553},"'android@832582c466c24c6933d3a5587059e1be'",{"type":29,"tag":63,"props":4555,"children":4556},{"style":76},[4557],{"type":44,"value":4470},{"type":29,"tag":63,"props":4559,"children":4560},{"class":65,"line":995},[4561,4566,4570,4574,4578,4583],{"type":29,"tag":63,"props":4562,"children":4563},{"style":117},[4564],{"type":44,"value":4565},"      electron",{"type":29,"tag":63,"props":4567,"children":4568},{"style":76},[4569],{"type":44,"value":4452},{"type":29,"tag":63,"props":4571,"children":4572},{"style":117},[4573],{"type":44,"value":2054},{"type":29,"tag":63,"props":4575,"children":4576},{"style":76},[4577],{"type":44,"value":4367},{"type":29,"tag":63,"props":4579,"children":4580},{"style":87},[4581],{"type":44,"value":4582},"'electron@3829a7608477101154e15c1e25bca9ca'",{"type":29,"tag":63,"props":4584,"children":4585},{"style":76},[4586],{"type":44,"value":4470},{"type":29,"tag":63,"props":4588,"children":4589},{"class":65,"line":1004},[4590],{"type":29,"tag":63,"props":4591,"children":4592},{"style":76},[4593],{"type":44,"value":4594},"    },\n",{"type":29,"tag":63,"props":4596,"children":4597},{"class":65,"line":23},[4598,4603,4607],{"type":29,"tag":63,"props":4599,"children":4600},{"style":117},[4601],{"type":44,"value":4602},"    guid",{"type":29,"tag":63,"props":4604,"children":4605},{"style":76},[4606],{"type":44,"value":4367},{"type":29,"tag":63,"props":4608,"children":4609},{"style":87},[4610],{"type":44,"value":4611},"'Playwright'\n",{"type":29,"tag":63,"props":4613,"children":4614},{"class":65,"line":1059},[4615],{"type":29,"tag":63,"props":4616,"children":4617},{"style":76},[4618],{"type":44,"value":2123},{"type":29,"tag":63,"props":4620,"children":4621},{"class":65,"line":1091},[4622],{"type":29,"tag":63,"props":4623,"children":4624},{"style":76},[4625],{"type":44,"value":257},{"type":29,"tag":30,"props":4627,"children":4628},{},[4629,4631,4636,4638,4643,4645,4650,4652,4658,4660,4665,4667,4673],{"type":44,"value":4630},"note before this there are messages for each of the device types, and the ",{"type":29,"tag":59,"props":4632,"children":4634},{"className":4633},[],[4635],{"type":44,"value":3928},{"type":44,"value":4637}," constructs corresponding objects which provide a public API for these dispatchers within the server. These API's are provided by subclasses of the ",{"type":29,"tag":59,"props":4639,"children":4641},{"className":4640},[],[4642],{"type":44,"value":604},{"type":44,"value":4644}," class, which is a concept for a later section. For now, let's trace what happens in the ",{"type":29,"tag":59,"props":4646,"children":4648},{"className":4647},[],[4649],{"type":44,"value":3928},{"type":44,"value":4651}," for the ",{"type":29,"tag":59,"props":4653,"children":4655},{"className":4654},[],[4656],{"type":44,"value":4657},"type: 'Playwright'",{"type":44,"value":4659}," message. As mentioned before, the message is put through the ",{"type":29,"tag":59,"props":4661,"children":4663},{"className":4662},[],[4664],{"type":44,"value":2586},{"type":44,"value":4666}," function which then calls the ",{"type":29,"tag":59,"props":4668,"children":4670},{"className":4669},[],[4671],{"type":44,"value":4672},"clientConnection._createRemoteObject",{"type":44,"value":4674}," function with the following parameters",{"type":29,"tag":52,"props":4676,"children":4678},{"className":54,"code":4677,"filename":1946,"language":56,"meta":7,"style":7},"this._createRemoteObject(\n  \"\", // parentGuid - corresponds to Root, the root ChannelOwner\n  \"Playwright\", // type\n  \"Playwright\", // guid\n  {\n    // initializer\n    chromium: { guid: \"browser-type@024d5a494527ece580841844a9a933a6\" },\n    firefox: { guid: \"browser-type@fae8f48651c02682ad3b276f0a046d63\" },\n    webkit: { guid: \"browser-type@ed1c30ab794ec863fe5b9b208c3635e1\" },\n    android: { guid: \"android@832582c466c24c6933d3a5587059e1be\" },\n    electron: { guid: \"electron@3829a7608477101154e15c1e25bca9ca\" },\n  }\n);\n",[4679],{"type":29,"tag":59,"props":4680,"children":4681},{"__ignoreMap":7},[4682,4701,4718,4735,4751,4759,4767,4784,4801,4818,4835,4852,4859],{"type":29,"tag":63,"props":4683,"children":4684},{"class":65,"line":66},[4685,4689,4693,4697],{"type":29,"tag":63,"props":4686,"children":4687},{"style":394},[4688],{"type":44,"value":3320},{"type":29,"tag":63,"props":4690,"children":4691},{"style":76},[4692],{"type":44,"value":228},{"type":29,"tag":63,"props":4694,"children":4695},{"style":117},[4696],{"type":44,"value":4255},{"type":29,"tag":63,"props":4698,"children":4699},{"style":76},[4700],{"type":44,"value":1212},{"type":29,"tag":63,"props":4702,"children":4703},{"class":65,"line":93},[4704,4709,4713],{"type":29,"tag":63,"props":4705,"children":4706},{"style":87},[4707],{"type":44,"value":4708},"  \"\"",{"type":29,"tag":63,"props":4710,"children":4711},{"style":76},[4712],{"type":44,"value":912},{"type":29,"tag":63,"props":4714,"children":4715},{"style":977},[4716],{"type":44,"value":4717},"// parentGuid - corresponds to Root, the root ChannelOwner\n",{"type":29,"tag":63,"props":4719,"children":4720},{"class":65,"line":103},[4721,4726,4730],{"type":29,"tag":63,"props":4722,"children":4723},{"style":87},[4724],{"type":44,"value":4725},"  \"Playwright\"",{"type":29,"tag":63,"props":4727,"children":4728},{"style":76},[4729],{"type":44,"value":912},{"type":29,"tag":63,"props":4731,"children":4732},{"style":977},[4733],{"type":44,"value":4734},"// type\n",{"type":29,"tag":63,"props":4736,"children":4737},{"class":65,"line":138},[4738,4742,4746],{"type":29,"tag":63,"props":4739,"children":4740},{"style":87},[4741],{"type":44,"value":4725},{"type":29,"tag":63,"props":4743,"children":4744},{"style":76},[4745],{"type":44,"value":912},{"type":29,"tag":63,"props":4747,"children":4748},{"style":977},[4749],{"type":44,"value":4750},"// guid\n",{"type":29,"tag":63,"props":4752,"children":4753},{"class":65,"line":178},[4754],{"type":29,"tag":63,"props":4755,"children":4756},{"style":76},[4757],{"type":44,"value":4758},"  {\n",{"type":29,"tag":63,"props":4760,"children":4761},{"class":65,"line":213},[4762],{"type":29,"tag":63,"props":4763,"children":4764},{"style":977},[4765],{"type":44,"value":4766},"    // initializer\n",{"type":29,"tag":63,"props":4768,"children":4769},{"class":65,"line":251},[4770,4775,4780],{"type":29,"tag":63,"props":4771,"children":4772},{"style":76},[4773],{"type":44,"value":4774},"    chromium: { guid: ",{"type":29,"tag":63,"props":4776,"children":4777},{"style":87},[4778],{"type":44,"value":4779},"\"browser-type@024d5a494527ece580841844a9a933a6\"",{"type":29,"tag":63,"props":4781,"children":4782},{"style":76},[4783],{"type":44,"value":4470},{"type":29,"tag":63,"props":4785,"children":4786},{"class":65,"line":923},[4787,4792,4797],{"type":29,"tag":63,"props":4788,"children":4789},{"style":76},[4790],{"type":44,"value":4791},"    firefox: { guid: ",{"type":29,"tag":63,"props":4793,"children":4794},{"style":87},[4795],{"type":44,"value":4796},"\"browser-type@fae8f48651c02682ad3b276f0a046d63\"",{"type":29,"tag":63,"props":4798,"children":4799},{"style":76},[4800],{"type":44,"value":4470},{"type":29,"tag":63,"props":4802,"children":4803},{"class":65,"line":942},[4804,4809,4814],{"type":29,"tag":63,"props":4805,"children":4806},{"style":76},[4807],{"type":44,"value":4808},"    webkit: { guid: ",{"type":29,"tag":63,"props":4810,"children":4811},{"style":87},[4812],{"type":44,"value":4813},"\"browser-type@ed1c30ab794ec863fe5b9b208c3635e1\"",{"type":29,"tag":63,"props":4815,"children":4816},{"style":76},[4817],{"type":44,"value":4470},{"type":29,"tag":63,"props":4819,"children":4820},{"class":65,"line":987},[4821,4826,4831],{"type":29,"tag":63,"props":4822,"children":4823},{"style":76},[4824],{"type":44,"value":4825},"    android: { guid: ",{"type":29,"tag":63,"props":4827,"children":4828},{"style":87},[4829],{"type":44,"value":4830},"\"android@832582c466c24c6933d3a5587059e1be\"",{"type":29,"tag":63,"props":4832,"children":4833},{"style":76},[4834],{"type":44,"value":4470},{"type":29,"tag":63,"props":4836,"children":4837},{"class":65,"line":995},[4838,4843,4848],{"type":29,"tag":63,"props":4839,"children":4840},{"style":76},[4841],{"type":44,"value":4842},"    electron: { guid: ",{"type":29,"tag":63,"props":4844,"children":4845},{"style":87},[4846],{"type":44,"value":4847},"\"electron@3829a7608477101154e15c1e25bca9ca\"",{"type":29,"tag":63,"props":4849,"children":4850},{"style":76},[4851],{"type":44,"value":4470},{"type":29,"tag":63,"props":4853,"children":4854},{"class":65,"line":1004},[4855],{"type":29,"tag":63,"props":4856,"children":4857},{"style":76},[4858],{"type":44,"value":2123},{"type":29,"tag":63,"props":4860,"children":4861},{"class":65,"line":23},[4862],{"type":29,"tag":63,"props":4863,"children":4864},{"style":76},[4865],{"type":44,"value":429},{"type":29,"tag":30,"props":4867,"children":4868},{},[4869,4871,4876,4878,4884],{"type":44,"value":4870},"in the ",{"type":29,"tag":59,"props":4872,"children":4874},{"className":4873},[],[4875],{"type":44,"value":4672},{"type":44,"value":4877}," function, there is a transformation of the data and then a large ",{"type":29,"tag":59,"props":4879,"children":4881},{"className":4880},[],[4882],{"type":44,"value":4883},"switch-case",{"type":44,"value":4885}," function instantiating the corresponding client class.",{"type":29,"tag":52,"props":4887,"children":4889},{"className":54,"code":4888,"filename":1946,"language":56,"meta":7,"style":7},"_createRemoteObject(parentGuid: string, type: string, guid: string, initializer: any) {\n  const parent = this._objects.get(parentGuid); // here the parentGuid is ''\n  if (!parent)\n    throw new Error(`Cannot find parent object ${parentGuid} to create ${guid}`);\n  let result: ChannelOwner\u003Cany>;\n  const validator = findValidator(type, '', 'Initializer');\n  initializer = validator(\n    initializer,\n    '',\n    {\n      tChannelImpl: this._tChannelImplFromWire.bind(this),\n      binary: this._rawBuffers ? 'buffer' : 'fromBase64'\n    }\n  );\n  switch (type) {\n    // ...\n    case 'Playwright':\n      result = new Playwright(parent, type, guid, initializer);\n      break;\n    // ...\n  }\n  return result;\n}\n",[4890],{"type":29,"tag":59,"props":4891,"children":4892},{"__ignoreMap":7},[4893,4905,4943,4964,5013,5049,5088,5107,5115,5127,5135,5169,5203,5211,5218,5231,5239,5257,5282,5294,5301,5308,5320],{"type":29,"tag":63,"props":4894,"children":4895},{"class":65,"line":66},[4896,4900],{"type":29,"tag":63,"props":4897,"children":4898},{"style":117},[4899],{"type":44,"value":4255},{"type":29,"tag":63,"props":4901,"children":4902},{"style":76},[4903],{"type":44,"value":4904},"(parentGuid: string, type: string, guid: string, initializer: any) {\n",{"type":29,"tag":63,"props":4906,"children":4907},{"class":65,"line":93},[4908,4912,4917,4921,4925,4929,4933,4938],{"type":29,"tag":63,"props":4909,"children":4910},{"style":70},[4911],{"type":44,"value":144},{"type":29,"tag":63,"props":4913,"children":4914},{"style":394},[4915],{"type":44,"value":4916}," parent",{"type":29,"tag":63,"props":4918,"children":4919},{"style":70},[4920],{"type":44,"value":155},{"type":29,"tag":63,"props":4922,"children":4923},{"style":394},[4924],{"type":44,"value":2093},{"type":29,"tag":63,"props":4926,"children":4927},{"style":76},[4928],{"type":44,"value":2098},{"type":29,"tag":63,"props":4930,"children":4931},{"style":117},[4932],{"type":44,"value":1619},{"type":29,"tag":63,"props":4934,"children":4935},{"style":76},[4936],{"type":44,"value":4937},"(parentGuid); ",{"type":29,"tag":63,"props":4939,"children":4940},{"style":977},[4941],{"type":44,"value":4942},"// here the parentGuid is ''\n",{"type":29,"tag":63,"props":4944,"children":4945},{"class":65,"line":103},[4946,4951,4955,4959],{"type":29,"tag":63,"props":4947,"children":4948},{"style":70},[4949],{"type":44,"value":4950},"  if",{"type":29,"tag":63,"props":4952,"children":4953},{"style":76},[4954],{"type":44,"value":1024},{"type":29,"tag":63,"props":4956,"children":4957},{"style":70},[4958],{"type":44,"value":1629},{"type":29,"tag":63,"props":4960,"children":4961},{"style":76},[4962],{"type":44,"value":4963},"parent)\n",{"type":29,"tag":63,"props":4965,"children":4966},{"class":65,"line":138},[4967,4972,4976,4981,4985,4990,4995,5000,5004,5009],{"type":29,"tag":63,"props":4968,"children":4969},{"style":70},[4970],{"type":44,"value":4971},"    throw",{"type":29,"tag":63,"props":4973,"children":4974},{"style":70},[4975],{"type":44,"value":893},{"type":29,"tag":63,"props":4977,"children":4978},{"style":117},[4979],{"type":44,"value":4980}," Error",{"type":29,"tag":63,"props":4982,"children":4983},{"style":76},[4984],{"type":44,"value":238},{"type":29,"tag":63,"props":4986,"children":4987},{"style":87},[4988],{"type":44,"value":4989},"`Cannot find parent object ${",{"type":29,"tag":63,"props":4991,"children":4992},{"style":76},[4993],{"type":44,"value":4994},"parentGuid",{"type":29,"tag":63,"props":4996,"children":4997},{"style":87},[4998],{"type":44,"value":4999},"} to create ${",{"type":29,"tag":63,"props":5001,"children":5002},{"style":76},[5003],{"type":44,"value":2054},{"type":29,"tag":63,"props":5005,"children":5006},{"style":87},[5007],{"type":44,"value":5008},"}`",{"type":29,"tag":63,"props":5010,"children":5011},{"style":76},[5012],{"type":44,"value":429},{"type":29,"tag":63,"props":5014,"children":5015},{"class":65,"line":178},[5016,5021,5026,5030,5035,5039,5044],{"type":29,"tag":63,"props":5017,"children":5018},{"style":70},[5019],{"type":44,"value":5020},"  let",{"type":29,"tag":63,"props":5022,"children":5023},{"style":76},[5024],{"type":44,"value":5025}," result",{"type":29,"tag":63,"props":5027,"children":5028},{"style":70},[5029],{"type":44,"value":761},{"type":29,"tag":63,"props":5031,"children":5032},{"style":117},[5033],{"type":44,"value":5034}," ChannelOwner",{"type":29,"tag":63,"props":5036,"children":5037},{"style":76},[5038],{"type":44,"value":2011},{"type":29,"tag":63,"props":5040,"children":5041},{"style":394},[5042],{"type":44,"value":5043},"any",{"type":29,"tag":63,"props":5045,"children":5046},{"style":76},[5047],{"type":44,"value":5048},">;\n",{"type":29,"tag":63,"props":5050,"children":5051},{"class":65,"line":213},[5052,5056,5060,5064,5068,5072,5076,5080,5084],{"type":29,"tag":63,"props":5053,"children":5054},{"style":70},[5055],{"type":44,"value":144},{"type":29,"tag":63,"props":5057,"children":5058},{"style":394},[5059],{"type":44,"value":4070},{"type":29,"tag":63,"props":5061,"children":5062},{"style":70},[5063],{"type":44,"value":155},{"type":29,"tag":63,"props":5065,"children":5066},{"style":117},[5067],{"type":44,"value":4079},{"type":29,"tag":63,"props":5069,"children":5070},{"style":76},[5071],{"type":44,"value":4084},{"type":29,"tag":63,"props":5073,"children":5074},{"style":87},[5075],{"type":44,"value":4089},{"type":29,"tag":63,"props":5077,"children":5078},{"style":76},[5079],{"type":44,"value":912},{"type":29,"tag":63,"props":5081,"children":5082},{"style":87},[5083],{"type":44,"value":4098},{"type":29,"tag":63,"props":5085,"children":5086},{"style":76},[5087],{"type":44,"value":429},{"type":29,"tag":63,"props":5089,"children":5090},{"class":65,"line":251},[5091,5095,5099,5103],{"type":29,"tag":63,"props":5092,"children":5093},{"style":76},[5094],{"type":44,"value":4110},{"type":29,"tag":63,"props":5096,"children":5097},{"style":70},[5098],{"type":44,"value":1258},{"type":29,"tag":63,"props":5100,"children":5101},{"style":117},[5102],{"type":44,"value":4070},{"type":29,"tag":63,"props":5104,"children":5105},{"style":76},[5106],{"type":44,"value":1212},{"type":29,"tag":63,"props":5108,"children":5109},{"class":65,"line":923},[5110],{"type":29,"tag":63,"props":5111,"children":5112},{"style":76},[5113],{"type":44,"value":5114},"    initializer,\n",{"type":29,"tag":63,"props":5116,"children":5117},{"class":65,"line":942},[5118,5123],{"type":29,"tag":63,"props":5119,"children":5120},{"style":87},[5121],{"type":44,"value":5122},"    ''",{"type":29,"tag":63,"props":5124,"children":5125},{"style":76},[5126],{"type":44,"value":857},{"type":29,"tag":63,"props":5128,"children":5129},{"class":65,"line":987},[5130],{"type":29,"tag":63,"props":5131,"children":5132},{"style":76},[5133],{"type":44,"value":5134},"    {\n",{"type":29,"tag":63,"props":5136,"children":5137},{"class":65,"line":995},[5138,5143,5147,5152,5156,5160,5164],{"type":29,"tag":63,"props":5139,"children":5140},{"style":76},[5141],{"type":44,"value":5142},"      tChannelImpl: ",{"type":29,"tag":63,"props":5144,"children":5145},{"style":394},[5146],{"type":44,"value":3320},{"type":29,"tag":63,"props":5148,"children":5149},{"style":76},[5150],{"type":44,"value":5151},"._tChannelImplFromWire.",{"type":29,"tag":63,"props":5153,"children":5154},{"style":117},[5155],{"type":44,"value":4146},{"type":29,"tag":63,"props":5157,"children":5158},{"style":76},[5159],{"type":44,"value":238},{"type":29,"tag":63,"props":5161,"children":5162},{"style":394},[5163],{"type":44,"value":3320},{"type":29,"tag":63,"props":5165,"children":5166},{"style":76},[5167],{"type":44,"value":5168},"),\n",{"type":29,"tag":63,"props":5170,"children":5171},{"class":65,"line":1004},[5172,5177,5181,5186,5190,5194,5198],{"type":29,"tag":63,"props":5173,"children":5174},{"style":76},[5175],{"type":44,"value":5176},"      binary: ",{"type":29,"tag":63,"props":5178,"children":5179},{"style":394},[5180],{"type":44,"value":3320},{"type":29,"tag":63,"props":5182,"children":5183},{"style":76},[5184],{"type":44,"value":5185},"._rawBuffers ",{"type":29,"tag":63,"props":5187,"children":5188},{"style":70},[5189],{"type":44,"value":4173},{"type":29,"tag":63,"props":5191,"children":5192},{"style":87},[5193],{"type":44,"value":4178},{"type":29,"tag":63,"props":5195,"children":5196},{"style":70},[5197],{"type":44,"value":3212},{"type":29,"tag":63,"props":5199,"children":5200},{"style":87},[5201],{"type":44,"value":5202}," 'fromBase64'\n",{"type":29,"tag":63,"props":5204,"children":5205},{"class":65,"line":23},[5206],{"type":29,"tag":63,"props":5207,"children":5208},{"style":76},[5209],{"type":44,"value":5210},"    }\n",{"type":29,"tag":63,"props":5212,"children":5213},{"class":65,"line":1059},[5214],{"type":29,"tag":63,"props":5215,"children":5216},{"style":76},[5217],{"type":44,"value":1289},{"type":29,"tag":63,"props":5219,"children":5220},{"class":65,"line":1091},[5221,5226],{"type":29,"tag":63,"props":5222,"children":5223},{"style":70},[5224],{"type":44,"value":5225},"  switch",{"type":29,"tag":63,"props":5227,"children":5228},{"style":76},[5229],{"type":44,"value":5230}," (type) {\n",{"type":29,"tag":63,"props":5232,"children":5233},{"class":65,"line":1108},[5234],{"type":29,"tag":63,"props":5235,"children":5236},{"style":977},[5237],{"type":44,"value":5238},"    // ...\n",{"type":29,"tag":63,"props":5240,"children":5241},{"class":65,"line":1116},[5242,5247,5252],{"type":29,"tag":63,"props":5243,"children":5244},{"style":70},[5245],{"type":44,"value":5246},"    case",{"type":29,"tag":63,"props":5248,"children":5249},{"style":87},[5250],{"type":44,"value":5251}," 'Playwright'",{"type":29,"tag":63,"props":5253,"children":5254},{"style":76},[5255],{"type":44,"value":5256},":\n",{"type":29,"tag":63,"props":5258,"children":5259},{"class":65,"line":1147},[5260,5265,5269,5273,5277],{"type":29,"tag":63,"props":5261,"children":5262},{"style":76},[5263],{"type":44,"value":5264},"      result ",{"type":29,"tag":63,"props":5266,"children":5267},{"style":70},[5268],{"type":44,"value":1258},{"type":29,"tag":63,"props":5270,"children":5271},{"style":70},[5272],{"type":44,"value":893},{"type":29,"tag":63,"props":5274,"children":5275},{"style":117},[5276],{"type":44,"value":3655},{"type":29,"tag":63,"props":5278,"children":5279},{"style":76},[5280],{"type":44,"value":5281},"(parent, type, guid, initializer);\n",{"type":29,"tag":63,"props":5283,"children":5284},{"class":65,"line":1155},[5285,5290],{"type":29,"tag":63,"props":5286,"children":5287},{"style":70},[5288],{"type":44,"value":5289},"      break",{"type":29,"tag":63,"props":5291,"children":5292},{"style":76},[5293],{"type":44,"value":1244},{"type":29,"tag":63,"props":5295,"children":5296},{"class":65,"line":1164},[5297],{"type":29,"tag":63,"props":5298,"children":5299},{"style":977},[5300],{"type":44,"value":5238},{"type":29,"tag":63,"props":5302,"children":5303},{"class":65,"line":1183},[5304],{"type":29,"tag":63,"props":5305,"children":5306},{"style":76},[5307],{"type":44,"value":2123},{"type":29,"tag":63,"props":5309,"children":5310},{"class":65,"line":1215},[5311,5315],{"type":29,"tag":63,"props":5312,"children":5313},{"style":70},[5314],{"type":44,"value":1704},{"type":29,"tag":63,"props":5316,"children":5317},{"style":76},[5318],{"type":44,"value":5319}," result;\n",{"type":29,"tag":63,"props":5321,"children":5322},{"class":65,"line":1224},[5323],{"type":29,"tag":63,"props":5324,"children":5325},{"style":76},[5326],{"type":44,"value":257},{"type":29,"tag":30,"props":5328,"children":5329},{},[5330,5332,5338,5339,5345,5347,5352,5354,5359,5361,5366,5368,5373,5375,5380,5382,5388,5390,5395,5397,5402,5404,5410],{"type":44,"value":5331},"The parameter ",{"type":29,"tag":59,"props":5333,"children":5335},{"className":5334},[],[5336],{"type":44,"value":5337},"tChannelImpl: _tChannelImplFromWire",{"type":44,"value":3809},{"type":29,"tag":59,"props":5340,"children":5342},{"className":5341},[],[5343],{"type":44,"value":5344},"validator",{"type":44,"value":5346}," function is responsible for taking the initializer object above, which contains a guid for each browser, and convert it to the corresponding object stored in the ",{"type":29,"tag":59,"props":5348,"children":5350},{"className":5349},[],[5351],{"type":44,"value":2148},{"type":44,"value":5353}," variable in the ",{"type":29,"tag":59,"props":5355,"children":5357},{"className":5356},[],[5358],{"type":44,"value":679},{"type":44,"value":5360}," class. If you look at the type definition in ",{"type":29,"tag":59,"props":5362,"children":5364},{"className":5363},[],[5365],{"type":44,"value":679},{"type":44,"value":5367}," the ",{"type":29,"tag":59,"props":5369,"children":5371},{"className":5370},[],[5372],{"type":44,"value":2148},{"type":44,"value":5374}," variable is a map returning one of the ",{"type":29,"tag":59,"props":5376,"children":5378},{"className":5377},[],[5379],{"type":44,"value":604},{"type":44,"value":5381}," subclasses. So in the result above for the ",{"type":29,"tag":59,"props":5383,"children":5385},{"className":5384},[],[5386],{"type":44,"value":5387},"case: 'Playwright'",{"type":44,"value":5389},", it returns a ",{"type":29,"tag":59,"props":5391,"children":5393},{"className":5392},[],[5394],{"type":44,"value":12},{"type":44,"value":5396}," instance, which is a subclass of ",{"type":29,"tag":59,"props":5398,"children":5400},{"className":5399},[],[5401],{"type":44,"value":604},{"type":44,"value":5403},", defined in ",{"type":29,"tag":59,"props":5405,"children":5407},{"className":5406},[],[5408],{"type":44,"value":5409},"client/playwright.ts",{"type":44,"value":228},{"type":29,"tag":52,"props":5412,"children":5414},{"className":54,"code":5413,"filename":1946,"language":56,"meta":7,"style":7},"class Connection extends EventEmitter {\n  _objects: Map\u003CString, ChannelOwner>;\n}\n",[5415],{"type":29,"tag":59,"props":5416,"children":5417},{"__ignoreMap":7},[5418,5441,5478],{"type":29,"tag":63,"props":5419,"children":5420},{"class":65,"line":66},[5421,5425,5429,5433,5437],{"type":29,"tag":63,"props":5422,"children":5423},{"style":70},[5424],{"type":44,"value":2792},{"type":29,"tag":63,"props":5426,"children":5427},{"style":117},[5428],{"type":44,"value":898},{"type":29,"tag":63,"props":5430,"children":5431},{"style":70},[5432],{"type":44,"value":1971},{"type":29,"tag":63,"props":5434,"children":5435},{"style":117},[5436],{"type":44,"value":1976},{"type":29,"tag":63,"props":5438,"children":5439},{"style":76},[5440],{"type":44,"value":135},{"type":29,"tag":63,"props":5442,"children":5443},{"class":65,"line":93},[5444,5449,5453,5457,5461,5466,5470,5474],{"type":29,"tag":63,"props":5445,"children":5446},{"style":147},[5447],{"type":44,"value":5448},"  _objects",{"type":29,"tag":63,"props":5450,"children":5451},{"style":70},[5452],{"type":44,"value":761},{"type":29,"tag":63,"props":5454,"children":5455},{"style":117},[5456],{"type":44,"value":2006},{"type":29,"tag":63,"props":5458,"children":5459},{"style":76},[5460],{"type":44,"value":2011},{"type":29,"tag":63,"props":5462,"children":5463},{"style":117},[5464],{"type":44,"value":5465},"String",{"type":29,"tag":63,"props":5467,"children":5468},{"style":76},[5469],{"type":44,"value":912},{"type":29,"tag":63,"props":5471,"children":5472},{"style":117},[5473],{"type":44,"value":604},{"type":29,"tag":63,"props":5475,"children":5476},{"style":76},[5477],{"type":44,"value":5048},{"type":29,"tag":63,"props":5479,"children":5480},{"class":65,"line":103},[5481],{"type":29,"tag":63,"props":5482,"children":5483},{"style":76},[5484],{"type":44,"value":257},{"type":29,"tag":30,"props":5486,"children":5487},{},[5488,5489,5495,5497,5503,5505,5510,5512,5517,5519,5524,5526,5532,5534,5540,5541,5547,5549,5555,5557,5562],{"type":44,"value":3992},{"type":29,"tag":59,"props":5490,"children":5492},{"className":5491},[],[5493],{"type":44,"value":5494},"_tChannelImplFromWire",{"type":44,"value":5496}," function is responsible for turning the ",{"type":29,"tag":59,"props":5498,"children":5500},{"className":5499},[],[5501],{"type":44,"value":5502},"initializer",{"type":44,"value":5504}," parameter in the constructor for ",{"type":29,"tag":59,"props":5506,"children":5508},{"className":5507},[],[5509],{"type":44,"value":12},{"type":44,"value":5511}," into the ",{"type":29,"tag":59,"props":5513,"children":5515},{"className":5514},[],[5516],{"type":44,"value":604},{"type":44,"value":5518}," subclasses for each of the drivers (chrome, firefox, etc.). Note before the ",{"type":29,"tag":59,"props":5520,"children":5522},{"className":5521},[],[5523],{"type":44,"value":12},{"type":44,"value":5525}," message was sent over to the client, there were messages for each of the ",{"type":29,"tag":59,"props":5527,"children":5529},{"className":5528},[],[5530],{"type":44,"value":5531},"BrowserType",{"type":44,"value":5533}," objects with name ",{"type":29,"tag":59,"props":5535,"children":5537},{"className":5536},[],[5538],{"type":44,"value":5539},"'chrome'",{"type":44,"value":912},{"type":29,"tag":59,"props":5542,"children":5544},{"className":5543},[],[5545],{"type":44,"value":5546},"'firefox'",{"type":44,"value":5548},", etc. If you inspect this object manually, you will find many ",{"type":29,"tag":59,"props":5550,"children":5552},{"className":5551},[],[5553],{"type":44,"value":5554},"EventEmitter",{"type":44,"value":5556}," objects in the ",{"type":29,"tag":59,"props":5558,"children":5560},{"className":5559},[],[5561],{"type":44,"value":5502},{"type":44,"value":5563}," object.",{"type":29,"tag":30,"props":5565,"children":5566},{},[5567,5569,5575,5577,5582,5584,5590,5592,5597,5599,5605,5607,5612,5614,5619,5621,5626],{"type":44,"value":5568},"The other main point to note is the ",{"type":29,"tag":59,"props":5570,"children":5572},{"className":5571},[],[5573],{"type":44,"value":5574},"Root",{"type":44,"value":5576}," design pattern is used on the client side as well. The ",{"type":29,"tag":59,"props":5578,"children":5580},{"className":5579},[],[5581],{"type":44,"value":3476},{"type":44,"value":5583}," corresponding to the ",{"type":29,"tag":59,"props":5585,"children":5587},{"className":5586},[],[5588],{"type":44,"value":5589},"guid=''",{"type":44,"value":5591}," is an instance of the ",{"type":29,"tag":59,"props":5593,"children":5595},{"className":5594},[],[5596],{"type":44,"value":5574},{"type":44,"value":5598}," class, defined in ",{"type":29,"tag":59,"props":5600,"children":5602},{"className":5601},[],[5603],{"type":44,"value":5604},"client/connection.ts",{"type":44,"value":5606},". All this class acts as is a wrapper around the ",{"type":29,"tag":59,"props":5608,"children":5610},{"className":5609},[],[5611],{"type":44,"value":3928},{"type":44,"value":5613},", giving every subclass of ",{"type":29,"tag":59,"props":5615,"children":5617},{"className":5616},[],[5618],{"type":44,"value":604},{"type":44,"value":5620}," access to the ",{"type":29,"tag":59,"props":5622,"children":5624},{"className":5623},[],[5625],{"type":44,"value":3928},{"type":44,"value":5627}," to send messages over to the Playwright server.",{"type":29,"tag":39,"props":5629,"children":5631},{"id":5630},"launching-the-browser-instance",[5632],{"type":44,"value":5633},"Launching the browser instance",{"type":29,"tag":30,"props":5635,"children":5636},{},[5637,5639,5645],{"type":44,"value":5638},"The final bit of code to consider is the ",{"type":29,"tag":59,"props":5640,"children":5642},{"className":5641},[],[5643],{"type":44,"value":5644},"_serverLauncher",{"type":44,"value":5646}," variables being set in each of the drivers. This is written as",{"type":29,"tag":52,"props":5648,"children":5650},{"className":54,"code":5649,"filename":730,"language":56,"meta":7,"style":7},"playwrightAPI.chromium._serverLauncher = new BrowserServerLauncherImpl(\n  \"chromium\"\n);\nplaywrightAPI.firefox._serverLauncher = new BrowserServerLauncherImpl(\n  \"firefox\"\n);\nplaywrightAPI.webkit._serverLauncher = new BrowserServerLauncherImpl(\"webkit\");\n",[5651],{"type":29,"tag":59,"props":5652,"children":5653},{"__ignoreMap":7},[5654,5678,5686,5693,5717,5725,5732],{"type":29,"tag":63,"props":5655,"children":5656},{"class":65,"line":66},[5657,5662,5666,5670,5674],{"type":29,"tag":63,"props":5658,"children":5659},{"style":76},[5660],{"type":44,"value":5661},"playwrightAPI.chromium._serverLauncher ",{"type":29,"tag":63,"props":5663,"children":5664},{"style":70},[5665],{"type":44,"value":1258},{"type":29,"tag":63,"props":5667,"children":5668},{"style":70},[5669],{"type":44,"value":893},{"type":29,"tag":63,"props":5671,"children":5672},{"style":117},[5673],{"type":44,"value":1267},{"type":29,"tag":63,"props":5675,"children":5676},{"style":76},[5677],{"type":44,"value":1212},{"type":29,"tag":63,"props":5679,"children":5680},{"class":65,"line":93},[5681],{"type":29,"tag":63,"props":5682,"children":5683},{"style":87},[5684],{"type":44,"value":5685},"  \"chromium\"\n",{"type":29,"tag":63,"props":5687,"children":5688},{"class":65,"line":103},[5689],{"type":29,"tag":63,"props":5690,"children":5691},{"style":76},[5692],{"type":44,"value":429},{"type":29,"tag":63,"props":5694,"children":5695},{"class":65,"line":138},[5696,5701,5705,5709,5713],{"type":29,"tag":63,"props":5697,"children":5698},{"style":76},[5699],{"type":44,"value":5700},"playwrightAPI.firefox._serverLauncher ",{"type":29,"tag":63,"props":5702,"children":5703},{"style":70},[5704],{"type":44,"value":1258},{"type":29,"tag":63,"props":5706,"children":5707},{"style":70},[5708],{"type":44,"value":893},{"type":29,"tag":63,"props":5710,"children":5711},{"style":117},[5712],{"type":44,"value":1267},{"type":29,"tag":63,"props":5714,"children":5715},{"style":76},[5716],{"type":44,"value":1212},{"type":29,"tag":63,"props":5718,"children":5719},{"class":65,"line":178},[5720],{"type":29,"tag":63,"props":5721,"children":5722},{"style":87},[5723],{"type":44,"value":5724},"  \"firefox\"\n",{"type":29,"tag":63,"props":5726,"children":5727},{"class":65,"line":213},[5728],{"type":29,"tag":63,"props":5729,"children":5730},{"style":76},[5731],{"type":44,"value":429},{"type":29,"tag":63,"props":5733,"children":5734},{"class":65,"line":251},[5735,5740,5744,5748,5752,5756,5761],{"type":29,"tag":63,"props":5736,"children":5737},{"style":76},[5738],{"type":44,"value":5739},"playwrightAPI.webkit._serverLauncher ",{"type":29,"tag":63,"props":5741,"children":5742},{"style":70},[5743],{"type":44,"value":1258},{"type":29,"tag":63,"props":5745,"children":5746},{"style":70},[5747],{"type":44,"value":893},{"type":29,"tag":63,"props":5749,"children":5750},{"style":117},[5751],{"type":44,"value":1267},{"type":29,"tag":63,"props":5753,"children":5754},{"style":76},[5755],{"type":44,"value":238},{"type":29,"tag":63,"props":5757,"children":5758},{"style":87},[5759],{"type":44,"value":5760},"\"webkit\"",{"type":29,"tag":63,"props":5762,"children":5763},{"style":76},[5764],{"type":44,"value":429},{"type":29,"tag":30,"props":5766,"children":5767},{},[5768,5769,5775,5777,5782,5784,5790,5792,5798],{"type":44,"value":2707},{"type":29,"tag":59,"props":5770,"children":5772},{"className":5771},[],[5773],{"type":44,"value":5774},"BrowserServerLauncherImpl",{"type":44,"value":5776}," class is defined next to the ",{"type":29,"tag":59,"props":5778,"children":5780},{"className":5779},[],[5781],{"type":44,"value":496},{"type":44,"value":5783}," file in ",{"type":29,"tag":59,"props":5785,"children":5787},{"className":5786},[],[5788],{"type":44,"value":5789},"browserServerLauncherImpl.ts",{"type":44,"value":5791},". The main functionality in this class lies in the ",{"type":29,"tag":59,"props":5793,"children":5795},{"className":5794},[],[5796],{"type":44,"value":5797},"launchServer",{"type":44,"value":5799}," function, and is only called when you use the",{"type":29,"tag":52,"props":5801,"children":5804},{"className":54,"code":5802,"filename":5803,"language":56,"meta":7,"style":7},"playwrightAPI.chromium.launchServer(serverOptions);\n","my-script.ts",[5805],{"type":29,"tag":59,"props":5806,"children":5807},{"__ignoreMap":7},[5808],{"type":29,"tag":63,"props":5809,"children":5810},{"class":65,"line":66},[5811,5816,5820],{"type":29,"tag":63,"props":5812,"children":5813},{"style":76},[5814],{"type":44,"value":5815},"playwrightAPI.chromium.",{"type":29,"tag":63,"props":5817,"children":5818},{"style":117},[5819],{"type":44,"value":5797},{"type":29,"tag":63,"props":5821,"children":5822},{"style":76},[5823],{"type":44,"value":5824},"(serverOptions);\n",{"type":29,"tag":30,"props":5826,"children":5827},{},[5828,5830,5836],{"type":44,"value":5829},"function. This is for launching a server which exposes a websocket for other programs to interact with the playwright API. This is not used if you are just writing a node script which accesses the ",{"type":29,"tag":59,"props":5831,"children":5833},{"className":5832},[],[5834],{"type":44,"value":5835},"'playwright-core'",{"type":44,"value":5837}," library, something like",{"type":29,"tag":52,"props":5839,"children":5841},{"className":54,"code":5840,"filename":5803,"language":56,"meta":7,"style":7},"import playwright from \"playwright-core\";\n\n(async function () {\n  const browser = await playwright.chromium.launch({ headless: false });\n  const page = await browser.newPage();\n  await page.goto(\"https://playwright.dev\");\n  // ... automate page interactions here\n})();\n",[5842],{"type":29,"tag":59,"props":5843,"children":5844},{"__ignoreMap":7},[5845,5869,5876,5896,5938,5969,5998,6006],{"type":29,"tag":63,"props":5846,"children":5847},{"class":65,"line":66},[5848,5852,5857,5861,5865],{"type":29,"tag":63,"props":5849,"children":5850},{"style":70},[5851],{"type":44,"value":73},{"type":29,"tag":63,"props":5853,"children":5854},{"style":76},[5855],{"type":44,"value":5856}," playwright ",{"type":29,"tag":63,"props":5858,"children":5859},{"style":70},[5860],{"type":44,"value":84},{"type":29,"tag":63,"props":5862,"children":5863},{"style":87},[5864],{"type":44,"value":1779},{"type":29,"tag":63,"props":5866,"children":5867},{"style":76},[5868],{"type":44,"value":1244},{"type":29,"tag":63,"props":5870,"children":5871},{"class":65,"line":93},[5872],{"type":29,"tag":63,"props":5873,"children":5874},{"emptyLinePlaceholder":97},[5875],{"type":44,"value":100},{"type":29,"tag":63,"props":5877,"children":5878},{"class":65,"line":103},[5879,5883,5887,5891],{"type":29,"tag":63,"props":5880,"children":5881},{"style":76},[5882],{"type":44,"value":238},{"type":29,"tag":63,"props":5884,"children":5885},{"style":70},[5886],{"type":44,"value":109},{"type":29,"tag":63,"props":5888,"children":5889},{"style":70},[5890],{"type":44,"value":114},{"type":29,"tag":63,"props":5892,"children":5893},{"style":76},[5894],{"type":44,"value":5895}," () {\n",{"type":29,"tag":63,"props":5897,"children":5898},{"class":65,"line":138},[5899,5903,5907,5911,5915,5920,5924,5929,5934],{"type":29,"tag":63,"props":5900,"children":5901},{"style":70},[5902],{"type":44,"value":144},{"type":29,"tag":63,"props":5904,"children":5905},{"style":394},[5906],{"type":44,"value":150},{"type":29,"tag":63,"props":5908,"children":5909},{"style":70},[5910],{"type":44,"value":155},{"type":29,"tag":63,"props":5912,"children":5913},{"style":70},[5914],{"type":44,"value":160},{"type":29,"tag":63,"props":5916,"children":5917},{"style":76},[5918],{"type":44,"value":5919}," playwright.chromium.",{"type":29,"tag":63,"props":5921,"children":5922},{"style":117},[5923],{"type":44,"value":170},{"type":29,"tag":63,"props":5925,"children":5926},{"style":76},[5927],{"type":44,"value":5928},"({ headless: ",{"type":29,"tag":63,"props":5930,"children":5931},{"style":394},[5932],{"type":44,"value":5933},"false",{"type":29,"tag":63,"props":5935,"children":5936},{"style":76},[5937],{"type":44,"value":4192},{"type":29,"tag":63,"props":5939,"children":5940},{"class":65,"line":178},[5941,5945,5949,5953,5957,5961,5965],{"type":29,"tag":63,"props":5942,"children":5943},{"style":70},[5944],{"type":44,"value":144},{"type":29,"tag":63,"props":5946,"children":5947},{"style":394},[5948],{"type":44,"value":188},{"type":29,"tag":63,"props":5950,"children":5951},{"style":70},[5952],{"type":44,"value":155},{"type":29,"tag":63,"props":5954,"children":5955},{"style":70},[5956],{"type":44,"value":160},{"type":29,"tag":63,"props":5958,"children":5959},{"style":76},[5960],{"type":44,"value":201},{"type":29,"tag":63,"props":5962,"children":5963},{"style":117},[5964],{"type":44,"value":206},{"type":29,"tag":63,"props":5966,"children":5967},{"style":76},[5968],{"type":44,"value":939},{"type":29,"tag":63,"props":5970,"children":5971},{"class":65,"line":213},[5972,5976,5981,5985,5989,5994],{"type":29,"tag":63,"props":5973,"children":5974},{"style":70},[5975],{"type":44,"value":219},{"type":29,"tag":63,"props":5977,"children":5978},{"style":76},[5979],{"type":44,"value":5980}," page.",{"type":29,"tag":63,"props":5982,"children":5983},{"style":117},[5984],{"type":44,"value":233},{"type":29,"tag":63,"props":5986,"children":5987},{"style":76},[5988],{"type":44,"value":238},{"type":29,"tag":63,"props":5990,"children":5991},{"style":87},[5992],{"type":44,"value":5993},"\"https://playwright.dev\"",{"type":29,"tag":63,"props":5995,"children":5996},{"style":76},[5997],{"type":44,"value":429},{"type":29,"tag":63,"props":5999,"children":6000},{"class":65,"line":251},[6001],{"type":29,"tag":63,"props":6002,"children":6003},{"style":977},[6004],{"type":44,"value":6005},"  // ... automate page interactions here\n",{"type":29,"tag":63,"props":6007,"children":6008},{"class":65,"line":923},[6009],{"type":29,"tag":63,"props":6010,"children":6011},{"style":76},[6012],{"type":44,"value":6013},"})();\n",{"type":29,"tag":30,"props":6015,"children":6016},{},[6017,6019,6024],{"type":44,"value":6018},"so for now we skip giving an overview of the ",{"type":29,"tag":59,"props":6020,"children":6022},{"className":6021},[],[6023],{"type":44,"value":5774},{"type":44,"value":6025}," code and defer it to a later post.",{"type":29,"tag":39,"props":6027,"children":6029},{"id":6028},"recap",[6030],{"type":44,"value":6031},"Recap",{"type":29,"tag":30,"props":6033,"children":6034},{},[6035],{"type":44,"value":6036},"Whew! That was quite the journey, so let's recap the main points we covered in this post:",{"type":29,"tag":6038,"props":6039,"children":6040},"ul",{},[6041,6065,6083,6107,6118,6144,6167,6179,6224],{"type":29,"tag":6042,"props":6043,"children":6044},"li",{},[6045,6050,6052,6057,6059,6064],{"type":29,"tag":59,"props":6046,"children":6048},{"className":6047},[],[6049],{"type":44,"value":298},{"type":44,"value":6051}," is a wrapper around the test runner package ",{"type":29,"tag":59,"props":6053,"children":6055},{"className":6054},[],[6056],{"type":44,"value":313},{"type":44,"value":6058}," and the browser automation package ",{"type":29,"tag":59,"props":6060,"children":6062},{"className":6061},[],[6063],{"type":44,"value":306},{"type":44,"value":228},{"type":29,"tag":6042,"props":6066,"children":6067},{},[6068,6070,6075,6077,6082],{"type":44,"value":6069},"Importing from ",{"type":29,"tag":59,"props":6071,"children":6073},{"className":6072},[],[6074],{"type":44,"value":287},{"type":44,"value":6076}," is a dynamically generated process under the hood, which is done in ",{"type":29,"tag":59,"props":6078,"children":6080},{"className":6079},[],[6081],{"type":44,"value":730},{"type":44,"value":228},{"type":29,"tag":6042,"props":6084,"children":6085},{},[6086,6087,6092,6094,6099,6100,6105],{"type":44,"value":570},{"type":29,"tag":59,"props":6088,"children":6090},{"className":6089},[],[6091],{"type":44,"value":287},{"type":44,"value":6093}," there are two main libraries, the ",{"type":29,"tag":59,"props":6095,"children":6097},{"className":6096},[],[6098],{"type":44,"value":519},{"type":44,"value":281},{"type":29,"tag":59,"props":6101,"children":6103},{"className":6102},[],[6104],{"type":44,"value":527},{"type":44,"value":6106}," libraries.",{"type":29,"tag":6042,"props":6108,"children":6109},{},[6110,6112,6117],{"type":44,"value":6111},"This separation exists so other programming languages can easily build a client library which communicates with the ",{"type":29,"tag":59,"props":6113,"children":6115},{"className":6114},[],[6116],{"type":44,"value":527},{"type":44,"value":559},{"type":29,"tag":6042,"props":6119,"children":6120},{},[6121,6123,6128,6130,6135,6137,6142],{"type":44,"value":6122},"These communicate over a client ",{"type":29,"tag":59,"props":6124,"children":6126},{"className":6125},[],[6127],{"type":44,"value":679},{"type":44,"value":6129}," object and a server ",{"type":29,"tag":59,"props":6131,"children":6133},{"className":6132},[],[6134],{"type":44,"value":687},{"type":44,"value":6136}," class, which communicate with each other via a runtime set ",{"type":29,"tag":59,"props":6138,"children":6140},{"className":6139},[],[6141],{"type":44,"value":1015},{"type":44,"value":6143}," parameter.",{"type":29,"tag":6042,"props":6145,"children":6146},{},[6147,6152,6154,6159,6160,6165],{"type":29,"tag":59,"props":6148,"children":6150},{"className":6149},[],[6151],{"type":44,"value":679},{"type":44,"value":6153}," is responsible for constructing client side API's, the API methods you import from ",{"type":29,"tag":59,"props":6155,"children":6157},{"className":6156},[],[6158],{"type":44,"value":287},{"type":44,"value":3958},{"type":29,"tag":59,"props":6161,"children":6163},{"className":6162},[],[6164],{"type":44,"value":687},{"type":44,"value":6166}," is responsible for keeping track of the dispatcher objects on the server side.",{"type":29,"tag":6042,"props":6168,"children":6169},{},[6170,6172,6177],{"type":44,"value":6171},"The instances of ",{"type":29,"tag":59,"props":6173,"children":6175},{"className":6174},[],[6176],{"type":44,"value":619},{"type":44,"value":6178}," subclasses are responsible for communicating with the automated browser their specific set of functionality.",{"type":29,"tag":6042,"props":6180,"children":6181},{},[6182,6187,6189,6194,6196,6201,6203,6208,6210,6215,6217,6222],{"type":29,"tag":59,"props":6183,"children":6185},{"className":6184},[],[6186],{"type":44,"value":679},{"type":44,"value":6188}," is wrapped by ",{"type":29,"tag":59,"props":6190,"children":6192},{"className":6191},[],[6193],{"type":44,"value":604},{"type":44,"value":6195}," subclasses, which all point to the same instance of ",{"type":29,"tag":59,"props":6197,"children":6199},{"className":6198},[],[6200],{"type":44,"value":679},{"type":44,"value":6202}," and are responsible for the client-side API for a specific component of the browser, e.g. ",{"type":29,"tag":59,"props":6204,"children":6206},{"className":6205},[],[6207],{"type":44,"value":642},{"type":44,"value":6209},". Similarly, ",{"type":29,"tag":59,"props":6211,"children":6213},{"className":6212},[],[6214],{"type":44,"value":687},{"type":44,"value":6216}," is wrapped by a subclass of ",{"type":29,"tag":59,"props":6218,"children":6220},{"className":6219},[],[6221],{"type":44,"value":619},{"type":44,"value":6223}," which is responsible for a part of the automated browser.",{"type":29,"tag":6042,"props":6225,"children":6226},{},[6227,6229,6234,6235,6240,6242,6248],{"type":44,"value":6228},"Both the ",{"type":29,"tag":59,"props":6230,"children":6232},{"className":6231},[],[6233],{"type":44,"value":679},{"type":44,"value":281},{"type":29,"tag":59,"props":6236,"children":6238},{"className":6237},[],[6239],{"type":44,"value":687},{"type":44,"value":6241}," classes keep track of the same object on each side of the client/server side of the divide with a unique ",{"type":29,"tag":59,"props":6243,"children":6245},{"className":6244},[],[6246],{"type":44,"value":6247},"GUID",{"type":44,"value":228},{"type":29,"tag":30,"props":6250,"children":6251},{},[6252,6254,6259,6260,6265],{"type":44,"value":6253},"Once you have parsed the functionality of ",{"type":29,"tag":59,"props":6255,"children":6257},{"className":6256},[],[6258],{"type":44,"value":679},{"type":44,"value":281},{"type":29,"tag":59,"props":6261,"children":6263},{"className":6262},[],[6264],{"type":44,"value":687},{"type":44,"value":6266},", and their wrapper APIs, you are at an excellent spot for understanding the whole architecture of Playwright. These core components are essential for providing the client-facing interface used by test-engineers and the facade provided by the server, giving a unified API to automate browser actions.",{"type":29,"tag":6268,"props":6269,"children":6270},"style",{},[6271],{"type":44,"value":6272},"html .default .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}",{"title":7,"searchDepth":93,"depth":93,"links":6274},[6275,6280,6281,6286,6287],{"id":41,"depth":93,"text":45,"children":6276},[6277,6279],{"id":271,"depth":103,"text":6278},"Merging playwright and playwright-core",{"id":562,"depth":103,"text":565},{"id":704,"depth":93,"text":707},{"id":2168,"depth":93,"text":2171,"children":6282},[6283,6284,6285],{"id":2606,"depth":103,"text":2609},{"id":3857,"depth":103,"text":3860},{"id":3984,"depth":103,"text":3987},{"id":5630,"depth":93,"text":5633},{"id":6028,"depth":93,"text":6031},"markdown","content:playwright:how-playwright-initializes.md","content","playwright/how-playwright-initializes.md","md",1713992497978]